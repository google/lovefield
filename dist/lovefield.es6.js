if(!self.window){window=self;}
(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,ca=this;function p(a){return void 0!==a}function ea(){}
function fa(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ga(a){return null!=a}function ha(a){var b=fa(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ia(a){return"string"==typeof a}function ja(a){return"function"==fa(a)}function ka(a){return a[la]||(a[la]=++ma)}var la="closure_uid_"+(1E9*Math.random()>>>0),ma=0;function na(a,b,c){return a.call.apply(a.bind,arguments)}
function oa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function pa(a,b,c){pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:oa;return pa.apply(null,arguments)}
function qa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function q(a,b){var c=a.split("."),d=ca;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&p(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function r(a,b){function c(){}c.prototype=b.prototype;a.eb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Tg=function(a,c,f){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function ra(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ra);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}r(ra,Error);ra.prototype.name="CustomError";var sa=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};
function ta(a){var b=0,c=sa(String(ua)).split(".");a=sa(String(a)).split(".");for(var d=Math.max(c.length,a.length),e=0;0==b&&e<d;e++){var f=c[e]||"",h=a[e]||"",k=/(\d*)(\D*)/g,n=/(\d*)(\D*)/g;do{var A=k.exec(f)||["","",""],O=n.exec(h)||["","",""];if(0==A[0].length&&0==O[0].length)break;b=va(0==A[1].length?0:parseInt(A[1],10),0==O[1].length?0:parseInt(O[1],10))||va(0==A[2].length,0==O[2].length)||va(A[2],O[2])}while(0==b)}return b}function va(a,b){return a<b?-1:a>b?1:0};function wa(a,b,c){this.og=c;this.Nf=a;this.Hg=b;this.od=0;this.ed=null}wa.prototype.get=function(){var a;0<this.od?(this.od--,a=this.ed,this.ed=a.next,a.next=null):a=this.Nf();return a};wa.prototype.put=function(a){this.Hg(a);this.od<this.og&&(this.od++,a.next=this.ed,this.ed=a)};var xa=Array.prototype.indexOf?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ia(a))return ia(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},ya=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},za=Array.prototype.map?function(a,b,c){return Array.prototype.map.call(a,
b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=ia(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Aa=Array.prototype.reduce?function(a,b,c,d){d&&(b=pa(b,d));return Array.prototype.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;ya(a,function(c,h){e=b.call(d,e,c,h,a)});return e},Ba=Array.prototype.some?function(a,b,c){return Array.prototype.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};
function Ca(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function Da(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ea(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==fa(d))for(var e=0;e<d.length;e+=8192)for(var f=Ea.apply(null,Ca(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};var Fa;a:{var Ga=ca.navigator;if(Ga){var Ha=Ga.userAgent;if(Ha){Fa=Ha;break a}}Fa=""}function t(a){return-1!=Fa.indexOf(a)};function Ia(){return(t("Chrome")||t("CriOS"))&&!t("Edge")};function Ka(a){ca.setTimeout(function(){throw a;},0)}var La;
function Ma(){var a=ca.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!t("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=pa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!t("Trident")&&!t("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(p(c.next)){c=c.next;var a=c.Be;c.Be=null;a()}};return function(a){d.next={Be:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){ca.setTimeout(a,0)}};function Na(){this.yd=this.pc=null}var Pa=new wa(function(){return new Oa},function(a){a.reset()},100);Na.prototype.add=function(a,b){var c=Pa.get();c.set(a,b);this.yd?this.yd.next=c:this.pc=c;this.yd=c};Na.prototype.remove=function(){var a=null;this.pc&&(a=this.pc,this.pc=this.pc.next,this.pc||(this.yd=null),a.next=null);return a};function Oa(){this.next=this.scope=this.Qd=null}Oa.prototype.set=function(a,b){this.Qd=a;this.scope=b;this.next=null};
Oa.prototype.reset=function(){this.next=this.scope=this.Qd=null};function Qa(a,b){Ra||Sa();Ta||(Ra(),Ta=!0);Ua.add(a,b)}var Ra;function Sa(){if(ca.Promise&&ca.Promise.resolve){var a=ca.Promise.resolve(void 0);Ra=function(){a.then(Va)}}else Ra=function(){var a=Va;!ja(ca.setImmediate)||ca.Window&&ca.Window.prototype&&!t("Edge")&&ca.Window.prototype.setImmediate==ca.setImmediate?(La||(La=Ma()),La(a)):ca.setImmediate(a)}}var Ta=!1,Ua=new Na;function Va(){for(var a=null;a=Ua.remove();){try{a.Qd.call(a.scope)}catch(b){Ka(b)}Pa.put(a)}Ta=!1};function u(a,b){this.Qa=0;this.kf=void 0;this.Uc=this.ec=this.D=null;this.dd=this.Od=!1;if(a!=ea)try{var c=this;a.call(b,function(a){Wa(c,2,a)},function(a){Wa(c,3,a)})}catch(d){Wa(this,3,d)}}function Xa(){this.next=this.context=this.jc=this.Hc=this.child=null;this.Bd=!1}Xa.prototype.reset=function(){this.context=this.jc=this.Hc=this.child=null;this.Bd=!1};var Ya=new wa(function(){return new Xa},function(a){a.reset()},100);function Za(a,b,c){var d=Ya.get();d.Hc=a;d.jc=b;d.context=c;return d}
function v(a){if(a instanceof u)return a;var b=new u(ea);Wa(b,2,a);return b}function $a(a){return new u(function(b,c){c(a)})}function ab(a,b,c){bb(a,b,c,null)||Qa(qa(b,a))}function cb(a){return new u(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,n;k<a.length;k++)n=a[k],ab(n,qa(f,k),h);else b(e)})}function w(){var a,b,c=new u(function(c,e){a=c;b=e});return new db(c,a,b)}
u.prototype.then=function(a,b,c){return eb(this,ja(a)?a:null,ja(b)?b:null,c)};u.prototype.then=u.prototype.then;u.prototype.$goog_Thenable=!0;u.prototype.qe=function(a,b){return eb(this,null,a,b)};function fb(a,b){a.ec||2!=a.Qa&&3!=a.Qa||gb(a);a.Uc?a.Uc.next=b:a.ec=b;a.Uc=b}
function eb(a,b,c,d){var e=Za(null,null,null);e.child=new u(function(a,h){e.Hc=b?function(c){try{var e=b.call(d,c);a(e)}catch(A){h(A)}}:a;e.jc=c?function(b){try{var e=c.call(d,b);!p(e)&&b instanceof hb?h(b):a(e)}catch(A){h(A)}}:h});e.child.D=a;fb(a,e);return e.child}u.prototype.Og=function(a){this.Qa=0;Wa(this,2,a)};u.prototype.Pg=function(a){this.Qa=0;Wa(this,3,a)};
function Wa(a,b,c){0==a.Qa&&(a==c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Qa=1,bb(c,a.Og,a.Pg,a)||(a.kf=c,a.Qa=b,a.D=null,gb(a),3!=b||c instanceof hb||ib(a,c)))}function bb(a,b,c,d){if(a instanceof u)return fb(a,Za(b||ea,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ja(f))return jb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function jb(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(n){f(n)}}function gb(a){a.Od||(a.Od=!0,Qa(a.Uf,a))}function kb(a){var b=null;a.ec&&(b=a.ec,a.ec=b.next,b.next=null);a.ec||(a.Uc=null);return b}
u.prototype.Uf=function(){for(var a=null;a=kb(this);){var b=this.Qa,c=this.kf;if(3==b&&a.jc&&!a.Bd)for(var d=void 0,d=this;d&&d.dd;d=d.D)d.dd=!1;if(a.child)a.child.D=null,lb(a,b,c);else try{a.Bd?a.Hc.call(a.context):lb(a,b,c)}catch(e){mb.call(null,e)}Ya.put(a)}this.Od=!1};function lb(a,b,c){2==b?a.Hc.call(a.context,c):a.jc&&a.jc.call(a.context,c)}function ib(a,b){a.dd=!0;Qa(function(){a.dd&&mb.call(null,b)})}var mb=Ka;function hb(a){ra.call(this,a)}r(hb,ra);hb.prototype.name="cancel";
function db(a,b,c){this.ha=a;this.resolve=b;this.reject=c};function nb(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var n=0;n<f+1;n++)h[0][n]=0;for(k=1;k<=e;k++)for(n=1;n<=f;n++)c(a[k-1],b[n-1])?h[k][n]=h[k-1][n-1]+1:h[k][n]=Math.max(h[k-1][n],h[k][n-1]);for(var A=[],k=e,n=f;0<k&&0<n;)c(a[k-1],b[n-1])?(A.unshift(d(k-1,n-1)),k--,n--):h[k-1][n]>h[k][n-1]?k--:n--;return A}function ob(a){return Aa(arguments,function(a,c){return a+c},0)}
function pb(a){return ob.apply(null,arguments)/arguments.length}function qb(a){var b=arguments.length;if(2>b)return 0;var c=pb.apply(null,arguments);return ob.apply(null,za(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function rb(a){return Math.sqrt(qb.apply(null,arguments))};var sb="StopIteration"in ca?ca.StopIteration:{message:"StopIteration",stack:""};function tb(){}tb.prototype.next=function(){throw sb;};tb.prototype.ue=function(){return this};function ub(a){if(a instanceof tb)return a;if("function"==typeof a.ue)return a.ue(!1);if(ha(a)){var b=0,c=new tb;c.next=function(){for(;;){if(b>=a.length)throw sb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function vb(a,b){if(ha(a))try{ya(a,b,void 0)}catch(c){if(c!==sb)throw c;}else{a=ub(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==sb)throw c;}}}function wb(a){if(Ba(arguments,function(a){return!a.length})||!arguments.length)return new tb;var b=new tb,c=arguments,d=Da(c.length);b.next=function(){if(d){for(var a=za(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw sb;};return b};function zb(a){Ab(a);return a.a.concat()}function Ab(a){if(a.Jf!=a.a.length){for(var b=0,c=0;b<a.a.length;){var d=a.a[b];Bb(a.$,d)&&(a.a[c++]=d);b++}a.a.length=c}if(a.Jf!=a.a.length){for(var e={},c=b=0;b<a.a.length;)d=a.a[b],Bb(e,d)||(a.a[c++]=d,e[d]=1),b++;a.a.length=c}}function Bb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Cb(){return t("iPhone")&&!t("iPod")&&!t("iPad")};var Db=t("Opera"),Eb=t("Trident")||t("MSIE"),Fb=t("Edge"),Gb=t("Gecko")&&!(-1!=Fa.toLowerCase().indexOf("webkit")&&!t("Edge"))&&!(t("Trident")||t("MSIE"))&&!t("Edge"),Hb=-1!=Fa.toLowerCase().indexOf("webkit")&&!t("Edge"),Ib;
a:{var Jb="",Kb=function(){var a=Fa;if(Gb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Fb)return/Edge\/([\d\.]+)/.exec(a);if(Eb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Hb)return/WebKit\/(\S+)/.exec(a);if(Db)return/(?:Version)[ \/]?(\S+)/.exec(a)}();Kb&&(Jb=Kb?Kb[1]:"");if(Eb){var Lb,Mb=ca.document;Lb=Mb?Mb.documentMode:void 0;if(null!=Lb&&Lb>parseFloat(Jb)){Ib=String(Lb);break a}}Ib=Jb}var ua=Ib,Nb={};var Ob=Cb()||t("iPod"),Pb=t("iPad"),Qb=Ia(),Rb=t("Safari")&&!(Ia()||t("Coast")||t("Opera")||t("Edge")||t("Silk")||t("Android"))&&!(Cb()||t("iPad")||t("iPod"));/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Sb(){this.Ig=Rb||Pb||Ob;this.dg=!(this.Ig||Eb&&!Nb[10]&&!(Nb[10]=0<=ta(10)));!Eb||Nb[11]||(Nb[11]=0<=ta(11));this.Sg=Qb||Rb}var Tb;function x(){return new window.Map}function Ub(a){var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function y(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Vb(a,b){this.ra=a;this.l=b||this.Ge()}var Wb=0;m=Vb.prototype;m.id=g("ra");m.Ge=function(){return{}};m.tf=g("l");m.Ia=function(){return{id:this.ra,value:this.tf()}};m.nb=function(a){return"#"==a.substr(-1)?this.ra:null};function Xb(a){return new Vb(a.id,a.value)}function Yb(a){return new Vb(Wb++,a||{})}function Zb(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};var $b={};q("lf.TransactionType",$b);$b.READ_ONLY=0;$b.READ_WRITE=1;function z(a,b,c,d,e){this.td=a;this.hg=b;this.Rg=c;this.Pf=d;this.Gf=e}q("lf.TransactionStats",z);z.prototype.Mg=g("td");z.prototype.success=z.prototype.Mg;z.prototype.gg=g("hg");z.prototype.insertedRowCount=z.prototype.gg;z.prototype.Qg=g("Rg");z.prototype.updatedRowCount=z.prototype.Qg;z.prototype.Of=g("Pf");z.prototype.deletedRowCount=z.prototype.Of;z.prototype.Ff=g("Gf");z.prototype.changedTableCount=z.prototype.Ff;function bc(a,b){this.vd=a;this.Oa=b||null;this.O=w();this.td=!1;this.ya=null}bc.prototype.ka=function(){return(0==this.vd?this.sc():cc(this)).then(function(a){this.td=!0;return a}.bind(this))};function cc(a){try{dc(a.Oa)}catch(b){return $a(b)}return ec(a).then(function(a){this.Oa.ka();return a}.bind(a))}function ec(a){fc(a);gc(a);return a.sc()}
function fc(a){a.Oa.fb.forEach(function(a,c){var d=this.Oa.da().get(c),d=this.G(d.getName(),d.kb.bind(d),0),e=y(a.wa).map(function(a){return a.id()});0<e.length&&d.remove(e).qe(this.Oe,this);e=y(a.ma).map(function(a){return a[1]}).concat(y(a.va));d.put(e).qe(this.Oe,this)},a)}function gc(a){hc(a.Oa).forEach(function(a){var c=this.G(a.getName(),Xb,1);c.remove([]);c.put(a.Ia())},a)}bc.prototype.Oe=function(a){this.O.reject(a)};
bc.prototype.X=function(){if(null===this.ya)if(this.td)if(0==this.vd)this.ya=new z(!0,0,0,0,0);else{var a=0,b=0,c=0,d=0;this.Oa.fb.forEach(function(e){d++;a+=e.va.size;c+=e.ma.size;b+=e.wa.size});this.ya=new z(!0,a,c,b,d)}else this.ya=new z(!1,0,0,0,0);return this.ya};function ic(a){this.Jg=a}ic.prototype.toString=g("Jg");var jc=new ic("backstore"),kc=new ic("cache"),lc=new ic("indexstore"),mc=new ic("engine"),nc=new ic("runner"),oc=new ic("observerregistry"),pc=new ic("schema");function B(a){return p(a)?new window.Set(a):new window.Set}function C(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function qc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function rc(a,b){this.ra=a;this.l=b||{}}function sc(a){var b=B();a.forEach(function(a){b.add(a>>9)});return C(b)}rc.prototype.V=g("ra");function tc(a,b){b.forEach(function(a){this.l[a.id()]=a.Ia()},a)}function uc(a,b){b.forEach(function(a){delete this.l[a]},a)}rc.prototype.Ia=function(){return{id:this.ra,value:JSON.stringify(this.l)}};function vc(a){return new rc(a.id,JSON.parse(a.value))};function wc(a,b,c){this.Y=a;this.Gb=b;this.lf=c}m=wc.prototype;m.get=function(a){if(0==a.length)return this.Rd();var b=this.Gb;return xc(this,a).then(function(c){return a.map(function(a){var e=c.get(a>>9);return b(e.l[a])})})};function xc(a,b){var c=x(),d=w(),e=sc(b).map(function(a){return new u(function(b,d){var e;try{e=this.Y.get(a)}catch(A){d(A);return}e.onerror=d;e.onsuccess=function(a){a=vc(a.target.result);c.set(a.V(),a);b()}},this)},a);cb(e).then(function(){d.resolve(c)});return d.ha}
m.Rd=function(){return new u(function(a,b){var c=[],d;try{d=this.Y.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f=vc(b.value).l,h;for(h in f)c.push(this.Gb(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Ub=function(a){return new u(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return v();var b=x();a.forEach(function(a){var d=a.id()>>9,e=b.get(d)||null;null===e&&(e=this.lf(this.Y.name,d));tc(e,[a]);b.set(d,e)},this);a=y(b).map(function(a){return this.Ub(function(){return this.Y.put(a.Ia())}.bind(this))},this);return cb(a)};
m.remove=function(a){if(0==a.length)return this.Ub(function(){return this.Y.clear()}.bind(this));var b=x();a.forEach(function(a){var d=a>>9,e=b.get(d)||null;null===e&&(e=this.lf(this.Y.name,d));uc(e,[a]);b.set(d,e)},this);a=y(b).map(function(a){return this.Ub(function(){return 0==Object.keys(a.l).length?this.Y.delete(a.V()):this.Y.put(a.Ia())}.bind(this))},this);return cb(a)};function yc(a,b,c){a=a.b(kc);var d=[c<<9,(c+1<<9)-1];b=a.Ra(b,d[0],d[1]);c=new rc(c);tc(c,b);return c}
function zc(a,b){return new rc(b)};function Ac(a){this.U=a.b(kc);this.C=a.b(lc);this.g=a.b(pc)}Ac.prototype.update=function(a){a.forEach(function(a){Bc(this,a);Cc(this,a)},this)};function Cc(a,b){var c=b.getName();b.wa.forEach(function(a,b){this.U.remove(c,b)},a);b.va.forEach(function(a){this.U.set(c,a)},a);b.ma.forEach(function(a){this.U.set(c,a[1])},a)}function Bc(a,b){var c=a.g.table(b.getName());Dc(b).forEach(function(a){Ec(this,c,a)},a)}
function Ec(a,b,c){var d=a.C.mc.get(b.getName())||[],e=0;d.forEach(function(a){try{Fc(a,c),e++}catch(b){throw d.slice(0,e).forEach(function(a){Fc(a,[c[1],c[0]])},this),b;}},a)}function Fc(a,b){var c=null===b[1]?void 0:b[1].nb(a.getName()),d=null===b[0]?void 0:b[0].nb(a.getName());if(!p(d)&&p(c))a.add(c,b[1].id());else if(p(d)&&p(c)){if(null===c||null===d){if(c==d)return}else if(0==a.ib().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else p(d)&&!p(c)&&a.remove(d,b[0].id())};var Gc={};q("lf.ConstraintAction",Gc);Gc.RESTRICT=0;Gc.CASCADE=1;var Hc={};q("lf.ConstraintTiming",Hc);Hc.IMMEDIATE=0;Hc.DEFERRABLE=1;var Ic={};q("lf.Order",Ic);Ic.DESC=0;Ic.ASC=1;var Jc={};q("lf.Type",Jc);Jc.ARRAY_BUFFER=0;Jc.BOOLEAN=1;Jc.DATE_TIME=2;Jc.INTEGER=3;Jc.NUMBER=4;Jc.STRING=5;Jc.OBJECT=6;var Kc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};q("lf.type.DEFAULT_VALUES",Kc);function D(a,b){this.code=a;this.message="http://google.github.io/lovefield/error_lookup/src/error_lookup.html?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(arguments[c].toString().slice(0,64))}r(D,Error);function Lc(){this.$=x();this.size=0}m=Lc.prototype;m.has=function(a){return this.$.has(a)};m.set=function(a,b){var c=this.$.get(a)||null;null===c&&(c=B(),this.$.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.Xb=function(a,b){var c=this.$.get(a)||null;null===c&&(c=B(),this.$.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};m.Yd=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Xb(b,c)},this);return this};
m.delete=function(a,b){var c=this.$.get(a)||null;if(null===c)return!1;var d=c.delete(b);d&&(--this.size,0==c.size&&this.$.delete(a));return d};m.get=function(a){a=this.$.get(a)||null;return null===a?null:C(a)};m.clear=function(){this.$.clear();this.size=0};m.keys=function(){return Ub(this.$)};m.values=function(){var a=[];this.$.forEach(function(b){a.push.apply(a,C(b))});return a};function Mc(a){this.C=a.b(lc);this.g=a.b(pc);this.U=a.b(kc);this.Yc=null}function Nc(a,b,c){var d=b.Hb().ug;c.forEach(function(a){d.forEach(function(b){if(null==a.l[b.getName()])throw new D(202,b.j());},this)},a)}function Oc(a,b,c,d){b.Hb().Sd().forEach(function(a){a.timing==d&&Qc(this,a,c)},a)}function Qc(a,b,c){var d=Rc(a,b);c.forEach(function(a){if(Sc(a[0],a[1],b.name)&&(a=a[1].nb(b.name),null!==a&&!d.jb(a)))throw new D(203,b.name);},a)}
function Rc(a,b){null===a.Yc&&(a.Yc=x());var c=a.Yc.get(b.name)||null;null===c&&(c=a.g.table(b.Ta)[b.Ic].Ba(),c=a.C.get(c.j()),a.Yc.set(b.name,c));return c}function Sc(a,b,c){return(null===a?null!==b:null===b)||a.nb(c)!=b.nb(c)}function Tc(a,b,c,d){b=Uc(a.g.info(),b.getName(),0);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&Vc(a,b,c,function(a,b,c){if(b.jb(c))throw new D(203,a.name);}))}
function Wc(a,b,c){b=Uc(a.g.info(),b.getName(),1);if(null===b)return null;var d=new Lc;Vc(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.Xb(a.Ce,b)});return d}function Xc(a,b,c){var d=new Lc;Vc(a,c,b,function(a,b,c,k){b.get(c).forEach(function(b){d.set(b,{Pd:a,zg:k[1]})})});return d}function Vc(a,b,c,d){b.forEach(function(a){var b=this.C.get(a.name),h=Rc(this,a);c.forEach(function(c){if(Sc(c[0],c[1],h.getName())){var n=c[0].nb(h.getName());d(a,b,n,c)}},this)},a)}
function Yc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Oc(a,b,c,d))}function Zc(a,b,c,d){0!=c.length&&(Oc(a,b,c,d),Tc(a,b,c,d))}function $c(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),Tc(a,b,c,d))}
function ad(a,b,c){var d={pe:[],nf:new Lc},e=new Lc;e.Xb(b.getName(),c.map(function(a){return a.id()}));do{var f=new Lc;e.keys().forEach(function(a){var b=this.g.table(a);a=e.get(a).map(function(a){return[this.U.get(a),null]},this);b=Wc(this,b,a);null!==b&&(d.pe.unshift.apply(d.pe,b.keys()),f.Yd(b))},a);e=f;d.nf.Yd(e)}while(0<e.size);return d};function bd(a){this.va=x();this.ma=x();this.wa=x();this.w=a}m=bd.prototype;m.getName=g("w");m.add=function(a){if(this.wa.has(a.id())){var b=[this.wa.get(a.id()),a];this.ma.set(a.id(),b);this.wa.delete(a.id())}else this.va.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.va.has(c)?this.va.set(c,b):(this.ma.has(c)&&(a=[this.ma.get(a[0].id())[0],b]),this.ma.set(c,a))};
m.delete=function(a){if(this.va.has(a.id()))this.va.delete(a.id());else if(this.ma.has(a.id())){var b=this.ma.get(a.id())[0];this.ma.delete(a.id());this.wa.set(a.id(),b)}else this.wa.set(a.id(),a)};m.Yd=function(a){a.va.forEach(function(a){this.add(a)},this);a.ma.forEach(function(a){this.modify(a)},this);a.wa.forEach(function(a){this.delete(a)},this)};
function Dc(a){var b=[];a.va.forEach(function(a){b.push([null,a])});a.ma.forEach(function(a){b.push(a)});a.wa.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+Ub(this.va).toString()+"], ["+Ub(this.ma).toString()+"], ["+Ub(this.wa).toString()+"]"};function cd(a){var b=new bd(a.w);a.va.forEach(function(a){b.delete(a)});a.wa.forEach(function(a){b.add(a)});a.ma.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.jg=function(){return 0==this.va.size&&0==this.wa.size&&0==this.ma.size};function dd(a,b){this.aa=x();b.forEach(function(a){this.aa.set(a.getName(),a)},this);this.g=a.b(pc);this.U=a.b(kc);this.C=a.b(lc);this.za=new Mc(a);this.fd=new Ac(a);this.fb=x()}function hc(a){var b=[];Ub(a.fb).map(function(a){return this.aa.get(a)},a).forEach(function(a){a.Eb()&&(a.Ca().forEach(function(a){b.push(this.C.get(a.j()))},this),b.push(this.C.get(a.getName()+".#")))},a);return b}m=dd.prototype;m.da=g("aa");
m.Cb=function(a,b){ed(this,a);Nc(this.za,a,b);Yc(this.za,a,b,0);for(var c=0;c<b.length;c++)fd(this,a,[null,b[c]])};function fd(a,b,c){var d=b.getName(),e=a.fb.get(d)||new bd(d);a.fb.set(d,e);try{Ec(a.fd,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.U.set(d,f),e.add(f)):null!==b&&null!==f?(a.U.set(d,f),e.modify(c)):null!==b&&null===f&&(a.U.remove(d,b.id()),e.delete(b))}
m.update=function(a,b){ed(this,a);Nc(this.za,a,b);var c=b.map(function(a){return[this.U.get(a.id()),a]},this);gd(this,a,c);Zc(this.za,a,c,0);c.forEach(function(b){fd(this,a,b)},this)};m.Td=function(a,b){ed(this,a);Nc(this.za,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=a.Hb().ad();if(null===h)f=null;else{f=this.za;var h=h.j(),k=d.nb(h);f=f.C.get(h).get(k);f=0==f.length?null:f[0]}null!=f?(e=this.U.get(f),d.ra=f,Zc(this.za,a,[[e,d]],0)):Yc(this.za,a,[d],0);fd(this,a,[e,d])}};
m.remove=function(a,b){ed(this,a);hd(this,a,b);$c(this.za,a,b,0);for(var c=0;c<b.length;c++)fd(this,a,[b[c],null])};function gd(a,b,c){b=Uc(a.g.info(),b.getName(),1);if(null!==b){var d=Xc(a.za,c,b);d.keys().forEach(function(a){d.get(a).forEach(function(b){var c=this.g.table(b.Pd.Ce),d=this.U.get(a),n=c.kb(d.Ia());n.l[b.Pd.wb]=b.zg.l[b.Pd.Ic];fd(this,c,[d,n])},this)},a)}}
function hd(a,b,c){if(null!==Uc(a.g.info(),b.getName(),1)){b=ad(a.za,b,c);var d=b.nf;b.pe.forEach(function(a){var b=this.g.table(a);a=d.get(a).map(function(a){return this.U.get(a)},this);$c(this.za,b,a,0);a.forEach(function(a){fd(this,b,[a,null])},this)},a)}}function dc(a){a.fb.forEach(function(a){var c=this.aa.get(a.getName());Yc(this.za,c,y(a.va),1);$c(this.za,c,y(a.wa),1);Zc(this.za,c,y(a.ma),1)},a)}m.ka=aa();m.Kb=function(){var a=y(this.fb).map(function(a){return cd(a)});this.fd.update(a)};
function ed(a,b){if(!a.aa.has(b.getName()))throw new D(106,b.getName());};function E(a,b,c,d){this.from=a;this.m=b;this.ea=this.from==F?!1:c;this.oa=this.m==F?!1:d}var F=new (aa());E.prototype.toString=function(){return(this.ea?"(":"[")+(this.from==F?"unbound":this.from)+", "+(this.m==F?"unbound":this.m)+(this.oa?")":"]")};function id(a){if(jd(a))return[];var b=null,c=null;a.from==F||(b=new E(F,a.from,!1,!a.ea));a.m==F||(c=new E(a.m,F,!a.oa,!1));return[b,c].filter(function(a){return null!==a})}E.prototype.reverse=function(){return new E(this.m,this.from,this.oa,this.ea)};
function kd(a,b){var c=ld(a.from,b.from,!0,a.ea,b.ea);if(0==c)return!0;var d=-1==c?a:b,c=1==c?a:b;return d.m==F||d.m>c.from||d.m==c.from&&!d.oa&&!c.ea}function md(){return new E(F,F,!1,!1)}function jd(a){return a.from==F&&a.m==F}function nd(a){return a.from==a.m&&a.from!=F&&!a.ea&&!a.oa}E.prototype.contains=function(a){var b=this.m==F||a<this.m||a==this.m&&!this.oa;return(this.from==F||a>this.from||a==this.from&&!this.ea)&&b};
function ld(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==F?b==F?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==F?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function od(a,b){var c=ld(a.from,b.from,!0,a.ea,b.ea);0==c&&(c=ld(a.m,b.m,!1,a.oa,b.oa));return c}function pd(a){if(0==a.length)return[];a.sort(od);for(var b=Array(a.length+1),c=0;c<b.length;c++)b[c]=0==c?new E(F,a[c].from,!1,!0):c==b.length-1?new E(a[c-1].m,F,!0,!1):new E(a[c-1].m,a[c].from,!0,!0);return b};function qd(a){this.lc=[];p(a)&&this.add(a)}qd.prototype.toString=function(){return this.lc.map(function(a){return a.toString()}).join(",")};qd.prototype.jb=function(a){return this.lc.some(function(b){return b.contains(a)})};qd.prototype.Bb=g("lc");
qd.prototype.add=function(a){if(0!=a.length)if(a=this.lc.concat(a),1==a.length)this.lc=a;else{a.sort(od);for(var b=[],c=a[0],d=1;d<a.length;++d)if(kd(c,a[d])){var e=a[d],f=md();if(c.from!=F&&e.from!=F){var h=ld(c.from,e.from,!0);1!=h?(f.from=c.from,f.ea=0!=h?c.ea:c.ea&&e.ea):(f.from=e.from,f.ea=e.ea)}c.m!=F&&e.m!=F&&(h=ld(c.m,e.m,!1),-1!=h?(f.m=c.m,f.oa=0!=h?c.oa:c.oa&&e.oa):(f.m=e.m,f.oa=e.oa));c=f}else b.push(c),c=a[d];b.push(c);this.lc=b}};
function rd(a,b){var c=[];a.Bb().map(function(a){return b.Bb().map(function(b){var c;if(kd(a,b)){c=md();var h=ld(a.from,b.from,!0),h=0==h?a.ea?a:b:-1!=h?a:b;c.from=h.from;c.ea=h.ea;a.m==F||b.m==F?b=a.m==F?b:a:(h=ld(a.m,b.m,!1),b=0==h?a.oa?a:b:-1==h?a:b);c.m=b.m;c.oa=b.oa}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new qd(c.filter(function(a){return null!==a}))};function G(a,b){this.entries=a;this.L=B(b);this.Wa=null}G.prototype.o=function(){return C(this.L)};function sd(a){return a.entries.map(function(a){return a.ua.l})}function td(a){return a.entries.map(function(a){return a.ua.id()})}function ud(a,b){return a.Wa.get(b.j())}var vd=null;function wd(){null===vd&&(vd=new G([],[]));return vd}
function xd(a){if(0==a.length)return wd();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=x();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=x(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new G(y(e),C(a[0].L))}function yd(a){if(0==a.length)return wd();var b=x();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new G(y(b),C(a[0].L))}
function zd(a,b){var c=1<b.length,d=a.map(function(a){return new Ad(a,c)});return new G(d,b)}function Ad(a,b){this.ua=a;this.id=Bd++;this.Vd=b}var Bd=0;function H(a,b){var c=b.Xa();return null!==c&&a.ua.l.hasOwnProperty(c)?a.ua.l[c]:a.Vd?a.ua.l[Cd(b.G())][b.getName()]:a.ua.l[b.getName()]}function Dd(a,b,c){var d=b.Xa();if(null!=d)a.ua.l[d]=c;else if(a.Vd){var d=Cd(b.G()),e=a.ua.l[d];null==e&&(e={},a.ua.l[d]=e);e[b.getName()]=c}else a.ua.l[b.getName()]=c}
function Ed(a,b,c,d){function e(a,b){if(a.Vd){var c=a.ua.l,d;for(d in c)f[d]=c[d]}else f[b[0]]=a.ua.l}var f={};e(a,b);e(c,d);a=new Vb(-1,f);return new Ad(a,!0)};q("lf.bind",function(a){return new Fd(a)});function Fd(a){this.fa=a}q("lf.Binder",Fd);Fd.prototype.Ba=g("fa");function Gd(){this.Ue=Hd();var a=Id();this.Ob=x();this.Ob.set(1,Jd());this.Ob.set(2,Kd());this.Ob.set(4,a);this.Ob.set(3,a);this.Ob.set(5,Ld());this.Ob.set(6,Md())}var Nd;function Od(){null!=Nd||(Nd=new Gd);return Nd}function Pd(a,b,c){a=a.Ob.get(b)||null;if(null===a)throw new D(550);c=a.get(c)||null;if(null===c)throw new D(550);return c}
function Hd(){function a(a){return a}var b=x();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}function Jd(){var a=x();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function Id(){var a=Jd();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function Ld(){var a=Id();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}function Md(){var a=x();a.set("eq",function(a,c){if(null!==c)throw new D(550);return null===a});a.set("neq",function(a,c){if(null!==c)throw new D(550);return null!==a});return a}
function Kd(){var a=x();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(c){return c.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function I(){this.h=this.D=null}var Qd=[];I.prototype.getParent=g("D");I.prototype.Ya=function(){for(var a=this;null!==a.getParent();)a=a.getParent();return a};function Rd(a){for(var b=0;null!==a.getParent();)b++,a=a.getParent();return b}function J(a){return a.h||Qd}function Sd(a,b){return J(a)[b]||null}function Td(a,b,c){b.D=a;null===a.h?a.h=[b]:a.h.splice(c,0,b)}function K(a,b){b.D=a;null===a.h?a.h=[b]:a.h.push(b)}
function Ud(a,b){var c=a.h&&a.h[b];return c?(c.D=null,a.h.splice(b,1),0==a.h.length&&(a.h=null),c):null}I.prototype.removeChild=function(a){return Ud(this,J(this).indexOf(a))};function Vd(a,b,c){Sd(a,c).D=null;b.D=a;a.h[c]=b}function Wd(a,b,c){!1!==b.call(c,a)&&J(a).forEach(function(a){Wd(a,b,c)})};function Xd(){I.call(this);this.ra=Yd++}r(Xd,I);var Yd=0;Xd.prototype.V=g("ra");function Zd(a,b,c){Xd.call(this);this.I=a;this.value=b;this.B=c;this.vc=Pd(Od(),this.I.H(),this.B);this.Sa=!1;this.dc=b}r(Zd,Xd);m=Zd.prototype;m.Nb=function(){var a=new Zd(this.I,this.value,this.B);a.dc=this.dc;a.sd(this.Sa);var b=this.V();a.ra=b;return a};m.lb=function(a){return null!=a?(a.push(this.I),a):[this.I]};m.o=function(a){a=null!=a?a:B();a.add(this.I.G());return a};m.sd=ba("Sa");
function $d(a){var b=!1;a.value instanceof Fd||(b="array"==fa(a.value)?!a.value.some(function(a){return a instanceof Fd}):!0);if(!b)throw new D(501);}m.eval=function(a){$d(this);if("in"==this.B)return ae(this,a);var b=a.entries.filter(function(a){return this.vc(H(a,this.I),this.value)!=this.Sa},this);return new G(b,a.o())};
m.bind=function(a){if(this.dc instanceof Fd){var b=this.dc.Ba();if(a.length<=b)throw new D(510);this.value=a[b]}else"array"==fa(this.dc)&&(this.value=this.dc.map(function(b){if(b instanceof Fd){var d=b.Ba();if(a.length<=d)throw new D(510);return a[b.Ba()]}return b}))};function ae(a,b){var c=B(a.value),d=function(a){return null===a?!1:c.has(a)!=this.Sa}.bind(a),e=b.entries.filter(function(a){return d(H(a,this.I))},a);return new G(e,b.o())}
m.toString=function(){return"value_pred("+this.I.j()+" "+this.B+(this.Sa?"(complement)":"")+" "+this.value+")"};m.jd=function(){$d(this);return null!==this.value&&("between"==this.B||"in"==this.B||"eq"==this.B||"gt"==this.B||"gte"==this.B||"lt"==this.B||"lte"==this.B)};
m.re=function(){var a=null;if("between"==this.B)a=new E(be(this,this.value[0]),be(this,this.value[1]),!1,!1);else{if("in"==this.B)return a=this.value.map(function(a){return new E(a,a,!1,!1)}),new qd(this.Sa?pd(a):a);a=be(this,this.value);a="eq"==this.B?new E(a,a,!1,!1):"gte"==this.B?new E(a,F,!1,!1):"gt"==this.B?new E(a,F,!0,!1):"lte"==this.B?new E(F,a,!1,!1):new E(F,a,!1,!0)}return new qd(this.Sa?id(a):[a])};function be(a,b){return 2==a.I.H()?b.getTime():b};function ce(a){this.ba=a;this.Vc=this.Fa=null}function de(a,b){null===a.Fa&&null!=a.u&&(a.Fa=ee(a.u));return a.Fa.get(b)||null}function ee(a){var b=x();Wd(a,function(a){b.set(a.V(),a)});return b}function ge(a,b){b.u&&(a.u=b.u.Nb());a.Vc=b}ce.prototype.bind=function(){return this};function he(a,b){var c=a.u;null!=c&&Wd(c,function(a){a instanceof Zd&&a.bind(b)})};function ie(a){ce.call(this,a)}r(ie,ce);function je(a){var b="";a.forEach(function(c,d){b+=c.I.j()+" ";b+=1==c.qb?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}ie.prototype.da=function(){return B(this.from)};ie.prototype.clone=function(){var a=new ie(this.ba);ge(a,this);this.f&&(a.f=this.f.slice());this.from&&(a.from=this.from.slice());a.W=this.W;a.K=this.K;this.M&&(a.M=this.M.slice());this.la&&(a.la=this.la.slice());this.Tb&&(a.Tb=this.Tb);this.Zb&&(a.Zb=this.Zb);a.$a=this.$a;return a};
ie.prototype.bind=function(a){ie.eb.bind.call(this,a);null!=this.Tb&&(this.W=a[this.Tb.Ba()]);null!=this.Zb&&(this.K=a[this.Zb.Ba()]);he(this,a);return this};function ke(a,b){this.Ga=a;this.aa=b}ke.prototype.Ya=g("Ga");ke.prototype.da=g("aa");function le(a){var b=B();a.forEach(function(a){a.da().forEach(b.add.bind(b))});return b};function me(a,b){this.global=a;this.Ma=a.b(jc);this.qd=b.map(function(a){return a.context});this.df=b.map(function(a){return a.fe});this.Jd=le(this.df);this.se=ne(this);this.bb=w()}function ne(a){return a.qd.some(function(a){return!(a instanceof ie)})?1:0}m=me.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.Ya().exec(b,h).then(function(b){c.push(b[0]);return a()})}return v()}var b=0==this.se?void 0:new dd(this.global,this.Jd),c=[],d=this.df.slice(),e=this.qd;return a().then(function(){this.ja=this.Ma.Fb(this.se,C(this.Jd),b);return this.ja.ka()}.bind(this)).then(function(){this.ce(c);return c}.bind(this),function(a){null!=b&&b.Kb();throw a;})};m.H=g("se");m.da=g("Jd");m.Pb=g("bb");m.V=function(){return ka(this)};m.ce=aa();
m.X=function(){var a=null;null!=this.ja&&(a=this.ja.X());return null===a?new z(!1,0,0,0,0):a};function oe(a,b){me.call(this,a,b);this.Jb=a.b(oc)}r(oe,me);oe.prototype.getPriority=l(0);oe.prototype.ce=function(a){this.qd.forEach(function(b,c){pe(this.Jb,b,a[c])},this)};function qe(a,b){this.c=a;this.Jb=a.b(oc);this.Ha=a.b(nc);this.fd=new Ac(a);this.fb=b;var c=a.b(pc),d=this.fb.map(function(a){return c.table(a.getName())});this.aa=B(d);this.bb=w()}m=qe.prototype;m.exec=function(){this.fd.update(this.fb);this.Lc();return v()};m.H=l(1);m.da=g("aa");m.Pb=g("bb");m.V=function(){return ka(this)};m.getPriority=l(1);m.Lc=function(){var a=re(this.Jb,this.aa);0!=a.length&&(a=new oe(this.c,a),se(this.Ha,a))};function te(a){this.c=a;this.Ma=a.b(jc);this.Ha=a.b(nc)}te.prototype.ae=function(a){a=new qe(this.c,a);se(this.Ha,a)};function L(a,b){this.ac=a;this.i=b;this.Va=x()}q("lf.backstore.FirebaseRawBackStore",L);L.prototype.bd=g("i");L.prototype.cd=function(){throw new D(351);};function ue(a,b){var c=w(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.ha}function ve(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=w();c?a.set(b,d):a.update(b,d);return e.ha}
L.prototype.Da=function(a){return ue(this.i,"@rev/R").then(function(a){this.Pa=a;return ue(this.i,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Va.set(d,b[d]),b[d]>c&&(c=b[d]);a.pa().forEach(function(a){this.Va.has(a.getName())||(b[a.getName()]=++c)},this);d=this.i.child("@table");return ve(d,b)}.bind(this))};
function we(a,b,c){var d=a.Va.get(b);return null!=d?function(){var a={},b=w();this.i.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.ha}.call(a).then(function(a){a["@rev"]={R:++this.Pa};return ve(this.i,a)}.bind(a)):v()}L.prototype.tc=function(a){return we(this,a,l(null)).then(function(){this.Va.delete(a);return ve(this.i.child("@table/"+a),null,!0)}.bind(this))};L.prototype.dropTable=L.prototype.tc;
L.prototype.qc=function(a,b,c){return we(this,a,function(a){var e=a.P;e[b]=c;return{R:this.Pa+1,T:a.T,P:e}}.bind(this))};L.prototype.addTableColumn=L.prototype.qc;L.prototype.uc=function(a,b){return we(this,a,function(a){var d=a.P;delete d[b];return{R:this.Pa+1,T:a.T,P:d}}.bind(this))};L.prototype.dropTableColumn=L.prototype.uc;L.prototype.Kc=function(a,b,c){return we(this,a,function(a){var e=a.P;e[c]=e[b];delete e[b];return{R:this.Pa+1,T:a.T,P:e}}.bind(this))};L.prototype.renameTableColumn=L.prototype.Kc;
L.prototype.yb=function(){throw new D(351);};L.prototype.createRow=L.prototype.yb;L.prototype.Bc=g("ac");L.prototype.getVersion=L.prototype.Bc;L.prototype.fc=function(a){var b=w();a=this.Va.get(a);this.i.orderByChild("T").equalTo(a).once("value",function(a){var d=[];a.forEach(function(a){d.push(a.val().P)});b.resolve(d)});return b.ha};L.prototype.dump=function(){var a={},b=Ub(this.Va).map(function(b){return this.fc(b).then(function(d){a[b]=d})}.bind(this));return cb(b).then(function(){return a})};
L.prototype.dump=L.prototype.dump;function xe(a,b,c){bc.call(this,b,c);this.i=a}r(xe,bc);xe.prototype.G=function(a){return this.i.zc(a)};
xe.prototype.sc=function(){if(0==this.vd)return this.O.resolve(),this.O.ha;var a=this.Oa.fb;if(0==a.size)this.O.resolve();else{var b=this.i.Pa+1;this.i.Pa=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var f=this.i.Va.get(e);a.va.forEach(function(a,d){c[d]={R:b,T:f,P:a.l}});a.ma.forEach(function(a,d){c[d]={R:b,T:f,P:a[1].l}});a.wa.forEach(function(a,b){c[b]=null})},this);this.i.i.update(c,function(c){null===c?this.O.resolve():(this.i.Pa=b-1,c=y(a).map(function(a){return ye(this.i,a.getName())},this),
cb(c).then(this.O.reject.bind(this.O),this.O.reject.bind(this.O)))}.bind(this))}return this.O.ha};function ze(){this.Aa=x()}function Ae(a,b){if(0==b.length)return y(a.Aa);var c=[];b.forEach(function(a){a=this.Aa.get(a)||null;null===a||c.push(a)},a);return c}ze.prototype.getData=g("Aa");ze.prototype.get=function(a){return v(Ae(this,a))};function Be(a,b){b.forEach(function(a){this.Aa.set(a.id(),a)},a)}ze.prototype.put=function(a){Be(this,a);return v()};function Ce(a,b){0==b.length||b.length==a.Aa.size?a.Aa.clear():b.forEach(function(a){this.Aa.delete(a)},a)}
ze.prototype.remove=function(a){Ce(this,a);return v()};function De(a){return 0==a.Aa.size?0:Ub(a.Aa).reduce(function(a,c){return a>c?a:c},0)};function Ee(a,b){this.g=a;this.Af=b;this.Jc=x();this.Pa=-1;this.L=x();this.Va=x();this.Gd=null}m=Ee.prototype;
m.Da=function(a){this.i=this.Af.child(this.g.name());var b=a||function(){return v()};return ue(this.i,"@db/version").then(function(a){return null===a?ve(this.i,Fe(this),!0).then(function(){var a=new L(0,this.i);return b(a)}.bind(this)).then(function(){return this.Da()}.bind(this)):a==this.g.version()?ue(this.i,"@rev/R").then(function(a){this.Pa=a;return ue(this.i,"@table")}.bind(this)).then(function(a){for(var b in a)this.Va.set(b,a[b]);a=this.g.pa().map(function(a){return ye(this,a.getName())},this);
return cb(a)}.bind(this)).then(function(){Ge(this);He(this);return v()}.bind(this)):this.de(a,b).then(function(){return this.Da()}.bind(this))}.bind(this))};m.de=function(a,b){var c=new L(a,this.i);return c.Da(this.g).then(function(){return v()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.i.child("@db");return ve(a,{version:this.g.version()},!0)}.bind(this))};
function He(a){a.i.off();a.i.on("child_removed",a.wg.bind(a));a.Hd&&(a.Hd.off(),a.Jc.clear());a.Hd=a.i.orderByChild("R").startAt(a.Pa+1);a.Hd.on("value",a.ae.bind(a))}function Ge(a){Wb=y(a.L).map(function(a){return De(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.wg=function(a){var b=a.val(),c=this.Jc.get(b.T)||null;null===c&&(c=B(),this.Jc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.ae=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Pa&&(this.Pa=b,a=Ie(this,a),a.forEach(function(a){var b=this.L.get(a.getName()),e=Ub(a.wa);0<e.length&&Ce(b,e);var f=y(a.va);a.ma.forEach(function(a){f.push(a[1])});Be(b,f)},this),0<a.length&&this.Fc(a),He(this))};
function Ie(a,b){var c=B(),d=x();a.Va.forEach(function(a,b){var h=this.L.get(b),k=new bd(b);if(this.Jc.has(a)){var n=C(this.Jc.get(a));n.forEach(function(a){c.add(a)});Ae(h,n).forEach(function(a){k.delete(a)})}d.set(a,k)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){var h=a.val();a=d.get(h.T);var k=this.L.get(a.getName()),h=this.g.table(a.getName()).kb({id:b,value:h.P});k.getData().has(b)?a.modify([Ae(k,[b])[0],h]):a.add(h)}}}.bind(a));return y(d).filter(function(a){return!a.jg()})}
function ye(a,b){var c=w(),d=a.Va.get(b),e=a.g.table(b);a.i.orderByChild("T").equalTo(d).once("value",function(a){var d=new ze,k=[];a.forEach(function(a){k.push(e.kb({id:parseInt(a.key(),10),value:a.val().P}))});Be(d,k);this.L.set(b,d);c.resolve()}.bind(a));return c.ha}function Fe(a){var b={};b["@db"]={version:a.g.version()};b["@rev"]={R:1};a.Pa=1;b["@table"]={};a.g.pa().forEach(function(a,d){var e=a.getName();b["@table"][e]=d;this.L.set(e,new ze);this.Va.set(e,d)},a);return b}
m.Fb=function(a,b,c){return new xe(this,a,c)};m.zc=function(a){var b=this.L.get(a)||null;if(null!==b)return b;throw new D(101,a);};m.close=aa();m.subscribe=ba("Gd");m.Fc=function(a){null!=this.Gd&&this.Gd(a)};function M(a,b,c,d){this.i=b;this.ja=c;this.ac=a;this.Tc=d}q("lf.backstore.IndexedDBRawBackStore",M);M.prototype.bd=g("i");M.prototype.getRawDBInstance=M.prototype.bd;M.prototype.cd=g("ja");M.prototype.getRawTransaction=M.prototype.cd;M.prototype.tc=function(a){return new u(function(b,c){try{this.i.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};M.prototype.dropTable=M.prototype.tc;
function Je(a,b,c,d){return new u(function(a,f){var h;try{var k=this.ja.objectStore(b);h=k.openCursor()}catch(n){f(n);return}h.onsuccess=function(){var b=h.result;b?(c(b),b.continue()):(d(k),a())};h.onerror=f},a)}function Ke(a){var b=null;return b=a instanceof ArrayBuffer?Zb(a):a instanceof Date?a.getTime():a}
function Le(a,b,c){function d(a){var b=vc(a.value),d=b.l,e;for(e in d){var A=Xb(d[e]);c(A);d[e]=A.Ia()}a.update(b.Ia())}function e(a){var b=Xb(a.value);c(b);a.update(b.Ia())}return Je(a,b,a.Tc?d:e,aa())}M.prototype.qc=function(a,b,c){var d=Ke(c);return Le(this,a,function(a){a.l[b]=d})};M.prototype.addTableColumn=M.prototype.qc;M.prototype.uc=function(a,b){return Le(this,a,function(a){delete a.l[b]})};M.prototype.dropTableColumn=M.prototype.uc;
M.prototype.Kc=function(a,b,c){return Le(this,a,function(a){a.l[c]=a.l[b];delete a.l[b]})};M.prototype.renameTableColumn=M.prototype.Kc;function Me(a,b){var c=[];return new u(function(a,e){var f;try{f=this.ja.objectStore(b).openCursor()}catch(h){e(h);return}f.onsuccess=function(){var b=f.result;if(b){if(this.Tc){var e=vc(b.value).l,n;for(n in e)c.push(e[n])}else c.push(b.value);b.continue()}else a(c)}.bind(this);f.onerror=e},a)}M.prototype.yb=function(a){var b={},c;for(c in a)b[c]=Ke(a[c]);return Yb(b)};
M.prototype.createRow=M.prototype.yb;M.prototype.Bc=g("ac");M.prototype.getVersion=M.prototype.Bc;M.prototype.dump=function(){for(var a=this.i.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.fc(d))}return cb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};M.prototype.dump=M.prototype.dump;M.prototype.fc=function(a){return Me(this,a).then(function(a){return a.map(function(a){return a.value})})};function Ne(a,b){this.Y=a;this.Gb=b}Ne.prototype.get=function(a){if(0==a.length)return null!=this.Y.getAll?Oe(this):Pe(this);a=a.map(function(a){return new u(function(c,d){var e;try{e=this.Y.get(a)}catch(f){d(f);return}e.onerror=d;e.onsuccess=function(a){c(this.Gb(a.target.result))}.bind(this)},this)},this);return cb(a)};
function Pe(a){return new u(function(a,c){var d=[],e;try{e=this.Y.openCursor()}catch(f){c(f);return}e.onerror=c;e.onsuccess=function(){var c=e.result;c?(d.push(this.Gb(c.value)),c.continue()):a(d)}.bind(this)},a)}function Oe(a){return new u(function(a,c){var d;try{d=this.Y.getAll()}catch(e){c(e);return}d.onerror=c;d.onsuccess=function(){var c=d.result.map(function(a){return this.Gb(a)},this);a(c)}.bind(this)},a)}
Ne.prototype.Ub=function(a){return new u(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};Ne.prototype.put=function(a){if(0==a.length)return v();a=a.map(function(a){return this.Ub(function(){return this.Y.put(a.Ia())}.bind(this))},this);return cb(a)};
Ne.prototype.remove=function(a){return new u(function(b,c){var d=this.Y.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Ub(function(){return this.Y.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Ub(function(){return this.Y.delete(a)}.bind(this))},this);cb(d).then(b,c)}.bind(this);d.onerror=c},this)};function Qe(a,b,c,d,e){bc.call(this,c,e);this.c=a;this.ja=b;this.Tc=d;this.ja.oncomplete=this.O.resolve.bind(this.O);this.ja.onabort=this.O.reject.bind(this.O)}r(Qe,bc);Qe.prototype.G=function(a,b,c){return this.Tc?(c=null!=c?c:0,a=this.ja.objectStore(a),new wc(a,b,0==c?qa(yc,this.c):zc)):new Ne(this.ja.objectStore(a),b)};Qe.prototype.sc=function(){return this.O.ha};function Re(a,b){this.c=a;this.g=b;this.Dd=b.ef().Rf||!1}m=Re.prototype;
m.Da=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new D(352);var c=a||function(){return v()};return new u(function(a,e){var f;try{f=b.open(this.g.name(),this.g.version())}catch(h){e(h);return}f.onerror=function(a){a=a.target.error;e(new D(361,a.name,a.message))};f.onupgradeneeded=function(a){Se(this,c,a).then(aa(),e)}.bind(this);f.onsuccess=function(b){this.i=b.target.result;this.le().then(function(b){Wb=b+1;a(this.i)}.bind(this))}.bind(this)},
this)};function Se(a,b,c){var d=c.target.result;c=new M(c.oldVersion,d,c.target.transaction,a.Dd);Te(d);a.g.pa().forEach(qa(a.Kf,d),a);return b(c)}function Te(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(c){}})}
m.Kf=function(a,b){a.objectStoreNames.contains(b.getName())||a.createObjectStore(b.getName(),{keyPath:"id"});b.Eb()&&(b.Ca().forEach(function(b){Ue(a,b.j())},this),Ue(a,Ve(b)))};function Ue(a,b){a.objectStoreNames.contains(b)||a.createObjectStore(b,{keyPath:"id"})}m.Fb=function(a,b,c){b=this.i.transaction(We(b),0==a?"readonly":"readwrite");return new Qe(this.c,b,a,this.Dd,c)};
function We(a){var b=B();a.forEach(function(a){b.add(a.getName());a.Eb()&&(a.Ca().forEach(function(a){b.add(a.j())}),b.add(Ve(a)))});return C(b)}
m.le=function(a){function b(){if(0==d.length)return v();var a=d.shift();return c(a).then(b)}function c(b){return new u(function(c,d){var O;try{O=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(da){d(da);return}O.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};O.onerror=function(){c(f)}})}var d=this.g.pa().map(function(a){return a.getName()}),e=this.i,f=0,h=function(a){return this.Dd?(a=vc(a.value),Object.keys(a.l).reduce(function(a,b){return Math.max(a,b)},
0)):a.key}.bind(this);return new u(function(a){b().then(function(){a(f)})})};m.close=function(){this.i.close()};m.zc=function(){throw new D(511);};m.subscribe=aa();m.Fc=aa();function Xe(a,b,c){bc.call(this,b,c);this.Y=a;0==b&&this.O.resolve()}r(Xe,bc);Xe.prototype.G=function(a){return this.Y.zc(a)};Xe.prototype.sc=function(){this.O.resolve();return this.O.ha};function Ye(a){this.g=a;this.L=x()}m=Ye.prototype;m.Da=function(){this.g.pa().forEach(this.eg,this);return v()};m.zc=function(a){var b=this.L.get(a)||null;if(null===b)throw new D(101,a);return b};m.Fb=function(a,b,c){return new Xe(this,a,c)};function Ze(a,b){if(!a.L.has(b)){var c=new ze;a.L.set(b,c)}}m.eg=function(a){Ze(this,a.getName());a.Eb()&&(a.Ca().forEach(function(a){Ze(this,a.j())},this),Ze(this,Ve(a)))};m.close=aa();m.subscribe=aa();m.Fc=aa();function $e(a){Ye.call(this,a);this.nd=null}r($e,Ye);$e.prototype.subscribe=function(a){null===this.nd&&(this.nd=a)};$e.prototype.Fc=function(a){null===this.nd||this.nd(a)};function af(a,b,c){this.ja=a;this.w='"'+b+'"';this.Gb=c}af.prototype.get=function(a){var b=this.Gb;return bf(this.ja,"SELECT id, value FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var d=a.rows.length,e=Array(d),f=0;f<d;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
af.prototype.put=function(a){if(0==a.length)return v();var b="INSERT OR REPLACE INTO "+this.w+"(id, value) VALUES (?, ?)";a.forEach(function(a){bf(this.ja,b,[a.id(),JSON.stringify(a.l)])},this);return v()};af.prototype.remove=function(a){bf(this.ja,"DELETE FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return v()};function cf(a,b,c){bc.call(this,b,c);this.i=a;this.L=x();this.Kd=[]}r(cf,bc);function df(a){return a.replace(".","__d__").replace("#","__s__")}cf.prototype.G=function(a,b){var c=this.L.get(a)||null;null===c&&(c=new af(this,df(a),b),this.L.set(a,c));return c};function bf(a,b,c,d){var e=w();a.Kd.push({Lg:b,Ag:c,transform:d,O:e});return e.ha}
cf.prototype.sc=function(){var a=null,b=this.O.reject.bind(this.O),c=function(a,b){this.O.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var k=h;null!=a.transform&&null!=h&&(k=a.transform(h));d.push(k);a.O.resolve(k)}0<this.Kd.length?(a=k=this.Kd.shift(),b.executeSql(k.Lg,k.Ag,e,c)):this.O.resolve(d)}.bind(this);0==this.vd?this.i.readTransaction(e,b):this.i.transaction(e,b);return this.O.ha};function N(a,b,c){this.i=c;this.c=a;this.ac=b}q("lf.backstore.WebSqlRawBackStore",N);N.prototype.bd=g("i");N.prototype.getRawDBInstance=N.prototype.bd;N.prototype.cd=function(){throw new D(356);};N.prototype.getRawTransaction=N.prototype.cd;function ef(a){return new cf(a.i,1,new dd(a.c,B()))}N.prototype.tc=function(a){var b=ef(this);bf(b,"DROP TABLE "+a,[]);return b.ka()};N.prototype.dropTable=N.prototype.tc;
N.prototype.fc=function(a){var b=ef(this);bf(b,"SELECT id, value FROM "+a,[]);return b.ka().then(function(a){for(var b=a[0].rows.length,e=Array(b),f=0;f<b;++f)e[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return v(e)})};function ff(a,b,c){var d=ef(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.fc(b).then(function(a){a.forEach(function(a){a=c(a);bf(d,e,[JSON.stringify(a.value),a.id])});return d.ka()})}
N.prototype.qc=function(a,b,c){var d=Ke(c);return ff(this,a,function(a){a.value[b]=d;return a})};N.prototype.addTableColumn=N.prototype.qc;N.prototype.uc=function(a,b){return ff(this,a,function(a){delete a.value[b];return a})};N.prototype.dropTableColumn=N.prototype.uc;N.prototype.Kc=function(a,b,c){return ff(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};N.prototype.renameTableColumn=N.prototype.Kc;N.prototype.yb=function(a){var b={},c;for(c in a)b[c]=Ke(a[c]);return Yb(b)};
N.prototype.createRow=N.prototype.yb;N.prototype.Bc=g("ac");N.prototype.getVersion=N.prototype.Bc;function gf(a){bf(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=Array(a.rows.length),d=0;d<c.length;++d)c[d]=a.rows.item(d).tbl_name;return c})}
N.prototype.dump=function(){var a=w(),b=ef(this);gf(b);var c={};b.ka().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.fc(a).then(function(b){c[a]=b})},this);cb(b).then(function(){a.resolve(c)})}.bind(this));return a.ha};N.prototype.dump=N.prototype.dump;function hf(a,b,c){this.c=a;this.g=b;this.Kg=c||1}m=hf.prototype;m.Da=function(a){if(null==window.openDatabase)throw new D(353);var b=a||function(){return v()};return new u(function(a,d){var e=window.openDatabase(this.g.name(),"",this.g.name(),this.Kg);if(null!=e)this.i=e,jf(this,b).then(function(){this.le().then(a,d)}.bind(this),function(a){if(a instanceof D)throw a;throw new D(354,a.message);});else throw new D(354);},this)};
function jf(a,b){var c=w(),d=new cf(a.i,1,new dd(a.c,B()));bf(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);bf(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ka().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.g.version()?this.de(b,d).then(c.resolve.bind(c)):d>this.g.version()?c.reject(new D(108)):c.resolve()}.bind(a),c.reject.bind(c));return c.ha}m.Fb=function(a,b,c){if(null!=this.i)return new cf(this.i,a,c);throw new D(2);};m.close=aa();
m.zc=function(){throw new D(512);};m.subscribe=function(){throw new D(355);};m.Fc=function(){throw new D(355);};m.de=function(a,b){return kf(this).then(function(){return a(new N(this.c,b,this.i))}.bind(this))};
function kf(a){var b=a.g.pa(),c=new cf(a.i,1,new dd(a.c,B())),d=new cf(a.i,1,new dd(a.c,B()));bf(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.g.version()]);gf(c);return c.ka().then(function(a){var c=a[1];c.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){bf(d,"DROP TABLE "+('"'+a+'"'),[])});var h=[],k=[],n=[];b.map(function(a){-1==c.indexOf(a.getName())&&h.push(a.getName());a.Eb&&(a.Ca().forEach(function(a){a=df(a.j());h.push(a);k.push(a)}),a=df(Ve(a)),h.push(a),n.push(a))});
h.forEach(function(a){bf(d,"CREATE TABLE "+('"'+a+'"')+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return d.ka()})}m.le=function(){var a=0,b=w(),c=function(b){var c=new cf(this.i,0);bf(c,"SELECT MAX(id) FROM "+('"'+b+'"'),[]);return c.ka().then(function(b){b=b[0].rows.item(0)["MAX(id)"];a=Math.max(b,a)})}.bind(this),d=this.g.pa().map(function(a){return c(a.getName())});cb(d).then(function(){Wb=a+1;b.resolve()},function(a){b.reject(a)});return b.ha};function mf(a){this.$=x();this.$b=x();a.pa().forEach(function(a){this.$b.set(a.getName(),B())},this)}m=mf.prototype;m.set=function(a,b){this.$.set(b.id(),b);this.$b.get(a).add(b.id())};m.Xb=function(a,b){var c=this.$b.get(a);b.forEach(function(a){this.$.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.$.get(a)||null};function nf(a,b){return b.map(function(a){return this.get(a)},a)}
m.Ra=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.$b.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.$.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.$.get(b),d.push(c));return d};m.remove=function(a,b){this.$.delete(b);this.$b.get(a).delete(b)};m.Ug=function(a){return null!=a?this.$b.get(a).size:this.$.size};m.clear=function(){this.$.clear();this.$b.clear()};function of(a,b,c){var d=0,e=a.length;for(c=c||pf;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function pf(a,b){return a-b}function qf(a,b,c){c=of(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function rf(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(p(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function sf(){this.ia=0;this.Ec=null}sf.prototype.add=function(a,b){this.ia+=b;this.Ec=null===this.Ec?a:a>this.Ec?a:this.Ec};sf.prototype.remove=function(a,b){this.ia-=b};sf.prototype.clear=function(){this.ia=0};function tf(a,b){a.clear();b.forEach(function(a){this.ia+=a.ia},a)};function uf(a,b,c,d){this.w=a;this.Z=b;this.vf=c;this.ya=new sf;if(d){a=511;a*=a*a;if(d.length>=a)throw new D(6,a);d=vf(this,d);this.ta=d=wf(d)}else this.clear()}var xf=[];m=uf.prototype;m.getName=g("w");m.toString=function(){return this.ta.toString()};m.add=function(a,b){this.ta=this.ta.Cb(a,b)};m.set=function(a,b){this.ta=this.ta.Cb(a,b,!0)};m.remove=function(a,b){this.ta=this.ta.remove(a,b)};m.get=function(a){return this.ta.get(a)};
m.Xc=function(a){if(null==a)return this.X().ia;if(a instanceof E){if(jd(a))return this.X().ia;if(nd(a))return this.get(a.from).length}return this.Ra([a]).length};m.X=g("ya");m.Rd=function(a,b,c,d){c=Array(a);this.ta.fill({offset:b?this.ya.ia-a-d:d,count:a,oe:0},c);return b?c.reverse():c};
m.Ra=function(a,b,c,d){var e=yf(this.ta).a[0];if(!p(e)||0==c)return xf;b=b||!1;c=null!=c?Math.min(c,this.ya.ia):this.ya.ia;d=d||0;var f=Math.min(Math.max(this.ya.ia-d,0),c);if(0==f)return xf;if(!p(a)||1==a.length&&a[0]instanceof E&&jd(a[0]))return this.Rd(f,b,c,d);a=this.Z.rf(a);var h=Array(b?this.ya.ia:f),k={count:0,W:h.length,reverse:b,K:d},n=1<this.ib().Wd();a.forEach(function(a){for(var b=this.Z.rd(a),b=this.Z.Ud(a)?e:b[0],b=this.ta.Yf(b),c=0;null!=b&&k.count<k.W;){if(n){for(var d=b,f=a,ac=k,
yb=h,Pc=d.s.ib(),fe=-1,Ja=0;Ja<d.a.length;++Ja)if(Pc.Db(d.a[Ja],f)){fe=Ja;break}if(-1!=fe)for(Ja=fe;Ja<d.a.length&&ac.count<ac.W;++Ja)Pc.Db(d.a[Ja],f)&&zf(d,ac,yb,Ja)}else b.Ra(a,k,h);0!=k.K||b.hd(a)?c=0:c++;b=2==c?null:b.next()}},this);h.length>k.count&&h.splice(k.count,h.length-k.count);return b?rf(h,b,c,d):h};m.clear=function(){this.ta=Af(this);this.ya.clear()};m.jb=function(a){return this.ta.jb(a)};m.min=function(){return this.Ib(this.Z.min.bind(this.Z))};m.max=function(){return this.Ib(this.Z.max.bind(this.Z))};
function Bf(a,b,c){if(!a.Z.Ld(b.a[c]))if(1<b.a[c].length){if(null===b.a[c][0])return null}else return null;return[b.a[c],a.vf?[b.A[c]]:b.A[c]]}m.Ib=function(a){var b;a:{b=yf(this.ta);var c=0;do if(c>=b.a.length)b=b.xa,c=0;else{var d=Bf(this,b,c);if(null!==d){b=d;break a}c++}while(null!==b);b=null}a:{c=Cf(this.ta);d=c.a.length-1;do if(0>d)c=c.rb,d=0;else{var e=Bf(this,c,d);if(null!==e){c=e;break a}d--}while(null!==c);c=null}return null===b||null===c?null:1==a(b[0],c[0])?b:c};m.Ka=g("vf");m.ib=g("Z");
m.Na=function(a,b){return null!=a?0==this.Z.compare(a,b):!1};m.Ia=function(){for(var a=[],b=yf(this.ta);b;)a.push(new Vb(b.ra,[b.a,b.A])),b=b.xa;return a};function Df(a,b,c,d){a=new uf(b,a,c);d=Ef(d,a);a.ta=d;return a}function Ff(a,b){this.ra=a;this.s=b;this.mb=0;this.xa=this.rb=this.D=null;this.a=[];this.A=[];this.h=[];this.Yf=1==b.ib().Wd()?this.Ke:this.Je}function Af(a){return new Ff(Wb++,a)}function P(a){return 0==a.mb}m=Ff.prototype;m.next=g("xa");
function Gf(a){function b(a){return null!=a?a.ra.toString():"_"}var c=a.ra+"["+a.a.join("|")+"]",d=a.h.map(function(a){return a.ra}).join("|"),e=a.A.join("/"),f=b(a.rb)+"{",f=P(a)?f+e:f+d,f=f+"}"+b(a.D);a.xa&&(a=Gf(a.xa),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=Gf(this),a=a+(b[0]+"\n"+b[1]+"\n");this.h.length&&(a+=this.h[0].toString());return a};function yf(a){return P(a)?a:yf(a.h[0])}function Cf(a){return P(a)?a:Cf(a.h[a.h.length-1])}
function Hf(a,b){b&&(b.rb=a);a&&(a.xa=b)}function vf(a,b){for(var c=b.length,d=0,e=Af(a),f=e;0<c;){var h=768<=c?511:257<=c&&511>=c?c:257,k=b.slice(d,d+h);e.a=k.map(function(a){return a.key});e.A=k.map(function(a){return a.value});d+=h;c-=h;0<c&&(h=Af(e.s),Hf(e,h),e=h)}return f}function If(a){var b=a[0],c=Af(b.s);c.mb=b.mb+1;c.h=a;for(b=0;b<a.length;++b)a[b].D=c,0<b&&c.a.push(a[b].a[0]);return c}
function wf(a){var b=a,c=[];do c.push(b),b=b.xa;while(b);if(512>=c.length)b=If(c);else{var d=c.length,e=0,b=Af(a.s);for(b.mb=a.mb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=If(f);h.D=b;b.h.length&&(b.a.push(f[0].a[0]),Hf(b.h[b.h.length-1],h));b.h.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=Jf(this,a);if(P(this)){var c=xf;this.s.Na(this.a[b],a)&&(c=c.concat(this.A[b]));return c}b=this.s.Na(this.a[b],a)?b+1:b;return this.h[b].get(a)};
m.jb=function(a){var b=Jf(this,a);return this.s.Na(this.a[b],a)?!0:P(this)?!1:this.h[b].jb(a)};m.remove=function(a,b){Kf(this,a,-1,b);if(null===this.D){var c=this;1==this.h.length&&(c=this.h[0],c.D=null);return c}return this};function Lf(a){return P(a)?a.a[0]:Lf(a.h[0])}function Mf(a){a.a=[];for(var b=1;b<a.h.length;++b)a.a.push(Lf(a.h[b]))}
function Kf(a,b,c,d){var e=Jf(a,b),f=P(a);if(!f){var h=a.s.Na(a.a[e],b)?e+1:e;if(Kf(a.h[h],b,h,d))Mf(a);else return!1}else if(!a.s.Na(a.a[e],b))return!1;if(a.a.length>e&&a.s.Na(a.a[e],b)){if(p(d)&&!a.s.Ka()&&f&&(h=a.A[e],d=of(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.s.X().remove(b,1),a.A[e].length))return!1;a.a.splice(e,1);f&&(f=a.s.Ka()?1:a.A[e].length,a.A.splice(e,1),a.s.X().remove(b,f))}if(256>a.a.length&&null!==a.D){a:{b=null;if(a.xa&&256<a.xa.a.length)b=a.xa,e=d=0,f=a.a.length+1;else if(a.rb&&
256<a.rb.a.length)b=a.rb,d=a.rb.a.length-1,e=P(a)?d:d+1,f=0;else{b=!1;break a}a.a.splice(f,0,b.a[d]);b.a.splice(d,1);d=P(a)?a.A:a.h;h=null;P(a)?h=b.A:(h=b.h,h[e].D=a);d.splice(f,0,h[e]);h.splice(e,1);P(b)||(Mf(b),Mf(a));b=!0}b||Nf(a,c)}return!0}
function Nf(a,b){var c,d,e;a.xa&&511>a.xa.a.length?(c=a.xa,e=d=0):a.rb&&(c=a.rb,d=c.a.length,e=P(c)?c.A.length:c.h.length);d=[d,0].concat(a.a);Array.prototype.splice.apply(c.a,d);d=null;P(a)?d=a.A:(d=a.h,d.forEach(function(a){a.D=c}));d=[e,0].concat(d);Array.prototype.splice.apply(P(c)?c.A:c.h,d);Hf(a.rb,a.xa);P(c)||Mf(c);-1!=b&&(a.D.a.splice(b,1),a.D.h.splice(b,1))}
m.Cb=function(a,b,c){var d=Jf(this,a);if(P(this)){if(this.s.Na(this.a[d],a)){if(c)this.s.X().remove(a,this.s.Ka()?1:this.A[d].length),this.A[d]=this.s.Ka()?b:[b];else{if(this.s.Ka())throw new D(201);if(!qf(this.A[d],b))throw new D(109);}this.s.X().add(a,1);return this}this.a.splice(d,0,a);this.A.splice(d,0,this.s.Ka()?b:[b]);this.s.X().add(a,1);512==this.a.length?(d=Af(this.s),a=Af(this.s),a.mb=1,a.a=[this.a[256]],a.h=[this,d],a.D=this.D,this.D=a,d.a=this.a.splice(256),d.A=this.A.splice(256),d.D=
a,Hf(d,this.xa),Hf(this,d),d=a):d=this;return d}d=this.s.Na(this.a[d],a)?d+1:d;a=this.h[d].Cb(a,b,c);P(a)||1!=a.a.length||(this.a.splice(d,0,a.a[0]),a.h[1].D=this,a.h[0].D=this,this.h.splice(d,1,a.h[1]),this.h.splice(d,0,a.h[0]));return 512==this.a.length?Of(this):this};function Of(a){var b=Af(a.s),c=Af(a.s);b.D=a.D;b.mb=a.mb+1;b.a=[a.a[256]];b.h=[a,c];a.a.splice(256,1);c.D=b;c.mb=a.mb;c.a=a.a.splice(256);c.h=a.h.splice(257);c.h.forEach(function(a){a.D=c});a.D=b;Hf(c,a.xa);Hf(a,c);return b}
function Jf(a,b){for(var c=0,d=a.a.length,e=a.s.ib();c<d;){var f=c+d>>1;-1==e.compare(a.a[f],b)?c=f+1:d=f}return c}m.Ke=function(a){if(!P(this)){var b=Jf(this,a);this.s.Na(this.a[b],a)&&b++;return this.h[b].Ke(a)}return this};m.Je=function(a){if(!P(this)){var b=Jf(this,a);this.s.Na(this.a[b],a)&&(a.some(function(a){return a==F})||b++);return this.h[b].Je(a)}return this};
m.Ra=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.s.ib(),f=0,h=this.a.length-1,k=this.a,n=d(e.xb(k[f],a)),A=d(e.xb(k[h],a));if(1!=n&&(-1!=n||-1!=A)){var O=function(a,b){var c=a+b>>1;return c==a?c+1:c},da=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.xb(k[b],a));if(0==h)return b;if(1==h)return-1;h=O(b,c);if(h==c)return 0==f?c:-1;var n=d(e.xb(k[h],a));return 0==n?da(b,h,n):-1==n?da(h+1,c,f):da(b+1,h,n)},xb=function(b,c){if(b>=c)return b;var f=d(e.xb(k[c],a));if(0==f)return c;
if(-1==f)return b;f=O(b,c);if(f==c)return b;var h=d(e.xb(k[f],a));return 0==h?xb(f,c):1==h?xb(b,f-1):-1};0!=n&&(f=da(f+1,h,A));-1!=f&&(h=xb(f,h),-1!=h&&h>=f&&Pf(this,b,c,f,h+1))}};function zf(a,b,c,d){if(a.s.Ka())!b.reverse&&b.K?b.K--:c[b.count++]=a.A[d];else for(var e=0;e<a.A[d].length&&b.count<c.length;++e)!b.reverse&&b.K?b.K--:c[b.count++]=a.A[d][e]}function Pf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.W));++d)zf(a,b,c,d)}
m.fill=function(a,b){if(P(this))for(var c=0;c<this.A.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.s.Ka()?1:this.A[c].length,0>a.offset)for(var d=this.A[c].length+a.offset;d<this.A[c].length&&0<a.count;++d)b[a.oe++]=this.A[c][d],a.count--}else if(this.s.Ka())b[a.oe++]=this.A[c],a.count--;else for(d=0;d<this.A[c].length&&0<a.count;++d)b[a.oe++]=this.A[c][d],a.count--;else for(c=0;c<this.h.length&&0<a.count;++c)this.h[c].fill(a,b)};
function Ef(a,b){for(var c=b.X(),d=a.map(function(a){var d=new Ff(a.id(),b);d.a=a.l[0];d.A=a.l[1];d.a.forEach(function(a,e){c.add(a,b.Ka()?1:d.A[e].length)});return d}),e=0;e<d.length-1;++e)Hf(d[e],d[e+1]);return 1<d.length?wf(d[0]):d[0]}m.hd=function(a){return this.s.ib().hd(this.a[0],a)};function Qf(a){this.Wc=0==a?Rf:Sf;this.Zd=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.ee=0==a?Tf:Uf}function Sf(a,b){return a>b?1:a<b?-1:0}function Rf(a,b){return Sf(b,a)}function Uf(a,b){return od(a,b)}function Tf(a,b){return od(b,a)}m=Qf.prototype;m.xb=function(a,b){var c=this.Zd(b),d=[c.from==F,c.m==F];if(!d[0]){var e=this.Wc(a,c.from);d[0]=c.ea?1==e:-1!=e}d[1]||(e=this.Wc(a,c.m),d[1]=c.oa?-1==e:1!=e);return d};m.compare=function(a,b){return this.Wc(a,b)};
m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Db=function(a,b){var c=this.xb(a,b);return c[0]&&c[1]};m.hd=function(a,b){return this.Db(a,b)};m.rf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.ee(a,c)}.bind(this))};m.Ud=function(a){return this.Zd(a).from==F};m.rd=function(a){a=this.Zd(a);return[a.from,a.m]};m.Ld=function(a){return null!==a};m.Wd=l(1);
m.toString=function(){return this.compare==Rf?"SimpleComparator_DESC":"SimpleComparator_ASC"};function Vf(a){Qf.call(this,a);this.Wc=0==a?Xf:Yf}r(Vf,Qf);function Yf(a,b){return null===a?null===b?0:-1:null===b?1:Sf(a,b)}function Xf(a,b){return Yf(b,a)}Vf.prototype.Db=function(a,b){return null===a?jd(b):Vf.eb.Db.call(this,a,b)};Vf.prototype.Ib=function(a,b){return null===a?null===b?0:-1:null===b?1:null};Vf.prototype.min=function(a,b){var c=this.Ib(a,b);null===c&&(c=Vf.eb.min.call(this,a,b));return c};
Vf.prototype.max=function(a,b){var c=this.Ib(a,b);null===c&&(c=Vf.eb.max.call(this,a,b));return c};function Zf(a){this.qa=a.map(function(a){return new Qf(a)})}function $f(a,b,c,d){for(var e=0,f=0;f<a.qa.length&&0==e;++f)e=d(a.qa[f],b[f],c[f]);return e}m=Zf.prototype;m.compare=function(a,b){return $f(this,a,b,function(a,b,e){return b==F||e==F?0:a.compare(b,e)})};m.min=function(a,b){return $f(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return $f(this,a,b,function(a,b,e){return a.max(b,e)})};
m.xb=function(a,b){for(var c=[!0,!0],d=0;d<this.qa.length&&(c[0]||c[1]);++d){var e=this.qa[d].xb(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Db=function(a,b){for(var c=!0,d=0;d<this.qa.length&&c;++d)c=this.qa[d].Db(a[d],b[d]);return c};m.hd=function(a,b){return this.qa[0].Db(a[0],b[0])};
m.rf=function(a){var b=a.filter(function(a){return a.every(ga)});a=Array(this.qa.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.qa[b].ee(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,h=0;h<this.qa.length&&0==c;++h)c=this.qa[h].ee(a[h],b[h]);return c}.bind(this))};m.Ud=function(a){return this.qa[0].Ud(a[0])};
m.rd=function(a){var b=a.map(function(a,b){return this.qa[b].rd(a)[0]},this);a=a.map(function(a,b){return this.qa[b].rd(a)[1]},this);return[b,a]};m.Ld=function(a){return a.every(function(a,c){return this.qa[c].Ld(a)},this)};m.Wd=function(){return this.qa.length};function ag(a){Zf.call(this,a);this.qa=a.map(function(a){return new Vf(a)})}r(ag,Zf);function bg(a){if(1==a.f.length)return new Qf(a.f[0].qb);var b=a.f.map(function(a){return a.qb});return a.f.some(function(a){return a.ba.ic()})?new ag(b):new Zf(b)};function cg(a){this.fa=a;this.ob=B();this.Nc=new sf;this.ya=new sf}m=cg.prototype;m.getName=function(){return this.fa.getName()};m.add=function(a,b){null===a?(this.ob.add(b),this.Nc.add(a,1)):this.fa.add(a,b)};m.set=function(a,b){null===a?(this.ob.clear(),this.Nc.clear(),this.add(a,b)):this.fa.set(a,b)};m.remove=function(a,b){null===a?b?(this.ob.delete(b),this.Nc.remove(a,1)):(this.ob.clear(),this.Nc.clear()):this.fa.remove(a,b)};m.get=function(a){return null===a?C(this.ob):this.fa.get(a)};m.Xc=function(a){return this.fa.Xc(a)};
m.X=function(){tf(this.ya,[this.fa.X(),this.Nc]);return this.ya};m.Ra=function(a,b,c,d){b=this.fa.Ra(a,b,c,d);return null!=a?b:b.concat(C(this.ob))};m.clear=function(){this.ob.clear();this.fa.clear()};m.jb=function(a){return null===a?0!=this.ob.size:this.fa.jb(a)};m.min=function(){return this.fa.min()};m.max=function(){return this.fa.max()};m.Ia=function(){return[new Vb(-2,C(this.ob))].concat(this.fa.Ia())};m.ib=function(){return this.fa.ib()};
function dg(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new D(102);var d=b[c].l,e=b.slice(0);e.splice(c,1);var c=a(e),f=new cg(c);d.forEach(function(a){f.ob.add(a)});return f}m.Ka=function(){return this.fa.Ka()};function eg(a){this.w=a;this.tb=B();this.Z=new Qf(1)}m=eg.prototype;m.getName=g("w");m.add=function(a){if("number"!=typeof a)throw new D(103);this.tb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.tb.delete(a)};m.get=function(a){return this.jb(a)?[a]:[]};m.min=function(){return this.Ib(this.Z.min.bind(this.Z))};m.max=function(){return this.Ib(this.Z.max.bind(this.Z))};
m.Ib=function(a){if(0==this.tb.size)return null;var b=C(this.tb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.Xc=function(){return this.tb.size};m.Ra=function(a,b,c,d){var e=a||[md()];a=C(this.tb).filter(function(a){return e.some(function(b){return this.Z.Db(a,b)},this)},this);return rf(a,b,c,d)};m.clear=function(){this.tb.clear()};m.jb=function(a){return this.tb.has(a)};m.Ia=function(){return[new Vb(0,C(this.tb))]};m.ib=g("Z");
function fg(a,b){var c=new eg(a);b[0].l.forEach(function(a){c.add(a,a)});return c}m.Ka=l(!0);m.X=function(){var a=new sf;a.ia=this.tb.size;return a};function gg(a){this.Ma=a.b(jc);this.C=a.b(lc);this.U=a.b(kc)}gg.prototype.Da=function(a){var b=a.pa(),c=function(){if(0==b.length)return v();var a=b.shift();return(a.Eb()?hg(this,a):ig(this,a)).then(c)}.bind(this);return c()};function ig(a,b){var c=a.Ma.Fb(0,[b]),d=c.G(b.getName(),b.kb.bind(b),0).get([]).then(function(a){this.U.Xb(b.getName(),a);jg(this,b,a)}.bind(a));c.ka();return d}
function jg(a,b,c){var d=a.C.mc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.nb(b.getName());b.add(c,a.id())})})}function hg(a,b){var c=a.Ma.Fb(0,[b]),d=c.G(b.getName(),b.kb,0).get([]).then(function(a){this.U.Xb(b.getName(),a)}.bind(a)),e=b.Ca().map(function(a){return kg(this,a,c)},a).concat(lg(a,b,c));c.ka();return cb(e.concat(d))}
function kg(a,b,c){c=c.G(b.j(),Xb,1);var d=bg(b);return c.get([]).then(function(a){if(0<a.length){if(mg(b)){var c=Df.bind(void 0,d,b.j(),b.Cc);a=dg(c,a)}else a=Df(d,b.j(),b.Cc,a);this.C.set(b.nc,a)}}.bind(a))}function lg(a,b,c){return c.G(Ve(b),Xb,1).get([]).then(function(a){0<a.length&&(a=fg(Ve(b),a),this.C.set(b.getName(),a))}.bind(a))};function ng(){this.Y=x();this.mc=x()}ng.prototype.Da=function(a){a.pa().forEach(function(a){var c=[];this.mc.set(a.getName(),c);var d=Ve(a);if(null===this.get(d)){var e=new eg(d);c.push(e);this.Y.set(d,e)}a.Ca().forEach(function(a){var b;b=bg(a);b=new uf(a.j(),b,a.Cc);b=mg(a)&&1==a.f.length?new cg(b):b;c.push(b);this.Y.set(a.j(),b)},this)},this);return v()};ng.prototype.get=function(a){return this.Y.get(a)||null};
ng.prototype.set=function(a,b){var c=this.mc.get(a)||null;null===c&&(c=[],this.mc.set(a,c));for(var d=null,e=0;e<c.length;e++)if(c[e].getName()==b.getName()){d=e;break}null!==d&&0<c.length?c.splice(d,1,b):c.push(b);this.Y.set(b.getName(),b)};function og(a,b){var c=[],d=null,e=null;Wd(a,function(a){var h=b(a);null==a.getParent()?e=h:K(d,h);var k=a.getParent();null!==k&&J(k).length==J(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<J(a).length&&c.push(h);d=null===a.h?c[c.length-1]:h});return e}function pg(a){return qg(a,function(a){return null===a.h})}
function rg(a){var b=a.getParent(),c=0;null!==b&&(c=J(b).indexOf(a),b.removeChild(a));var d=J(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||Td(b,d,c+f)});return{parent:b,children:d}}function sg(a,b){J(a).slice().forEach(function(c){a.removeChild(c);K(b,c)});K(a,b)}function tg(a){var b=Sd(a,0);rg(a);sg(b,a);return b}
function ug(a,b,c){var d=Sd(a,0),e=J(d).slice();if(!e.some(function(a){return b(a)}))return a;rg(a);e.forEach(function(e,h){if(b(e)){var k=c(a);Ud(d,h);K(k,e);Td(d,k,h)}});return d}function vg(a,b,c,d){var e=a.getParent();null!==e&&(a=J(e).indexOf(a),Ud(e,a),Td(e,c,a));J(b).slice().forEach(function(a){b.removeChild(a);K(d,a)});return c}function qg(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||J(a).forEach(d)}var e=[];d(a);return e}
function wg(a,b){var c=b||function(a){return a.toString()+"\n"},d="";Wd(a,function(a){for(var b=0;b<Rd(a);b++)d+="-";d+=c(a)});return d};function xg(a){Xd.call(this);this.pb=a;this.Sa=!1}r(xg,Xd);m=xg.prototype;m.Nb=function(){return og(this,function(a){if(a instanceof xg){var b=new xg(a.pb);b.Sa=a.Sa;a=a.V();b.ra=a;return b}return a.Nb()})};m.lb=function(a){var b=a||[];Wd(this,function(a){a!=this&&a.lb(b)}.bind(this));a=B(b);return C(a)};m.o=function(a){var b=null!=a?a:B();Wd(this,function(a){a!=this&&a.o(b)}.bind(this));return b};m.sd=function(a){this.Sa!=a&&(this.Sa=a,this.pb="and"==this.pb?"or":"and",J(this).forEach(function(b){return b.sd(a)}))};
m.eval=function(a){var b=J(this).map(function(b){return b.eval(a)});return yg(this,b)};function yg(a,b){return"and"==a.pb?xd(b):yd(b)}m.toString=function(){return"combined_pred_"+this.pb.toString()};m.re=function(){if("or"==this.pb){var a=new qd;J(this).forEach(function(b){b=b.re().Bb();a.add(b)});return a}return new qd};m.jd=function(){return"or"==this.pb?zg(this):!1};
function zg(a){var b=null;return J(a).every(function(a){if(!(a instanceof Zd&&a.jd()))return!1;null===b&&(b=a.I);return b.j()==a.I.j()})};function Ag(a,b,c){Xd.call(this);this.ga=a;this.na=b;this.B=c;this.$d=null;a=Od();this.vc=Pd(a,this.ga.H(),this.B);this.mg=a.Ue.get(this.ga.H())||null}r(Ag,Xd);m=Ag.prototype;m.Nb=function(){var a=new Ag(this.ga,this.na,this.B),b=this.V();a.ra=b;return a};m.lb=function(a){return null!=a?(a.push(this.ga),a.push(this.na),a):[this.ga,this.na]};m.o=function(a){a=null!=a?a:B();a.add(this.ga.G());a.add(this.na.G());return a};
m.reverse=function(){var a=this.B;switch(this.B){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new Ag(this.na,this.ga,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=H(a,this.ga);a=H(a,this.na);return this.vc(b,a)},this);return new G(b,a.o())};m.toString=function(){return"join_pred("+this.ga.j()+" "+this.B+" "+this.na.j()+")"};
function Bg(a,b,c){var d=null,e=null;-1!=b.o().indexOf(Cd(a.ga.G()))?(d=b,e=c):(d=c,e=b);if(d.entries.length>e.entries.length){a:{b=a.ga;a.ga=a.na;a.na=b;b=a.B;switch(a.B){case "gt":b="lt";break;case "lt":b="gt";break;case "gte":b="lte";break;case "lte":b="gte";break;default:break a}a.B=b;a.vc=Pd(Od(),a.ga.H(),a.B)}return[e,d]}return[d,e]}function Cg(a){var b={};a.lb().forEach(function(a){b[a.getName()]=null});return b}
function Dg(a,b,c){null===a.$d&&(a.$d=Cg(a.na.G()));var d=new Ad(new Vb(-1,a.$d),!1);return Ed(b,c,d,[Cd(a.na.G())])}
function Eg(a,b,c,d){var e=[b,c];d||(e=Bg(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.ga,k=a.na;d&&(e=c,f=b,h=a.na,k=a.ga);var n=new Lc,A=[];e.entries.forEach(function(a){var b=String(H(a,h));n.set(b,a)});var O=e.o(),da=f.o();f.entries.forEach(function(a){var b=H(a,k),c=String(b);null!==b&&n.has(c)?n.get(c).forEach(function(b){b=Ed(a,da,b,O);A.push(b)}):d&&A.push(Dg(this,a,da))}.bind(a));a=b.o().concat(c.o());return new G(A,a)}
function Fg(a,b,c,d,e){function f(a,b){var c=new Ad(b,1<O.length),c=Ed(a,da,c,O);A.push(c)}var h=d.bg.G(),k=b,n=c;-1!=b.o().indexOf(Cd(h))&&(k=c,n=b);var A=[],O=n.o(),da=k.o();k.entries.forEach(function(a){var b=this.mg(H(a,d.tg)),b=d.index.get(b);0!=b.length&&(d.index.Ka()?f(a,e.get(b[0])):nf(e,b).forEach(f.bind(null,a)))},a);a=k.o().concat(n.o());return new G(A,a)};function Gg(a,b,c){return null===b?new Zd(a,b,c):p(b.j)?new Ag(a,b,c):new Zd(a,b,c)};var Hg={};q("lf.schema.DataStoreType",Hg);Hg.INDEXED_DB=0;Hg.MEMORY=1;Hg.LOCAL_STORAGE=2;Hg.FIREBASE=3;Hg.WEB_SQL=4;Hg.OBSERVABLE_STORE=5;function Ig(a,b,c,d){this.nc=a;this.name=b;this.Cc=c;this.f=d}Ig.prototype.j=function(){return this.nc+"."+this.name};function mg(a){return a.f.some(function(a){return a.ba.ic()})}function Q(a,b,c,d){this.w=a;this.sa=c;this.J=b;this.pd=d;this.gb=null}q("lf.schema.Table",Q);Q.prototype.getName=g("w");Q.prototype.getName=Q.prototype.getName;Q.prototype.Xa=g("gb");
function Cd(a){return a.gb||a.w}Q.prototype.rc=function(a){var b=new this.constructor(this.w);b.gb=a;b.Fg=this.Fg;return b};Q.prototype.as=Q.prototype.rc;Q.prototype.createRow=Q.prototype.yb;Q.prototype.deserializeRow=Q.prototype.kb;Q.prototype.Ca=g("sa");Q.prototype.getIndices=Q.prototype.Ca;Q.prototype.lb=g("J");Q.prototype.getColumns=Q.prototype.lb;Q.prototype.getConstraint=Q.prototype.Hb;Q.prototype.Eb=g("pd");Q.prototype.persistentIndex=Q.prototype.Eb;function Ve(a){return a.w+".#"};function R(a,b){this.child=a;this.Mb=b;this.gb=null}m=R.prototype;m.getName=function(){return this.Mb+"("+this.child.getName()+")"};m.j=function(){return this.Mb+"("+this.child.j()+")"};m.G=function(){return this.child.G()};m.toString=function(){return this.j()};m.H=function(){return this.child.H()};m.Xa=g("gb");m.Ca=function(){return[]};m.Ba=l(null);m.ic=l(!1);m.rc=function(a){this.gb=a;return this};R.prototype.as=R.prototype.rc;
function Jg(a){for(var b=[a];a instanceof R;)b.push(a.child),a=a.child;return b}function Kg(a){this.gb=a||null;this.S=new Q("#UnknownTable",[],[],!1)}m=Kg.prototype;m.getName=l("*");m.j=function(){return this.getName()};m.toString=function(){return this.j()};m.G=g("S");m.H=l(4);m.Xa=g("gb");m.Ca=function(){return[]};m.Ba=l(null);m.ic=l(!1);q("lf.fn.avg",function(a){return new R(a,"AVG")});function Lg(a){return new R(a||new Kg,"COUNT")}q("lf.fn.count",Lg);function Mg(a){return new R(a,"DISTINCT")}q("lf.fn.distinct",Mg);q("lf.fn.max",function(a){return new R(a,"MAX")});q("lf.fn.min",function(a){return new R(a,"MIN")});q("lf.fn.stddev",function(a){return new R(a,"STDDEV")});q("lf.fn.sum",function(a){return new R(a,"SUM")});q("lf.fn.geomean",function(a){return new R(a,"GEOMEAN")});function S(a,b){I.call(this);this.Tf=b}r(S,I);S.prototype.exec=function(a,b){switch(this.Tf){case 1:return Ng(this,a,b);case 0:return Og(this,a,b);default:return Pg(this,a,b)}};S.prototype.toString=l("dummy_node");S.prototype.Oc=function(){return this.toString()};function Pg(a,b,c){return new u(function(a){a(this.ca([],b,c))}.bind(a))}function Ng(a,b,c){return Sd(a,0).exec(b,c).then(function(a){return this.ca(a,b,c)}.bind(a))}
function Og(a,b,c){var d=J(a).map(function(a){return a.exec(b,c)});return cb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.ca(d,b,c)}.bind(a))};function Qg(a){S.call(this,0,1);this.ye=a}r(Qg,S);Qg.prototype.toString=function(){return"aggregation("+this.ye.map(function(a){return a.j()}).toString()+")"};Qg.prototype.ca=function(a){a.forEach(function(a){Rg(new Sg(a,this.ye))},this);return a};function Sg(a,b){this.La=a;this.J=b}
function Rg(a){a.J.forEach(function(a){a=Jg(a).reverse();for(var c=1;c<a.length;c++){var d=a[c],e=Jg(d).slice(-1)[0],f=d.child instanceof R?ud(this.La,d.child):this.La;if(null!==f.Wa&&f.Wa.has(d.j()))break;f=Tg(d.Mb,f,e);e=this.La;null===e.Wa&&(e.Wa=x());e.Wa.set(d.j(),f)}},a)}
function Tg(a,b,c){var d=null;switch(a){case "MIN":d=Ug(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=Ug(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=Vg(b,c);break;case "COUNT":d=Wg(b,c);break;case "SUM":d=Xg(b,c);break;case "AVG":a=Wg(b,c);0<a&&(d=Xg(b,c)/a);break;case "GEOMEAN":d=Yg(b,c);break;default:d=Zg(b,c)}return d}function Ug(a,b,c){return a.entries.reduce(function(a,e){var f=H(e,b);return null===f?a:null===a?f:c(a,f)},null)}
function Wg(a,b){return b instanceof Kg?a.entries.length:a.entries.reduce(function(a,d){return a+(null===H(d,b)?0:1)},0)}function Xg(a,b){return Ug(a,b,function(a,b){return b+a})}function Zg(a,b){var c=[];a.entries.forEach(function(a){a=H(a,b);null===a||c.push(a)});return 0==c.length?null:rb.apply(null,c)}function Yg(a,b){var c=0,d=a.entries.reduce(function(a,d){var h=H(d,b);if(0==h||null===h)return a;c++;return a+Math.log(h)},0);return 0==c?null:Math.pow(Math.E,d/c)}
function Vg(a,b){var c=x();a.entries.forEach(function(a){var e=H(a,b);c.set(e,a)});return new G(y(c),a.o())};function $g(a,b){this.Ga=a;this.aa=b}$g.prototype.Ya=g("Ga");$g.prototype.da=g("aa");function ah(){I.call(this)}r(ah,I);function bh(a,b){I.call(this);this.table=a;this.values=b}r(bh,ah);function ch(a,b){bh.call(this,a,b)}r(ch,bh);function dh(a){I.call(this);this.table=a}r(dh,ah);dh.prototype.toString=function(){return"delete("+this.table.getName()+")"};function eh(a){I.call(this);this.table=a}r(eh,ah);eh.prototype.toString=function(){return"update("+this.table.getName()+")"};
function fh(a){I.call(this);this.N=a}r(fh,ah);fh.prototype.toString=function(){return"select("+this.N.toString()+")"};function gh(a){I.call(this);this.table=a}r(gh,ah);gh.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Xa()||(a+=" as "+this.table.Xa());return a+")"};function hh(){I.call(this)}r(hh,ah);hh.prototype.toString=l("cross_product");function ih(a,b){I.call(this);this.f=a;this.Qb=b}r(ih,ah);
ih.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Qb)var b=this.Qb.map(function(a){return a.j()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function jh(a){I.call(this);this.M=a}r(jh,ah);jh.prototype.toString=function(){return"order_by("+je(this.M)+")"};function kh(a){I.call(this);this.f=a}r(kh,ah);kh.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function lh(a){I.call(this);this.f=a}r(lh,ah);
lh.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function mh(a){I.call(this);this.W=a}r(mh,ah);mh.prototype.toString=function(){return"limit("+this.W+")"};function nh(a){I.call(this);this.K=a}r(nh,ah);nh.prototype.toString=function(){return"skip("+this.K+")"};function oh(a,b){I.call(this);this.N=a;this.Sb=b}r(oh,ah);oh.prototype.toString=function(){return"join(type: "+(this.Sb?"outer":"inner")+", "+this.N.toString()+")"};function ph(){};function qh(){}r(qh,ph);qh.prototype.cb=function(a){this.F=a;this.vb(this.F);return this.F};qh.prototype.vb=function(a){if(a instanceof fh){var b=rh(this,a.N),b=sh(this,b);vg(a,a,b[0],b[1]);a==this.F&&(this.F=b[0]);a=b[0]}J(a).forEach(function(a){this.vb(a)},this)};function rh(a,b){if(0==J(b).length||"and"!=b.pb)return[b];var c=J(b).slice().map(function(a){b.removeChild(a);return rh(this,a)},a);return Ea(c)}
function sh(a,b){var c=null,d=null;b.map(function(a,b){var h=new fh(a);0==b?c=h:K(d,h);d=h},a);return[c,d]};function th(){}r(th,ph);th.prototype.cb=function(a,b){if(3>b.from.length)return a;this.F=a;this.vb(this.F);return this.F};th.prototype.vb=function(a){if(a instanceof hh)for(;2<J(a).length;){for(var b=new hh,c=0;2>c;c++){var d=Ud(a,0);K(b,d)}Td(a,b,0)}J(a).forEach(function(a){this.vb(a)},this)};function uh(){S.call(this,0,0)}r(uh,S);uh.prototype.toString=l("cross_product");uh.prototype.ca=function(a){var b=a[0],c=a[1];a=[];for(var d=b.o(),e=c.o(),f=0;f<b.entries.length;f++)for(var h=0;h<c.entries.length;h++){var k=Ed(b.entries[f],d,c.entries[h],e);a.push(k)}b=b.o().concat(c.o());return[new G(a,b)]};function vh(a,b){me.call(this,a,b);this.Ha=a.b(nc);this.Jb=a.b(oc)}r(vh,me);vh.prototype.getPriority=l(2);vh.prototype.ce=function(a){0==this.H()?wh(this,a):this.Lc()};function wh(a,b){a.qd.forEach(function(a,d){a instanceof ie&&pe(this.Jb,a,b[d])},a)}vh.prototype.Lc=function(){var a=re(this.Jb,this.da());0!=a.length&&(a=new oe(this.global,a),se(this.Ha,a))};function xh(a){ce.call(this,a)}r(xh,ce);xh.prototype.da=function(){var a=B();a.add(this.from);yh(this,this.from.getName(),a);return a};function yh(a,b,c){var d=zh(a.ba.info(),b,1);zh(a.ba.info(),b).forEach(c.add.bind(c));d.forEach(function(a){yh(this,a.getName(),c)},a)}xh.prototype.clone=function(){var a=new xh(this.ba);ge(a,this);a.from=this.from;return a};xh.prototype.bind=function(a){xh.eb.bind.call(this,a);he(this,a);return this};function Ah(a){ce.call(this,a)}r(Ah,ce);Ah.prototype.da=function(){var a=B();a.add(this.Ja);var b=this.ba.info();Bh(this.Ja.getName(),b.bf).forEach(a.add.bind(a));this.bc&&zh(b,this.Ja.getName()).forEach(a.add.bind(a));return a};Ah.prototype.clone=function(){var a=new Ah(this.ba);ge(a,this);a.Ja=this.Ja;this.values&&(a.values=this.values instanceof Fd?this.values:this.values.slice());a.bc=this.bc;a.cc=this.cc;return a};
Ah.prototype.bind=function(a){Ah.eb.bind.call(this,a);this.cc&&(this.values=this.cc instanceof Fd?a[this.cc.Ba()]:this.cc.map(function(b){return b instanceof Fd?a[b.Ba()]:b}));return this};function Ch(a){ce.call(this,a)}r(Ch,ce);Ch.prototype.da=function(){var a=B();a.add(this.table);var b=this.set.map(function(a){return a.I.j()}),c=this.ba.info();Dh(c,b).forEach(a.add.bind(a));Eh(c,b).forEach(a.add.bind(a));return a};Ch.prototype.clone=function(){var a=new Ch(this.ba);ge(a,this);a.table=this.table;a.set=this.set?Fh(this.set):this.set;return a};Ch.prototype.bind=function(a){Ch.eb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Sc&&(b.value=a[b.Sc])});he(this,a);return this};
function Fh(a){return a.map(function(a){var c={},d;for(d in a)c[d]=a[d];return c})};function Gh(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+Zb(b)+"'";default:return"'"+b.toString()+"'"}}function Hh(a,b){var c=a.bc?"INSERT OR REPLACE":"INSERT",d=a.Ja.lb(),c=c+(" INTO "+a.Ja.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var f=d.map(function(c){var d=a.l[c.getName()];return b?null!=d?"#":"NULL":Gh(c.H(),d)});return c+f.join(", ")+");"}).join("\n")}
function Ih(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Jh(a,b,c,d){return a instanceof Fd?"?"+a.Ba().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return Gh(c,a)}).join(", ")+")":"between"==b?Gh(c,a[0])+" AND "+Gh(c,a[1]):Gh(c,a).toString()}
function Kh(a,b){return J(a).map(function(a){return"("+Lh(a,b)+")"}).join("and"==a.pb?" AND ":" OR ")}function Mh(a){return[a.ga.j(),Ih(a.B),a.na.j()].join(" ")}function Lh(a,b){if(a instanceof Zd){var c=a.I.j(),d=Ih(a.B),e=Jh(a.value,a.B,a.I.H(),b);return"="==d&&"NULL"==e?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==e?[c,"IS NOT NULL"].join(" "):[c,d,e].join(" ")}if(a instanceof xg)return Kh(a,b);if(a instanceof Ag)return Mh(a);throw new D(357,typeof a);}
function Nh(a,b){var c=Lh(a,b);return c?" WHERE "+c:""}function Oh(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.I.j()+" = ";return-1!=a.Sc?b+"?"+a.Sc.toString():b+Gh(a.I.H(),a.value).toString()}).join(", ");a.u&&(c+=Nh(a.u,b));return c+";"}
function Ph(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Xa()?a.j()+" AS "+a.Xa():a.j()}).join(", "));c="SELECT "+c+" FROM ";null!=a.$a&&0!=a.$a.size?c+=Qh(a,b):(c+=a.from.map(Rh).join(", "),a.u&&(c+=Nh(a.u,b)));if(a.M)var d=a.M.map(function(a){return a.I.j()+(0==a.qb?" DESC":" ASC")}).join(", "),c=c+(" ORDER BY "+d);a.la&&(d=a.la.map(function(a){return a.j()}).join(", "),c+=" GROUP BY "+d);a.W&&(c+=" LIMIT "+a.W.toString());a.K&&(c+=" SKIP "+a.K.toString());return c+";"}
function Rh(a){return Cd(a)!=a.getName()?a.getName()+" AS "+Cd(a):a.getName()}function Qh(a,b){for(var c=qg(a.u,function(a){return a instanceof Ag}),d=c.map(Mh),e=Rh(a.from[0]),f=1;f<a.from.length;f++)var h=Rh(a.from[f]),e=a.$a.has(c[d.length-f].V())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");c=Sd(a.u,0);c instanceof Ag||(e+=" WHERE "+Lh(c,b));return e}
function Sh(a,b){var c=b||!1,d=a.query.clone();if(d instanceof Ah)return Hh(d,c);if(d instanceof xh){var e="DELETE FROM "+d.from.getName();d.u&&(e+=Nh(d.u,c));return e+";"}if(d instanceof Ch)return Oh(d,c);if(d instanceof ie)return Ph(d,c);throw new D(358,typeof d);};function T(a,b){this.global=a;this.Eg=a.b(mc);this.Ha=a.b(nc);this.query=b}q("lf.query.BaseBuilder",T);T.prototype.exec=function(){try{this.hb()}catch(a){return $a(a)}return new u(function(a,b){var c=new vh(this.global,[this.Ac()]);se(this.Ha,c).then(function(b){a(sd(b[0]))},b)},this)};T.prototype.exec=T.prototype.exec;T.prototype.Vf=function(){var a=function(a){return a.Oc(this.query)+"\n"}.bind(this);return wg(Th(this).Ya(),a)};T.prototype.explain=T.prototype.Vf;
T.prototype.bind=function(a){this.query.bind(a);return this};T.prototype.bind=T.prototype.bind;T.prototype.Ng=function(a){return Sh(this,a)};T.prototype.toSql=T.prototype.Ng;T.prototype.hb=aa();function Th(a){if(null==a.cf){var b;b=a.Eg;var c=a.query,d=b.pg.create(c);b=b.Bg.create(d,c);a.cf=b}return a.cf}T.prototype.Ac=function(){return{context:this.query.clone(),fe:Th(this)}};function Uh(a){T.call(this,a,new xh(a.b(pc)))}r(Uh,T);q("lf.query.DeleteBuilder",Uh);Uh.prototype.from=function(a){if(null!=this.query.from)throw new D(515);this.query.from=a;return this};Uh.prototype.from=Uh.prototype.from;Uh.prototype.u=function(a){this.Cd();this.query.u=a;return this};Uh.prototype.where=Uh.prototype.u;Uh.prototype.Cd=function(){if(null==this.query.from)throw new D(548);if(null!=this.query.u)throw new D(516);};
Uh.prototype.hb=function(){Uh.eb.hb.call(this);if(null==this.query.from)throw new D(517);};function Vh(a,b){T.call(this,a,new Ah(a.b(pc)));this.query.bc=b||!1}r(Vh,T);q("lf.query.InsertBuilder",Vh);Vh.prototype.hb=function(){Vh.eb.hb.call(this);var a=this.query;if(null==a.Ja||null==a.values)throw new D(518);if(a.bc&&null===a.Ja.Hb().ad())throw new D(519);};Vh.prototype.Ja=function(a){if(null!=this.query.Ja)throw new D(520);this.query.Ja=a;return this};Vh.prototype.into=Vh.prototype.Ja;
Vh.prototype.values=function(a){if(null!=this.query.values)throw new D(521);a instanceof Fd||a.some(function(a){return a instanceof Fd})?this.query.cc=a:this.query.values=a;return this};Vh.prototype.values=Vh.prototype.values;function Wh(a){return Xh("and",Array.prototype.slice.call(arguments))}q("lf.op.and",Wh);q("lf.op.or",function(a){return Xh("or",Array.prototype.slice.call(arguments))});function Xh(a,b){var c=new xg(a);b.forEach(function(a){K(c,a)});return c}q("lf.op.not",function(a){a.sd(!0);return a});function U(a,b){T.call(this,a,new ie(a.b(pc)));this.Ie=this.xd=!1;this.query.f=b;Yh(this);Zh(this)}r(U,T);q("lf.query.SelectBuilder",U);U.prototype.hb=function(){U.eb.hb.call(this);var a=this.query;if(null==a.from)throw new D(522);if(p(a.Tb)&&!p(a.W)||p(a.Zb)&&!p(a.K))throw new D(523);null!=this.query.la?$h(this):ai(this)};function Yh(a){var b=a.query.f.filter(function(a){return a instanceof R&&"DISTINCT"==a.Mb},a);if(0!=b.length&&(1!=b.length||1!=a.query.f.length))throw new D(524);}
function $h(a){var b=a.query.f.filter(function(a){return!(a instanceof R)}).map(function(a){return a.j()}),c=!1;if(0==a.query.la.length||0==a.query.f.length)c=!0;else{var d=a.query.la.map(function(a){return a.j()});(c=b.some(function(a){return-1==d.indexOf(a)}))||(c=a.query.la.some(function(a){a=a.H();return 6==a||0==a}))}if(c)throw new D(525);}
function ai(a){var b=a.query.f.some(function(a){return a instanceof R},a);a=a.query.f.some(function(a){return!(a instanceof R)},a)||0==a.query.f.length;if(b&&a)throw new D(526);}function Zh(a){a.query.f.forEach(function(a){if(a instanceof R&&!bi(a.Mb,a.H()))throw new D(527,a.j());},a)}function ci(a,b){if(null==a.query.from)throw new D(b);}
U.prototype.from=function(a){if(this.Ie)throw new D(515);this.Ie=!0;null==this.query.from&&(this.query.from=[]);this.query.from.push.apply(this.query.from,Array.prototype.slice.call(arguments));return this};U.prototype.from=U.prototype.from;U.prototype.u=function(a){ci(this,548);if(this.xd)throw new D(516);this.xd=!0;di(this,a);return this};U.prototype.where=U.prototype.u;function di(a,b){if(null!=a.query.u){var c=Wh(b,a.query.u);a.query.u=c}else a.query.u=b}
U.prototype.fg=function(a,b){ci(this,542);if(this.xd)throw new D(547);this.query.from.push(a);di(this,b);return this};U.prototype.innerJoin=U.prototype.fg;U.prototype.ng=function(a,b){ci(this,542);if(!(b instanceof Ag))throw new D(541);if(this.xd)throw new D(547);this.query.from.push(a);null==this.query.$a&&(this.query.$a=B());var c=b;Cd(a)!=Cd(b.na.G())&&(c=b.reverse());this.query.$a.add(c.V());di(this,c);return this};U.prototype.leftOuterJoin=U.prototype.ng;
U.prototype.W=function(a){if(null!=(this.query.W||this.query.Tb))throw new D(528);if(a instanceof Fd)this.query.Tb=a;else{if(0>a)throw new D(531);this.query.W=a}return this};U.prototype.limit=U.prototype.W;U.prototype.K=function(a){if(null!=(this.query.K||this.query.Zb))throw new D(529);if(a instanceof Fd)this.query.Zb=a;else{if(0>a)throw new D(531);this.query.K=a}return this};U.prototype.skip=U.prototype.K;
U.prototype.M=function(a,b){ci(this,549);null==this.query.M&&(this.query.M=[]);this.query.M.push({I:a,qb:null!=b?b:1});return this};U.prototype.orderBy=U.prototype.M;U.prototype.la=function(a){ci(this,549);if(null!=this.query.la)throw new D(530);null==this.query.la&&(this.query.la=[]);this.query.la.push.apply(this.query.la,Array.prototype.slice.call(arguments));return this};U.prototype.groupBy=U.prototype.la;
function bi(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}U.prototype.clone=function(){var a=new U(this.global,this.query.f);a.query=this.query.clone();a.query.Vc=null;return a};U.prototype.clone=U.prototype.clone;function ei(a,b){T.call(this,a,new Ch(a.b(pc)));this.query.table=b}r(ei,T);q("lf.query.UpdateBuilder",ei);ei.prototype.set=function(a,b){var c={Sc:b instanceof Fd?b.Ba():-1,I:a,value:b};null!=this.query.set?this.query.set.push(c):this.query.set=[c];return this};ei.prototype.set=ei.prototype.set;ei.prototype.u=function(a){this.Cd();this.query.u=a;return this};ei.prototype.where=ei.prototype.u;ei.prototype.Cd=function(){if(null!=this.query.u)throw new D(516);};
ei.prototype.hb=function(){ei.eb.hb.call(this);if(null==this.query.set)throw new D(532);if(this.query.set.some(function(a){return a.value instanceof Fd}))throw new D(501);};function fi(a){this.query=a;this.Ga=null}fi.prototype.hc=function(){null===this.Ga&&(this.Ga=this.Zc());return this.Ga};function gi(a){fi.call(this,a)}r(gi,fi);gi.prototype.Zc=function(){return this.query.bc?new ch(this.query.Ja,this.query.values):new bh(this.query.Ja,this.query.values)};function hi(a){fi.call(this,a)}r(hi,fi);hi.prototype.Zc=function(){var a=new eh(this.query.table),b=null!=this.query.u?new fh(this.query.u.Nb()):null,c=new gh(this.query.table);null===b?K(a,c):(K(b,c),K(a,b));return a};function ii(a,b,c){this.Ga=a;this.ge=b;this.Wb=c}ii.prototype.hc=function(){this.Wb.forEach(function(a){this.Ga=a.cb(this.Ga,this.ge)},this);return this.Ga};function ji(a,b){fi.call(this,a);this.Wb=b}r(ji,fi);ji.prototype.Zc=function(){var a=new dh(this.query.from),b=null!=this.query.u?new fh(this.query.u.Nb()):null,c=new gh(this.query.from);null===b?K(a,c):(K(b,c),K(a,b));return(new ii(a,this.query,this.Wb)).hc()};function ki(){}r(ki,ph);ki.prototype.cb=function(a,b){if(2>b.from.length)return a;this.F=a;this.vb(this.F,b);return this.F};ki.prototype.vb=function(a,b){if(a instanceof fh&&a.N instanceof Ag){var c=a.N.V(),d=Sd(a,0);d instanceof hh&&(c=null!=b.$a&&b.$a.has(c),c=new oh(a.N,c),vg(a,d,c,c),a==this.F&&(this.F=c),a=c)}J(a).forEach(function(a){this.vb(a,b)},this)};function li(){this.Rc=B()}r(li,ph);li.prototype.cb=function(a,b){if(!p(b.u))return a;this.Rc.clear();this.F=a;this.vb(this.F,b);this.Rc.clear();return this.F};li.prototype.vb=function(a,b){var c=function(a){J(a).forEach(d)}.bind(this),d=function(a){if(!this.Rc.has(a)){if(a instanceof fh){var f=a.N.o(),h=function(a){return mi(this,a,f)}.bind(this),h=ni(this,b,a,h);this.Rc.add(a);h!=a&&(null===h.getParent()&&(this.F=h),d(h))}c(a)}}.bind(this);d(a)};
function ni(a,b,c,d){var e=c;if(oi(b,c))e=tg(c),ni(a,b,c,d);else if(pi(c)){var f=[],e=ug(c,d,function(a){a=new fh(a.N);f.push(a);return a});f.forEach(function(a){ni(this,b,a,d)},a)}return e}function mi(a,b,c){var d=B();pg(b).forEach(function(a){d.add(a.table)},a);b instanceof gh&&d.add(b.table);return qc(d,c)}function pi(a){a=Sd(a,0);return a instanceof hh||a instanceof oh}
function oi(a,b){var c=Sd(b,0);if(!(c instanceof fh))return!1;if(null==a.$a)return!0;var d=b.N instanceof Ag,c=a.$a.has(c.N.V());return d||!c};function qi(a,b){fi.call(this,a);this.Wb=b;this.gf=this.Ye=this.qf=this.af=this.ze=this.Ne=this.pf=this.Fe=this.sf=null}r(qi,fi);
qi.prototype.Zc=function(){ri(this);2<=this.query.from.length&&(this.Fe=new hh);this.pf=null!=this.query.u?new fh(this.query.u.Nb()):null;this.query.M&&(this.af=new jh(this.query.M));null!=this.query.K&&0<this.query.K&&(this.qf=new nh(this.query.K));null!=this.query.W&&(this.Ye=new mh(this.query.W));null!=this.query.la&&(this.Ne=new lh(this.query.la));si(this);this.gf=new ih(this.query.f||[],this.query.la||null);var a=ti(this);return(new ii(a,this.query,this.Wb)).hc()};
function ti(a){for(var b=[a.Ye,a.qf,a.gf,a.af,a.ze,a.Ne,a.pf,a.Fe],c=-1,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:K(b[c],f),c=e)}a.sf.forEach(function(a){K(b[c],a)});return d}function ri(a){a.sf=a.query.from.map(function(a){return new gh(a)},a)}function si(a){var b=a.query.f.filter(function(a){return a instanceof R});null!=a.query.M&&a.query.M.forEach(function(a){a.I instanceof R&&b.push(a.I)});0<b.length&&(a.ze=new kh(b))};function ui(){this.me=[new qh,new th,new li,new ki];this.Md=[new qh]}ui.prototype.create=function(a){var b=null;if(a instanceof Ah)b=new gi(a);else if(a instanceof xh)b=new ji(a,this.Md);else if(a instanceof ie)b=new qi(a,this.me);else if(a instanceof Ch)b=new hi(a);else throw new D(513);b=b.hc();return new $g(b,a.da())};function vi(a){S.call(this,0,1);this.S=a}r(vi,S);vi.prototype.toString=function(){return"delete("+this.S.getName()+")"};vi.prototype.ca=function(a,b){var c=a[0].entries.map(function(a){return a.ua});b.remove(this.S,c);return[wd()]};function wi(a,b){S.call(this,0,-1);this.table=b;this.C=a.b(lc)}r(wi,S);wi.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};wi.prototype.ca=function(){var a=this.C.get(Ve(this.table)),b=new G([],[this.table.getName()]),c=Lg(),a=a.X().ia;null===b.Wa&&(b.Wa=x());b.Wa.set(c.j(),a);return[b]};function xi(a,b){S.call(this,0,-1);this.U=a.b(kc);this.C=a.b(lc);this.table=b}r(xi,S);xi.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Xa()||(a+=" as "+this.table.Xa());return a+")"};xi.prototype.ca=function(){var a=this.C.get(Ve(this.table)).Ra();return[zd(nf(this.U,a),[Cd(this.table)])]};function yi(a){this.c=a}r(yi,ph);yi.prototype.cb=function(a,b){this.F=a;if(!this.Ed(b))return a;var c=qg(a,function(a){return a instanceof xi})[0],d=new wi(this.c,c.table);vg(c,c,d,d);return this.F};yi.prototype.Ed=function(a){return 1==a.f.length&&1==a.from.length&&null==a.u&&null==a.W&&null==a.K&&null==a.la?(a=a.f[0],a instanceof R&&"COUNT"==a.Mb&&a.child instanceof Kg):!1};function zi(a){S.call(this,0,1);this.Me=a}r(zi,S);zi.prototype.toString=function(){return"groupBy("+this.Me.map(function(a){return a.j()}).toString()+")"};zi.prototype.ca=function(a){return Ai(this,a[0])};function Ai(a,b){var c=new Lc,d=function(a){return this.Me.map(function(b){return H(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new G(c.get(a),b.o())},a)};function Bi(a,b,c){S.call(this,0,0);this.C=a.b(lc);this.U=a.b(kc);this.N=b;this.Sb=c;this.Ad="eq"==this.N.B?0:2;this.Pe=null}r(Bi,S);var Ci=["hash","index_nested_loop","nested_loop"];Bi.prototype.toString=function(){return"join(type: "+(this.Sb?"outer":"inner")+", impl: "+Ci[this.Ad]+", "+this.N.toString()+")"};
Bi.prototype.ca=function(a){switch(this.Ad){case 0:return[Eg(this.N,a[0],a[1],this.Sb)];case 1:return[Fg(this.N,a[0],a[1],this.Pe,this.U)];default:var b=this.N,c=a[0];a=a[1];var d=this.Sb,e=[c,a];d||(e=Bg(b,c,a));c=e[0];a=e[1];for(var e=[],f=c.o(),h=a.o(),k=c.entries.length,n=a.entries.length,A=n+256-1>>8,O=0;O<A;){for(var da=0;da<k;da++){var xb=!1,Wf=H(c.entries[da],b.ga);if(null!==Wf)for(var ac=Math.min(O+1<<8,n),yb=O<<8;yb<ac;yb++)if(b.vc(Wf,H(a.entries[yb],b.na))){var xb=!0,Pc=Ed(c.entries[da],
f,a.entries[yb],h);e.push(Pc)}d&&!xb&&e.push(Dg(b,c.entries[da],f))}O++}b=c.o().concat(a.o());return[new G(e,b)]}};function Di(a,b){a.Ad=1;var c=a.C.get(b.Ba().j());a.Pe={bg:b,tg:b==a.N.ga?a.N.na:a.N.ga,index:c}};function Ei(a){S.call(this,0,-1);this.hf=a}r(Ei,S);Ei.prototype.toString=function(){return"no_op_step("+this.hf[0].o().join(",")+")"};Ei.prototype.ca=g("hf");function Fi(){}r(Fi,ph);Fi.prototype.cb=function(a,b){this.F=a;if(!this.Ed(b))return a;qg(a,function(a){return a instanceof Bi}).forEach(this.Dg,this);return this.F};Fi.prototype.Ed=function(a){return 1<a.from.length};
Fi.prototype.Dg=function(a){if("eq"==a.N.B&&!a.Sb){var b=function(b){if(!(b instanceof xi))return null;b=Cd(b.table)==Cd(a.N.na.G())?a.N.na:a.N.ga;return null===b.Ba()?null:b},c=b(Sd(a,0)),b=b(Sd(a,1));if(null!==c||null!==b){b=null===b?c:b;Di(a,b);var d=new G([],[Cd(b.G())]);Vd(a,new Ei([d]),b==c?0:1)}}};function Gi(a){a=a.map(function(a){return a.Bb()});a=wb.apply(null,a);var b=[];vb(a,function(a){b.push(a)});return b}function Hi(a){this.Rb=a}Hi.prototype.$c=function(){return 1==this.Rb.f.length?[md()]:[this.Rb.f.map(function(){return md()})]};function Ii(a,b){this.Rb=a;this.Fa=b;this.Id=this.We=null}
function Ji(a,b){var c=x();a.Fa.keys().forEach(function(a){var e=this.Fa.get(a).map(function(a){return de(b,a)},this),f=new qd([md()]);e.forEach(function(a){f=rd(f,a.re())});c.set(a,f)},a);return c}Ii.prototype.$c=function(a){if(this.We==a)return this.Id;for(var b=Ji(this,a),c=this.Rb.f.length-1;0<=c;c--){var d=this.Rb.f[c];if(null!==(b.get(d.ba.getName())||null))break;b.set(d.ba.getName(),new qd([md()]))}this.Id=1==this.Rb.f.length?y(b)[0].Bb():Gi(Ki(this,b));this.We=a;return this.Id};
function Ki(a,b){var c=x(),d=0;a.Rb.f.forEach(function(a){c.set(a.ba.getName(),d);d++});return Ub(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function Li(a,b){this.ud=b;this.C=a.b(lc)}function Mi(a){a=a.C.get(Ve(a.ud));return Math.floor(.02*a.X().ia)}function Ni(a,b,c){c=c.filter(a.ig,a);if(0==c.length)return null;a=Oi(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var h=Pi(c,b);return h<d?(d=h,c):a},null)}
function Oi(a,b){return a.ud.Ca().map(function(a){a=new Qi(this.C,a);Ri(a,b);return a},a).filter(function(a){if(null===a.Fa)a=!1;else{for(var b=!1,e=!0,f=0;f<a.Za.f.length;f++){var h=a.Fa.has(a.Za.f[f].ba.getName());if(b&&h){e=!1;break}h||(b=!0)}a=e}return a})}Li.prototype.ig=function(a){return a instanceof Zd?!a.jd()||a.I.G()!=this.ud||"in"==a.B&&a.value.length>Mi(this)?!1:!0:a instanceof xg?a.jd()&&Sd(a,0).I.G()==this.ud?J(a).length<=Mi(this):!1:!1};
function Qi(a,b){this.C=a;this.Za=b;this.cg=B(this.Za.f.map(function(a){return a.ba.getName()}));this.Xd=this.Fa=null}function Si(a){null===a.Xd&&(a.Xd=new Ii(a.Za,a.Fa));return a.Xd}function Ri(a,b){b.forEach(function(a){var b=a.lb()[0].getName();this.cg.has(b)&&(null===this.Fa&&(this.Fa=new Lc),this.Fa.set(b,a.V()))},a)}function Pi(a,b){var c=Si(a).$c(b),d=a.C.get(a.Za.j());return c.reduce(function(a,b){return a+d.Xc(b)},0)};function Ti(a,b,c,d){S.call(this,0,-1);this.C=a.b(lc);this.index=b;this.Ve=c;this.ke=d;this.Qc=this.Pc=!1}r(Ti,S);Ti.prototype.toString=function(){return"index_range_scan("+this.index.j()+", ?, "+(this.ke?"reverse":"natural")+(this.Pc?", limit:?":"")+(this.Qc?", skip:?":"")+")"};Ti.prototype.Oc=function(a){var b=this.toString(),c=this.Ve.$c(a),b=b.replace("?",c.toString());this.Pc&&(b=b.replace("?",a.W.toString()));this.Qc&&(b=b.replace("?",a.K.toString()));return b};
Ti.prototype.ca=function(a,b,c){a=this.Ve.$c(c);b=this.C.get(this.index.j());c=(1==a.length&&a[0]instanceof E&&nd(a[0])?rf(b.get(a[0].from),!1,this.Pc?c.W:void 0,this.Qc?c.K:void 0):b.Ra(a,this.ke,this.Pc?c.W:void 0,this.Qc?c.K:void 0)).map(function(a){return new Vb(a,{})},this);return[zd(c,[this.index.nc])]};function Ui(){S.call(this,0,0)}r(Ui,S);Ui.prototype.toString=l("multi_index_range_scan()");
Ui.prototype.ca=function(a){var b=x();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.ua.id(),a)})});var c=y(b);return[new G(c,a[0].o())]};function Vi(a){S.call(this,0,1);this.kc=a}r(Vi,S);Vi.prototype.toString=l("select(?)");Vi.prototype.Oc=function(a){a=de(a,this.kc);return this.toString().replace("?",a.toString())};Vi.prototype.ca=function(a,b,c){return[de(c,this.kc).eval(a[0])]};function Wi(a,b){S.call(this,0,1);this.U=a.b(kc);this.S=b}r(Wi,S);Wi.prototype.toString=function(){return"table_access_by_row_id("+this.S.getName()+")"};Wi.prototype.ca=function(a){return[zd(nf(this.U,td(a[0])),[Cd(this.S)])]};function Xi(a){this.c=a}r(Xi,ph);Xi.prototype.cb=function(a,b){this.F=a;qg(a,function(a){return a instanceof xi}).forEach(function(a){var d=Yi(a);if(0!=d.length){var e=Ni(new Li(this.c,a.table),b,d.map(function(a){return de(b,a.kc)}));if(null!==e){var f=x();d.forEach(function(a){f.set(a.kc,a)},this);this.F=Zi(this,e,f,a)}}},this);return this.F};function Yi(a){var b=[];for(a=a.getParent();a;){if(a instanceof Vi)b.push(a);else if(a instanceof Bi)break;a=a.getParent()}return b}
function Zi(a,b,c,d){(null===b.Fa?[]:b.Fa.values()).map(function(a){return c.get(a)}).forEach(rg);b=new Ti(a.c,b.Za,Si(b),!1);a=new Wi(a.c,d.table);K(a,b);vg(d,d,a,b);return b.Ya()};function $i(a,b){S.call(this,0,-1);this.C=a.b(lc);this.S=b}r($i,S);$i.prototype.toString=function(){return"insert("+this.S.getName()+")"};$i.prototype.ca=function(a,b,c){aj(this.S,c.values,this.C);b.Cb(this.S,c.values);return[zd(c.values,[this.S.getName()])]};function aj(a,b,c){a=a.Hb().ad();if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ba.getName();c=c.get(a.j()).X().Ec;var e=null===c?0:c;b.forEach(function(a){if(0==a.l[d]||null==a.l[d])e++,a.l[d]=e})}}
function bj(a,b){S.call(this,0,-1);this.C=a.b(lc);this.S=b}r(bj,S);bj.prototype.toString=function(){return"insert_replace("+this.S.getName()+")"};bj.prototype.ca=function(a,b,c){aj(this.S,c.values,this.C);b.Td(this.S,c.values);return[zd(c.values,[this.S.getName()])]};function cj(){S.call(this,0,1)}r(cj,S);cj.prototype.toString=l("limit(?)");cj.prototype.Oc=function(a){return this.toString().replace("?",a.W.toString())};cj.prototype.ca=function(a,b,c){a[0].entries.splice(c.W);return a};function dj(a){S.call(this,0,1);this.M=a}r(dj,S);m=dj.prototype;m.toString=function(){return"order_by("+je(this.M)+")"};m.ca=function(a){if(1==a.length){var b;b=a[0];for(var c=null,d=0;d<this.M.length;d++){var e=Mg(this.M[d].I);if(null!==b.Wa&&b.Wa.has(e.j())){c=e;break}}b=c;(null===b?a[0]:ud(a[0],b)).entries.sort(this.Sf.bind(this))}else a.sort(this.Gg.bind(this));return a};
m.Z=function(a,b){var c=null,d=null,e=null,f=-1;do f++,e=this.M[f].I,c=this.M[f].qb,d=a(e),e=b(e);while(d==e&&f+1<this.M.length);d=d<e?-1:d>e?1:0;return 1==c?d:-d};m.Gg=function(a,b){return this.Z(function(b){return b instanceof R?ud(a,b):H(a.entries[a.entries.length-1],b)},function(a){return a instanceof R?ud(b,a):H(b.entries[b.entries.length-1],a)})};m.Sf=function(a,b){return this.Z(function(b){return H(a,b)},function(a){return H(b,a)})};function ej(a,b){this.La=a;this.J=b}function fj(a){return a.J.some(function(a){return a instanceof R},a)?gj(a):hj(a)}function gj(a){if(1==a.J.length&&"DISTINCT"==a.J[0].Mb)return a=ud(a.La,a.J[0]).entries.map(function(a){var b=new Ad(new Vb(-1,{}),1<this.La.L.size);Dd(b,this.J[0],H(a,this.J[0].child));return b},a),new G(a,[]);var b=new Ad(new Vb(-1,{}),1<a.La.L.size);a.J.forEach(function(a){var d=a instanceof R?ud(this.La,a):H(this.La.entries[0],a);Dd(b,a,d)},a);return new G([b],a.La.o())}
function hj(a){var b=Array(a.La.entries.length),c=1<a.La.L.size;a.La.entries.forEach(function(a,e){b[e]=new Ad(new Vb(a.ua.id(),{}),c);this.J.forEach(function(c){Dd(b[e],c,H(a,c))},this)},a);return new G(b,a.La.o())}function ij(a,b){var c=a.map(function(a){return fj(new ej(a,b)).entries[0]});return new G(c,a[0].o())};function jj(a,b){S.call(this,0,1);this.f=a;this.Qb=b}r(jj,S);jj.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Qb)var b=this.Qb.map(function(a){return a.j()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};jj.prototype.ca=function(a){0==a.length?a=[wd()]:1==a.length?(a=a[0],a=[0==this.f.length?a:fj(new ej(a,this.f))]):a=[ij(a,this.f)];return a};function kj(a){return a.f.some(function(a){return a instanceof R})||null!==a.Qb};function lj(){S.call(this,0,1)}r(lj,S);lj.prototype.toString=l("skip(?)");lj.prototype.Oc=function(a){return this.toString().replace("?",a.K.toString())};lj.prototype.ca=function(a,b,c){return[new G(a[0].entries.slice(c.K),a[0].o())]};function mj(){}r(mj,ph);mj.prototype.cb=function(a,b){if(!p(b.W)&&!p(b.K))return a;var c=nj(a);if(null===c)return a;qg(a,function(a){return a instanceof cj||a instanceof lj}).forEach(function(a){a instanceof cj?c.Pc=!0:c.Qc=!0;rg(a)},this);return c.Ya()};function nj(a){a=qg(a,function(a){return a instanceof Ti},function(a){return a instanceof jj&&kj(a)||a instanceof dj||1!=J(a).length||a instanceof Vi});return 0<a.length?a[0]:null};function oj(a){this.c=a}r(oj,ph);oj.prototype.cb=function(a,b){this.F=a;var c=pj(this,b);if(0==c.length)return this.F;var d=null,e=null,f=0;do e=c[f++],d=qj(this,e,b);while(null===d&&f<c.length);if(null===d)return this.F;c=rj(this,d[0].Za.nc);return null===c?this.F:this.F=sj(this,e,c,d)};function pj(a,b){return qg(a.F,function(a){if(!(a instanceof Vi))return!1;a=de(b,a.kc);return a instanceof xg&&"or"==a.pb})}
function rj(a,b){return qg(a.F,function(a){return a instanceof xi&&a.table.getName()==b})[0]||null}function qj(a,b,c){b=de(c,b.kc);var d=b.o();if(1!=d.size)return null;var d=C(d)[0],e=new Li(a.c,d),f=null;return J(b).every(function(a){a=Ni(e,c,[a]);null===a||(null===f?f=[a]:f.push(a));return null!==a})?f:null}function sj(a,b,c,d){var e=new Wi(a.c,c.table),f=new Ui;K(e,f);d.forEach(function(a){a=new Ti(this.c,a.Za,Si(a),!1);K(f,a)},a);rg(b);vg(c,c,e,f);return f.Ya()};function tj(a){this.c=a}r(tj,ph);tj.prototype.cb=function(a,b){var c=uj(a,b);if(null===c)return a;var d;a:{var e=c;d=vj(Sd(c,0));if(null!==d){var f;f=c.M;for(var h=null,k=d.table.Ca(),n=0;n<k.length&&null===h;n++)h=wj(k[n],f);f=h;if(null===f){d=e;break a}e=new Ti(this.c,f.Za,new Hi(f.Za),f.Se);f=new Wi(this.c,d.table);K(f,e);rg(c);e=vg(d,d,f,e)}d=e}if(d==c)a:if(d=c,e=xj(Sd(c,0)),null!==e){f=wj(e.index,c.M);if(null===f)break a;e.ke=f.Se;d=rg(c).parent}return d.Ya()};
function xj(a){a=qg(a,function(a){return a instanceof Ti},function(a){return 1!=J(a).length});return 0<a.length?a[0]:null}function vj(a){a=qg(a,function(a){return a instanceof xi},function(a){return 1!=J(a).length});return 0<a.length?a[0]:null}function uj(a,b){return p(b.M)?qg(a,function(a){return a instanceof dj})[0]:null}function wj(a,b){if(a.f.length!=b.length||!b.every(function(b,c){return b.I.getName()==a.f[c].ba.getName()}))return null;var c=yj(b,a);return c[0]||c[1]?{Za:a,Se:c[1]}:null}
function yj(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.qb?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.qb?0:1)},0),c=c^d;return[0==c,c==Math.pow(2,Math.max(a.length,b.f.length))-1]};function zj(a,b,c){this.Ga=a;this.ge=b;this.Wb=c}zj.prototype.hc=function(){this.Wb.forEach(function(a){this.Ga=a.cb(this.Ga,this.ge)},this);return this.Ga};function Aj(a){S.call(this,0,1);this.S=a}r(Aj,S);Aj.prototype.toString=function(){return"update("+this.S.getName()+")"};Aj.prototype.ca=function(a,b,c){a=a[0].entries.map(function(a){var b=this.S.kb(a.ua.Ia());c.set.forEach(function(a){b.l[a.I.getName()]=a.value},this);return b},this);b.update(this.S,a);return[wd()]};function Bj(a){this.c=a;this.me=[new Fi,new Xi(this.c),new oj(this.c),new tj(this.c),new mj,new yi(this.c)];this.Md=[new Xi(this.c)]}Bj.prototype.create=function(a,b){var c=a.Ya();if(c instanceof ch||c instanceof bh)return Cj(this,a,b);if(c instanceof ih||c instanceof mh||c instanceof nh)return Cj(this,a,b,this.me);if(c instanceof dh||c instanceof eh)return Cj(this,a,b,this.Md);throw new D(8);};
function Cj(a,b,c,d){a=og(b.Ya(),a.sg.bind(a));null!=d&&(a=(new zj(a,c,d)).hc());return new ke(a,b.da())}
Bj.prototype.sg=function(a){if(a instanceof ih)return new jj(a.f,a.Qb);if(a instanceof lh)return new zi(a.f);if(a instanceof kh)return new Qg(a.f);if(a instanceof jh)return new dj(a.M);if(a instanceof nh)return new lj;if(a instanceof mh)return new cj;if(a instanceof fh)return new Vi(a.N.V());if(a instanceof hh)return new uh;if(a instanceof oh)return new Bi(this.c,a.N,a.Sb);if(a instanceof gh)return new xi(this.c,a.table);if(a instanceof dh)return new vi(a.table);if(a instanceof eh)return new Aj(a.table);
if(a instanceof ch)return new bj(this.c,a.table);if(a instanceof bh)return new $i(this.c,a.table);throw new D(514);};function Dj(a){this.pg=new ui;this.Bg=new Bj(a)};function Ej(){this.Ze=x()}function Fj(a,b){var c=a.Ze.get(b.getName())||null;null===c&&(c=new Gj,a.Ze.set(b.getName(),c));return c}function Hj(a,b,c,d){c.forEach(function(a){a=Fj(this,a);0==d?(a.ab=null,a.wc=b):3==d?(null===a.Yb&&(a.Yb=B()),a.Yb.add(b),null===a.Ua&&(a.Ua=B()),a.Ua.delete(b)):1==d?(null===a.Ua&&(a.Ua=B()),a.Ua.add(b)):2==d&&(a.ab=b)},a)}
function Ij(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=Fj(this,a);var c=null===a.Ua||0==a.Ua.size;e=0==d?(null===a.Yb||0==a.Yb.size)&&c&&null===a.wc&&null!==a.ab&&a.ab==b:3==d?null===a.wc&&null===a.ab&&null!==a.Ua&&a.Ua.has(b):1==d?null===a.ab:c&&(null===a.ab||a.ab==b)}},a);return e}function Jj(a,b,c,d){var e=Ij(a,b,c,d);e&&Hj(a,b,c,d);return e}Ej.prototype.releaseLock=function(a,b){b.forEach(function(b){Fj(this,b).releaseLock(a)},this)};
function Kj(a,b){b.forEach(function(a){Fj(this,a).ab=null},a)}function Gj(){this.Yb=this.Ua=this.ab=this.wc=null}Gj.prototype.releaseLock=function(a){this.wc==a&&(this.wc=null);this.ab==a&&(this.ab=null);null===this.Ua||this.Ua.delete(a);null===this.Yb||this.Yb.delete(a)};function Lj(){this.Vb=new Mj;this.Dc=new Ej}function se(a,b){(2>b.getPriority()||2>b.getPriority())&&Kj(a.Dc,b.da());a.Vb.Cb(b);Nj(a);return b.Pb().ha}function Nj(a){for(var b=a.Vb.Bb(),c=0;c<b.length;c++){var d=b[c],e=!1;if(e=0==d.H()?Oj(a,d,1,3):Oj(a,d,2,0))a.Vb.remove(d),e=a,d.exec().then(e.yg.bind(e,d),e.xg.bind(e,d))}}function Oj(a,b,c,d){var e=!1;Jj(a.Dc,b.V(),b.da(),c)&&(e=Jj(a.Dc,b.V(),b.da(),d));return e}Lj.prototype.yg=function(a,b){this.Dc.releaseLock(a.V(),a.da());a.Pb().resolve(b);Nj(this)};
Lj.prototype.xg=function(a,b){this.Dc.releaseLock(a.V(),a.da());a.Pb().reject(b);Nj(this)};function Mj(){this.Vb=[]}Mj.prototype.Cb=function(a){qf(this.Vb,a,function(a,c){var d=a.getPriority()-c.getPriority();return 0==d?a.V()-c.V():d})};Mj.prototype.Bb=function(){return this.Vb.slice()};Mj.prototype.remove=function(a){var b=this.Vb;a=xa(b,a);var c;(c=0<=a)&&Array.prototype.splice.call(b,a,1);return c};function Pj(){this.Mc=x()}var Qj;function Rj(){Qj||(Qj=new Pj);return Qj}Pj.prototype.clear=function(){this.Mc.clear()};Pj.prototype.clear=Pj.prototype.clear;Pj.prototype.sb=function(a,b){this.Mc.set(a.toString(),b);return b};Pj.prototype.registerService=Pj.prototype.sb;Pj.prototype.b=function(a){var b=this.Mc.get(a.toString())||null;if(null===b)throw new D(7,a.toString());return b};Pj.prototype.getService=Pj.prototype.b;Pj.prototype.kd=function(a){return this.Mc.has(a.toString())};
Pj.prototype.isRegistered=Pj.prototype.kd;function Sj(){var a=Rj();return Ub(a.Mc)};function Tj(a,b,c,d){return null!=a?null!=b?Uj(a,b,c,d):Vj(a):Wj()}function Xj(a){var b="";try{b=JSON.stringify(a)}catch(c){}return b}function Yj(a){var b=Rj();a=new ic("ns_"+a);return b.kd(a)?b.b(a):null}function Wj(){var a={};Sj().forEach(function(b){"ns_"==b.substring(0,3)&&(b=b.substring(3),a[b]=Yj(b).b(pc).version())});return Xj(a)}function Vj(a){a=Yj(a);var b={};if(null!=a){var c=a.b(lc);a.b(pc).pa().forEach(function(a){b[a.getName()]=c.get(Ve(a)).X().ia})}return Xj(b)}
function Uj(a,b,c,d){var e=Yj(a);a=[];if(null!=e){var f=null;try{f=e.b(pc).table(b)}catch(h){}null!=f&&(b=e.b(lc),e=e.b(kc),c=b.get(Ve(f)).Ra(void 0,!1,c,d),c.length&&(a=nf(e,c).map(function(a){return a.l})))}return Xj(a)};function Zj(a,b){this.Nd=Od();this.he=a;this.md=b;this.J=ak(this)}function ak(a){if(0<a.he.f.length)return a.he.f;var b=[];a.he.from.forEach(function(a){a.lb().forEach(function(a){b.push(a)})});return b}Zj.prototype.Z=function(a,b){return this.J.every(function(c){return Pd(this.Nd,c.H(),"eq")(H(a,c),H(b,c))},this)};
function bk(a,b,c){var d=null===b?[]:b.entries,e=nb(d,c.entries,a.Z.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var k=d[h];e[f]==k?f++:(k=a.md.splice(f,1),k=ck(h,k,0,a.md),b.push(k))}e=nb(d,c.entries,a.Z.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)k=c.entries[h],e[f]==k?f++:(a.md.splice(h,0,k.ua.l),k=ck(h,[],1,a.md),b.push(k));return b}function ck(a,b,c,d){return{addedCount:c,index:a,object:d,removed:b,type:"splice"}};function dk(){this.gc=x()}dk.prototype.zd=function(a,b){var c=ka(a.query).toString(),d=this.gc.get(c)||null;null===d&&(d=new ek(a),this.gc.set(c,d));d.zd(b)};dk.prototype.ie=function(a,b){var c=ka(a.query).toString(),d=this.gc.get(c)||null;d.ie(b);0<d.Gc.size||this.gc.delete(c)};function re(a,b){var c=B();b.forEach(function(a){c.add(a.getName())});var d=[];a.gc.forEach(function(a){a=a.Ac();a.context.from.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function pe(a,b,c){b=ka(null!=b.Vc?b.Vc:b).toString();a=a.gc.get(b)||null;null!==a&&fk(a,c)}function ek(a){this.Ef=a;this.Gc=B();this.vg=[];this.Xe=null;this.Qf=new Zj(a.query,this.vg)}ek.prototype.zd=function(a){this.Gc.has(a)||this.Gc.add(a)};ek.prototype.ie=function(a){return this.Gc.delete(a)};ek.prototype.Ac=function(){var a=this.Ef;return{context:a.query,fe:Th(a)}};function fk(a,b){var c=bk(a.Qf,a.Xe,b);a.Xe=b;0<c.length&&a.Gc.forEach(function(a){a(c)})};function gk(a,b){var c=a.b(pc),d=b||{},e=new mf(c);a.sb(kc,e);var e=null,f=!1;null!=d.storeType?e=d.storeType:(p(Tb)||(Tb=new Sb),e=Tb,e=e.dg?0:e.Sg?4:1);switch(e){case 0:e=new Re(a,c);break;case 1:e=new Ye(c);break;case 5:e=new $e(c);break;case 4:e=new hf(a,c,d.webSqlDbSize);break;case 3:e=new Ee(c,d.firebase);f=!0;break;default:throw new D(300);}a.sb(jc,e);var h=new ng;a.sb(lc,h);return e.Da(d.onUpgrade).then(function(){var b=new Dj(a);a.sb(mc,b);b=new Lj;a.sb(nc,b);b=new dk;a.sb(oc,b);return h.Da(c)}).then(function(){if(f){var b=
new te(a);b.Ma.subscribe(b.ae.bind(b))}d.enableInspector&&(window.top["#lfInspect"]=Tj);return(new gg(a)).Da(c)})};function hk(a){this.c=a;this.g=a.b(pc);this.aa=B(this.g.pa());this.bb=w()}function ik(a){var b=a.c.b(lc),c=a.c.b(kc),d={};a.g.pa().forEach(function(a){var f=b.get(Ve(a)).Ra(),f=nf(c,f).map(function(a){return a.l});d[a.getName()]=f});return{name:a.g.name(),version:a.g.version(),tables:d}}m=hk.prototype;m.exec=function(){var a=ik(this),a=new Ad(new Vb(-1,a),!0);return v([new G([a],[])])};m.H=l(0);m.da=g("aa");m.Pb=g("bb");m.V=function(){return ka(this)};m.getPriority=l(0);function jk(a,b){this.c=a;this.g=a.b(pc);this.aa=B(this.g.pa());this.bb=w();this.Aa=b;this.Ma=a.b(jc);this.U=a.b(kc);this.C=a.b(lc)}m=jk.prototype;
m.exec=function(){if(!(this.Ma instanceof Re||this.Ma instanceof Ye||this.Ma instanceof hf))throw new D(300);var a;a:{a=this.g.pa();for(var b=0;b<a.length;++b)if(0<this.C.get(Ve(a[b])).X().ia){a=!1;break a}a=!0}if(!a)throw new D(110);if(this.g.name()!=this.Aa.name||this.g.version()!=this.Aa.version)throw new D(111);if(null==this.Aa.tables)throw new D(112);return kk(this)};m.H=l(1);m.da=g("aa");m.Pb=g("bb");m.V=function(){return ka(this)};m.getPriority=l(0);
function kk(a){var b=new dd(a.c,a.aa),b=a.Ma.Fb(a.H(),C(a.aa),b),c;for(c in a.Aa.tables){var d=a.g.table(c),e=a.Aa.tables[c].map(function(a){return d.yb(a)}),f=b.G(c,d.kb,0);a.U.Xb(c,e);var h=a.C.mc.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.nb(b.getName());b.add(c,a.id())})});f.put(e)}return b.ka()};function lk(a,b){this.c=a;this.Ma=a.b(jc);this.Ha=a.b(nc);this.Jb=a.b(oc);this.aa=B(b);this.Oa=new dd(this.c,this.aa);this.bb=w();this.xc=w();this.ve=w()}m=lk.prototype;m.exec=function(){this.ve.resolve();return this.xc.ha};m.H=l(1);m.da=g("aa");m.Pb=g("bb");m.V=function(){return ka(this)};m.getPriority=l(2);function mk(a){se(a.Ha,a);return a.ve.ha}
function nk(a,b){var c=b.Ac();return c.fe.Ya().exec(a.Oa,c.context).then(function(a){return sd(a[0])},function(a){this.Oa.Kb();var b=new hb(a.name);this.xc.reject(b);throw a;}.bind(a))}m.ka=function(){this.ja=this.Ma.Fb(this.H(),C(this.aa),this.Oa);this.ja.ka().then(function(){this.Lc();this.xc.resolve()}.bind(this),function(a){this.Oa.Kb();this.xc.reject(a)}.bind(this));return this.bb.ha};m.Kb=function(){this.Oa.Kb();this.xc.resolve();return this.bb.ha};
m.Lc=function(){var a=re(this.Jb,this.aa);0!=a.length&&(a=new oe(this.c,a),se(this.Ha,a))};m.X=function(){var a=null;null!=this.ja&&(a=this.ja.X());return null===a?new z(!1,0,0,0,0):a};function V(a){this.c=a;this.Ha=a.b(nc);this.Lb=null;this.Qa=0;0==ok.size&&(ok.set(0,B([1,4])),ok.set(1,B([2])),ok.set(2,B([3,5,6])),ok.set(3,B([2,7])),ok.set(4,B([7])),ok.set(5,B([7])),ok.set(6,B([7])))}q("lf.proc.Transaction",V);var ok=x();function pk(a,b){var c=ok.get(a.Qa)||null;if(null===c||!c.has(b))throw new D(107,a.Qa,b);a.Qa=b}
V.prototype.exec=function(a){pk(this,4);var b=[];try{a.forEach(function(a){a.hb();b.push(a.Ac())},this)}catch(c){return pk(this,7),$a(c)}this.Lb=new vh(this.c,b);return se(this.Ha,this.Lb).then(function(a){pk(this,7);return a.map(function(a){return sd(a)})}.bind(this),function(a){pk(this,7);throw a;}.bind(this))};V.prototype.exec=V.prototype.exec;V.prototype.Cf=function(a){pk(this,1);this.Lb=new lk(this.c,a);return mk(this.Lb).then(function(){pk(this,2)}.bind(this))};V.prototype.begin=V.prototype.Cf;
V.prototype.Bf=function(a){pk(this,3);return nk(this.Lb,a).then(function(a){pk(this,2);return a}.bind(this),function(a){pk(this,7);throw a;}.bind(this))};V.prototype.attach=V.prototype.Bf;V.prototype.ka=function(){pk(this,5);return this.Lb.ka().then(function(){pk(this,7)}.bind(this))};V.prototype.commit=V.prototype.ka;V.prototype.Kb=function(){pk(this,6);return this.Lb.Kb().then(function(){pk(this,7)}.bind(this))};V.prototype.rollback=V.prototype.Kb;
V.prototype.X=function(){if(7!=this.Qa)throw new D(105);return this.Lb.X()};V.prototype.stats=V.prototype.X;function W(a){this.c=a;this.g=a.b(pc);this.gd=!1}q("lf.proc.Database",W);W.prototype.Da=function(a){this.c.sb(pc,this.g);return gk(this.c,a).then(function(){this.gd=!0;this.Ha=this.c.b(nc);return this}.bind(this))};W.prototype.init=W.prototype.Da;W.prototype.Ab=g("g");W.prototype.getSchema=W.prototype.Ab;function qk(a){if(!a.gd)throw new D(2);}W.prototype.select=function(a){qk(this);return new U(this.c,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
W.prototype.select=W.prototype.select;W.prototype.Cb=function(){qk(this);return new Vh(this.c)};W.prototype.insert=W.prototype.Cb;W.prototype.Td=function(){qk(this);return new Vh(this.c,!0)};W.prototype.insertOrReplace=W.prototype.Td;W.prototype.update=function(a){qk(this);return new ei(this.c,a)};W.prototype.update=W.prototype.update;W.prototype.delete=function(){qk(this);return new Uh(this.c)};W.prototype["delete"]=W.prototype.delete;
W.prototype.observe=function(a,b){qk(this);this.c.b(oc).zd(a,b)};W.prototype.observe=W.prototype.observe;W.prototype.unobserve=function(a,b){qk(this);this.c.b(oc).ie(a,b)};W.prototype.unobserve=W.prototype.unobserve;W.prototype.Mf=function(){qk(this);return new V(this.c)};W.prototype.createTransaction=W.prototype.Mf;W.prototype.close=function(){try{this.c.b(jc).close()}catch(a){}this.c.clear();this.gd=!1};W.prototype.close=W.prototype.close;
W.prototype.Wf=function(){qk(this);var a=new hk(this.c);return se(this.Ha,a).then(function(a){return sd(a[0])[0]})};W.prototype["export"]=W.prototype.Wf;W.prototype.import=function(a){qk(this);a=new jk(this.c,a);return se(this.Ha,a).then(l(null))};W.prototype["import"]=W.prototype.import;function X(a,b,c,d,e,f){this.S=a;this.w=b;this.Te=c;this.Re=d;this.uf=e;this.gb=f||null}q("lf.schema.BaseColumn",X);m=X.prototype;m.getName=g("w");m.j=function(){return Cd(this.S)+"."+this.w};m.toString=function(){return this.j()};m.G=g("S");m.H=g("uf");X.prototype.getType=X.prototype.H;X.prototype.Xa=g("gb");X.prototype.Ca=function(){null==this.sa&&(this.sa=[],this.G().Ca().forEach(function(a){-1!=a.f.map(function(a){return a.ba.getName()}).indexOf(this.w)&&this.sa.push(a)},this));return this.sa};
X.prototype.Ba=function(){if(!p(this.fa)){var a=this.Ca().filter(function(a){return 1!=a.f.length?!1:a.f[0].ba.getName()==this.getName()},this);this.fa=0<a.length?a[0]:null}return this.fa};X.prototype.ic=g("Re");X.prototype.isNullable=X.prototype.ic;X.prototype.Cc=g("Te");X.prototype.Na=function(a){return Gg(this,a,"eq")};X.prototype.eq=X.prototype.Na;X.prototype.$e=function(a){return Gg(this,a,"neq")};X.prototype.neq=X.prototype.$e;X.prototype.qg=function(a){return Gg(this,a,"lt")};
X.prototype.lt=X.prototype.qg;X.prototype.rg=function(a){return Gg(this,a,"lte")};X.prototype.lte=X.prototype.rg;X.prototype.Zf=function(a){return Gg(this,a,"gt")};X.prototype.gt=X.prototype.Zf;X.prototype.$f=function(a){return Gg(this,a,"gte")};X.prototype.gte=X.prototype.$f;X.prototype.match=function(a){return Gg(this,a,"match")};X.prototype.match=X.prototype.match;X.prototype.Df=function(a,b){return Gg(this,[a,b],"between")};X.prototype.between=X.prototype.Df;
X.prototype.ag=function(a){return Gg(this,a,"in")};X.prototype["in"]=X.prototype.ag;X.prototype.lg=function(){return this.Na(null)};X.prototype.isNull=X.prototype.lg;X.prototype.kg=function(){return this.$e(null)};X.prototype.isNotNull=X.prototype.kg;X.prototype.rc=function(a){return new X(this.S,this.w,this.Te,this.Re,this.uf,a)};X.prototype.as=X.prototype.rc;function rk(a){this.g=a;this.Fd=new Lc;this.je=new Lc;this.bf=new Lc;this.Ee=x();this.h=new Lc;this.Ae=new Lc;this.jf=new Lc;this.De=new Lc;sk(this)}function sk(a){a.g.pa().forEach(function(a){var c=a.getName();a.Hb().Sd().forEach(function(d){this.bf.set(c,this.g.table(d.Ta));this.h.set(d.Ta,a);0==d.action?(this.je.set(d.Ta,d),this.jf.set(d.Ta,a)):(this.Fd.set(d.Ta,d),this.Ae.set(d.Ta,a));this.Ee.set(a.getName()+"."+d.wb,d.Ta);this.De.set(d.Ta+"."+d.Ic,a.getName())},this)},a)}
function Uc(a,b,c){if(null!=c)return 1==c?a.Fd.get(b):a.je.get(b);c=a.Fd.get(b);a=a.je.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function Bh(a,b){var c=b.get(a);return null===c?[]:c}function Dh(a,b){var c=B();b.forEach(function(a){(a=this.Ee.get(a))&&c.add(a)},a);return C(c).map(function(a){return this.g.table(a)},a)}function zh(a,b,c){return null!=c?0==c?Bh(b,a.jf):Bh(b,a.Ae):Bh(b,a.h)}
function Eh(a,b){var c=B();b.forEach(function(a){(a=this.De.get(a))&&a.forEach(function(a){c.add(a)})},a);return C(c).map(function(a){return this.g.table(a)},a)};function tk(a,b,c){this.Cg=a;this.ug=b;this.Xf=c}q("lf.schema.Constraint",tk);tk.prototype.ad=g("Cg");tk.prototype.getPrimaryKey=tk.prototype.ad;tk.prototype.Sd=g("Xf");tk.prototype.getForeignKeys=tk.prototype.Sd;function uk(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new D(540,c);this.Ce=b;this.wb=a.local;this.Ta=d[0];this.Ic=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Y(a){vk(a);this.Nd=Od();this.w=a;this.J=x();this.wd=B();this.oc=B();this.ld=B();this.Ea=null;this.sa=x();this.pd=!1;this.zb=[]}q("lf.schema.TableBuilder",Y);function wk(a){this.name=a.name;this.qb=a.order;this.autoIncrement=a.autoIncrement}var xk=B([0,6]);function vk(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new D(502,a);}function yk(a,b){if(b==a.w)throw new D(546,b);if(a.J.has(b)||a.sa.has(b)||a.oc.has(b))throw new D(503,a.w+"."+b);}
function zk(a,b){var c=!1;b.forEach(function(a){var b=this.J.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new D(504);},a);if(c&&1<b.length)throw new D(505);}function Ak(a){if(null!==a.Ea){var b=a.sa.get(a.Ea).map(function(a){return a.name}),c=0;if(a.zb.some(function(a,e){c=e;return-1!=b.indexOf(a.wb)},a))throw new D(543,a.zb[c].name);}}
function Bk(a){if(null!==a.Ea){var b=function(a){return a.name},c=JSON.stringify(a.sa.get(a.Ea).map(b));a.sa.forEach(function(a,e){if(e!=this.Ea){var f=a.map(b);if(JSON.stringify(f)==c)throw new D(544,this.w+"."+e);}},a)}}function Ck(a){null===a.Ea||a.sa.get(a.Ea).forEach(function(a){if(this.ld.has(a.name))throw new D(545,this.w+"."+a.name);},a)}Y.prototype.wf=function(a,b){vk(a);yk(this,a);this.J.set(a,b);xk.has(b)&&this.xe([a]);return this};Y.prototype.addColumn=Y.prototype.wf;
Y.prototype.yf=function(a,b){var c=this.w;this.Ea="pk"+(c[0].toUpperCase()+c.substring(1));vk(this.Ea);yk(this,this.Ea);c=Dk(this,a,!0,void 0,b);zk(this,c);1==c.length&&this.wd.add(c[0].name);this.oc.add(this.Ea);this.sa.set(this.Ea,c);return this};Y.prototype.addPrimaryKey=Y.prototype.yf;
Y.prototype.xf=function(a,b){vk(a);yk(this,a);var c=new uk(b,this.w,a);p(c.action)||(c.action=0);p(c.timing)||(c.timing=0);if(1==c.action&&1==c.timing)throw new D(506);if(!this.J.has(c.wb))throw new D(540,a);this.zb.push(c);this.we(a,[c.wb],this.wd.has(c.wb));return this};Y.prototype.addForeignKey=Y.prototype.xf;Y.prototype.zf=function(a,b){vk(a);yk(this,a);var c=Dk(this,b,!0);1==c.length&&(this.wd.add(c[0].name),Ek(this,c[0].name));this.sa.set(a,c);this.oc.add(a);return this};
Y.prototype.addUnique=Y.prototype.zf;function Ek(a,b){a.zb.forEach(function(a){a.wb==b&&this.oc.add(a.name.split(".")[1])},a)}Y.prototype.xe=function(a){Dk(this,a,!1).forEach(function(a){this.ld.add(a.name)},this);return this};Y.prototype.addNullable=Y.prototype.xe;Y.prototype.we=function(a,b,c,d){vk(a);yk(this,a);b=Dk(this,b,!0,d);c&&this.oc.add(a);this.sa.set(a,b);return this};Y.prototype.addIndex=Y.prototype.we;Y.prototype.Eb=ba("pd");Y.prototype.persistentIndex=Y.prototype.Eb;
Y.prototype.Ab=function(){Ak(this);Bk(this);Ck(this);return new (Fk(this))};Y.prototype.getSchema=Y.prototype.Ab;function Dk(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new wk({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new wk(a)});f.forEach(function(a){if(!this.J.has(a.name))throw new D(508,this.w,a.name);if(c){var b=this.J.get(a.name);if(0==b||6==b)throw new D(509,this.w,a.name);}},a);return f}
function Fk(a){function b(){function b(c){return a.sa.get(c).map(function(a){return{ba:this[a.name],qb:a.qb,autoIncrement:a.autoIncrement}},this)}var d=Ub(a.J).map(function(b){this[b]=new X(this,b,a.wd.has(b),a.ld.has(b),a.J.get(b));return this[b]},this),e=Ub(a.sa).map(function(d){return new Ig(a.w,d,a.oc.has(d),b.call(this,d))},this);Q.call(this,a.w,d,e,a.pd);var f=null===a.Ea?null:new Ig(a.w,a.Ea,!0,b.call(this,a.Ea)),h=d.filter(function(b){return!a.ld.has(b.getName())});this.If=new tk(f,h,a.zb);
this.mf=Gk(a,d,e)}r(b,Q);b.prototype.yb=function(a){return new this.mf(Wb++,a)};b.prototype.createRow=b.prototype.yb;b.prototype.kb=function(a){var b={};this.lb().forEach(function(e){var f=e.getName();e=e.H();var h=a.value[f];if(0==e)if(e=h,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);for(var h=new ArrayBuffer(e.length/2),k=new Uint8Array(h),n=0,A=0;n<e.length;n+=2)k[A++]=parseInt(e.substr(n,2),16);e=h}else e=null;else e=2==e?null!=h?new Date(h):null:h;b[f]=e},this);return new this.mf(a.id,b)};b.prototype.deserializeRow=
b.prototype.kb;b.prototype.Hb=g("If");b.prototype.getConstraint=b.prototype.Hb;return b}
function Gk(a,b,c){function d(a,d){this.J=b;this.sa=c;Vb.call(this,a,d)}r(d,Vb);d.prototype.Ge=function(){var a={};this.J.forEach(function(b){a[b.getName()]=b.ic()?null:Kc[b.H()]});return a};d.prototype.tf=function(){var a={};this.J.forEach(function(b){var c=b.getName();b=b.H();var d=this.l[c];a[c]=0==b?null!=d?Zb(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.J.get(a.getName()),c=this.Nd.Ue.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.ba)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.j();a=1==a.f.length?e(a.f[0].ba):f(a.f);h[b]=a});d.prototype.nb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.l):null};return d};function Hk(a,b){this.g=new Z(a,b);this.ub=x();this.yc=!1;this.i=null}q("lf.schema.Builder",Hk);function Ik(a,b){b.zb.forEach(function(a){var d=a.Ta;if(!this.ub.has(d))throw new D(536,a.name);var d=this.ub.get(d).Ab(),e=a.Ic;if(!d.hasOwnProperty(e))throw new D(537,a.name);if(b.Ab()[a.wb].H()!=d[e].H())throw new D(538,a.name);if(!d[e].Cc())throw new D(539,a.name);},a)}
Hk.prototype.Hf=function(a){a.zb.forEach(function(a){this.ub.get(a.Ta).zb.forEach(function(c){if(c.wb==a.Ic)throw new D(534,a.name);},this)},this)};function Jk(a){a.yc||(a.ub.forEach(function(a){Ik(this,a);a=a.Ab();this.g.L.set(a.getName(),a)},a),y(a.ub).forEach(a.Hf,a),Kk(a),a.ub.clear(),a.yc=!0)}function Lk(a,b,c){b.te||(b.te=!0,b.be=!0,b.He.forEach(function(a){a=c.get(a);if(!a.te)Lk(this,a,c);else if(a.be&&b!=a)throw new D(533);},a));b.be=!1}
function Kk(a){var b=x();a.g.L.forEach(function(a,d){b.set(d,new Mk(d))},a);a.ub.forEach(function(a,d){a.zb.forEach(function(a){b.get(a.Ta).He.add(d)})});y(b).forEach(function(a){Lk(this,a,b)},a)}function Mk(a){this.be=this.te=!1;this.He=B();this.nc=a}Hk.prototype.Ab=function(){this.yc||Jk(this);return this.g};Hk.prototype.getSchema=Hk.prototype.Ab;Hk.prototype.Le=function(){var a=new ic("ns_"+this.g.name()),b=Rj(),c=null;b.kd(a)?c=b.b(a):(c=new Pj,b.sb(a,c));return c};Hk.prototype.getGlobal=Hk.prototype.Le;
Hk.prototype.connect=function(a){if(null!==this.i&&this.i.gd)throw new D(113);if(null===this.i){var b=this.Le();b.kd(pc)||b.sb(pc,this.Ab());this.i=new W(b)}return this.i.Da(a)};Hk.prototype.connect=Hk.prototype.connect;Hk.prototype.Lf=function(a){if(this.ub.has(a))throw new D(503,a);if(this.yc)throw new D(535);this.ub.set(a,new Y(a));return this.ub.get(a)};Hk.prototype.createTable=Hk.prototype.Lf;Hk.prototype.ne=function(a){if(this.yc)throw new D(535);this.g.ne(a);return this};
Hk.prototype.setPragma=Hk.prototype.ne;function Z(a,b){this.w=a;this.ac=b;this.L=x();this.ff={Rf:!1}}q("lf.schema.DatabaseSchema",Z);Z.prototype.name=g("w");Z.prototype.name=Z.prototype.name;Z.prototype.version=g("ac");Z.prototype.version=Z.prototype.version;Z.prototype.pa=function(){return y(this.L)};Z.prototype.tables=Z.prototype.pa;Z.prototype.table=function(a){if(!this.L.has(a))throw new D(101,a);return this.L.get(a)};Z.prototype.table=Z.prototype.table;
Z.prototype.info=function(){this.Qe||(this.Qe=new rk(this));return this.Qe};Z.prototype.ef=g("ff");Z.prototype.pragma=Z.prototype.ef;Z.prototype.ne=ba("ff");q("lf.schema.create",function(a,b){return new Hk(a,b)});u.prototype.catch=u.prototype.qe;u.prototype["catch"]=u.prototype.catch;
try{if(module){module.exports=lf;}}catch(e){}}.bind(window))();
//# sourceMappingURL=lovefield.es6.js.map
