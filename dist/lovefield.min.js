/*
  Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
*/
'use strict';var aa=window,ba=Object,ca=Function,da=document,ea=Math,e=Array,fa=Error,ga=parseInt;function ha(a,b){return a.exec=b}function ia(a,b){return a.getName=b}function ja(a,b){return a.remove=b}function ka(a,b){return a.values=b}function la(a,b){return a.clear=b}function ma(a,b){return a.bind=b}function f(a,b){return a.toString=b}function na(a,b){return a.table=b}function oa(a,b){return a.next=b}function pa(a,b){return a.close=b}function qa(a,b){return a.clone=b}
function ra(a,b){return a.child=b}function sa(a,b){return a.onerror=b}function ta(a,b){return a.value=b}function ua(a,b){return a.getPriority=b}function va(a,b){return a.subscribe=b}function wa(a,b){return a.name=b}function xa(a,b){return a.length=b}function ya(a,b){return a.onsuccess=b}function za(a,b){return a.update=b}
var Aa="context",Ba="filter",Ca="version",Da="getParent",Fa="shift",Ga="exec",Ha="replace",Ia="concat",Ja="objectStoreNames",h="getName",m="remove",Ka="autoIncrement",n="forEach",La="values",Ma="clear",p="bind",Na="getTime",r="toString",Oa="global",Pa="propertyIsEnumerable",Qa="create",t="table",Ra="compare",Sa="result",Ta="index",Ua="next",Va="split",Wa="hasOwnProperty",Xa="close",Ya="clone",Za="setImmediate",$a="transaction",ab="child",bb="rows",u="contains",v="apply",w="push",cb="reject",db="stringify",
eb="reduce",fb="addAll",x="slice",y="value",gb="item",hb="objectStore",z="indexOf",ib="getPriority",jb="delete",kb="name",A="length",B="prototype",D="then",E="entries",lb="removeChild",mb="target",F="call",nb="resolve",ob="some",pb="sort",qb="every",rb="update",G="splice",H="join",sb="unshift";function tb(){return function(){}}function ub(a){return function(b){this[a]=b}}function I(a){return function(){return this[a]}}function vb(a){return function(){return a}}var J,wb=this;
function xb(a){return void 0!==a}function K(a,b,c){a=a[Va](".");c=c||wb;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a[A]&&(d=a[Fa]());)!a[A]&&xb(b)?c[d]=b:c=c[d]?c[d]:c[d]={}}function yb(){}function zb(a){a.be=function(){return a.rf?a.rf:a.rf=new a}}
function Ab(a){var b=typeof a;if("object"==b)if(a){if(a instanceof e)return"array";if(a instanceof ba)return b;var c=ba[B][r][F](a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a[A]&&"undefined"!=typeof a[G]&&"undefined"!=typeof a[Pa]&&!a[Pa]("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a[F]&&"undefined"!=typeof a[Pa]&&!a[Pa]("call"))return"function"}else return"null";else if("function"==b&&"undefined"==typeof a[F])return"object";return b}
function Bb(a){return null===a}function Cb(a){return null!=a}function Db(a){var b=Ab(a);return"array"==b||"object"==b&&"number"==typeof a[A]}function Eb(a){return"string"==typeof a}function Fb(a){return"function"==Ab(a)}function Gb(a){return a[Hb]||(a[Hb]=++Ib)}var Hb="closure_uid_"+(1E9*ea.random()>>>0),Ib=0;function Jb(a,b,c){return a[F][v](a[p],arguments)}
function Kb(a,b,c){if(!a)throw fa();if(2<arguments[A]){var d=e[B][x][F](arguments,2);return function(){var c=e[B][x][F](arguments);e[B][sb][v](c,d);return a[v](b,c)}}return function(){return a[v](b,arguments)}}function L(a,b,c){L=ca[B][p]&&-1!=ca[B][p][r]()[z]("native code")?Jb:Kb;return L[v](null,arguments)}function Lb(a,b){var c=e[B][x][F](arguments,1);return function(){var b=c[x]();b[w][v](b,arguments);return a[v](this,b)}}
function M(a,b){function c(){}c.prototype=b[B];a.Xa=b[B];a.prototype=new c;a[B].constructor=a;a.mk=function(a,c,k){for(var l=e(arguments[A]-2),q=2;q<arguments[A];q++)l[q-2]=arguments[q];return b[B][c][v](a,l)}}ma(ca[B],ca[B][p]||function(a,b){if(1<arguments[A]){var c=e[B][x][F](arguments,1);c[sb](this,a);return L[v](null,c)}return L(this,a)});function Mb(a){if(fa.captureStackTrace)fa.captureStackTrace(this,Mb);else{var b=fa().stack;b&&(this.stack=b)}a&&(this.message=String(a))}M(Mb,fa);wa(Mb[B],"CustomError");function Nb(a,b){for(var c=a[Va]("%s"),d="",g=e[B][x][F](arguments,1);g[A]&&1<c[A];)d+=c[Fa]()+g[Fa]();return d+c[H]("%s")};function Ob(a,b){b[sb](a);Mb[F](this,Nb[v](null,b));b[Fa]()}M(Ob,Mb);wa(Ob[B],"AssertionError");function Pb(a,b,c,d){var g="Assertion failed";if(c)var g=g+(": "+c),k=d;else a&&(g+=": "+a,k=b);throw new Ob(""+g,k||[]);}function N(a,b,c){a||Pb("",null,b,e[B][x][F](arguments,2));return a}function Qb(a,b){throw new Ob("Failure"+(a?": "+a:""),e[B][x][F](arguments,1));}function Rb(a,b,c){Fb(a)||Pb("Expected function but got %s: %s.",[Ab(a),a],b,e[B][x][F](arguments,2));return a};function Sb(a,b,c){this.Ef=c;this.uh=a;this.Qj=b;this.sd=0;this.kd=null}Sb[B].get=function(){var a;0<this.sd?(this.sd--,a=this.kd,this.kd=a[Ua],oa(a,null)):a=this.uh();return a};Sb[B].put=function(a){this.Qj(a);this.sd<this.Ef&&(this.sd++,oa(a,this.kd),this.kd=a)};var Tb=e[B],Ub=Tb[z]?function(a,b,c){N(null!=a[A]);return Tb[z][F](a,b,c)}:function(a,b,c){c=null==c?0:0>c?ea.max(0,a[A]+c):c;if(Eb(a))return Eb(b)&&1==b[A]?a[z](b,c):-1;for(;c<a[A];c++)if(c in a&&a[c]===b)return c;return-1},Vb=Tb[n]?function(a,b,c){N(null!=a[A]);Tb[n][F](a,b,c)}:function(a,b,c){for(var d=a[A],g=Eb(a)?a[Va](""):a,k=0;k<d;k++)k in g&&b[F](c,g[k],k,a)},Wb=Tb.map?function(a,b,c){N(null!=a[A]);return Tb.map[F](a,b,c)}:function(a,b,c){for(var d=a[A],g=e(d),k=Eb(a)?a[Va](""):a,l=0;l<d;l++)l in
k&&(g[l]=b[F](c,k[l],l,a));return g},Xb=Tb[eb]?function(a,b,c,d){N(null!=a[A]);d&&(b=L(b,d));return Tb[eb][F](a,b,c)}:function(a,b,c,d){var g=c;Vb(a,function(c,l){g=b[F](d,g,c,l,a)});return g},Yb=Tb[ob]?function(a,b,c){N(null!=a[A]);return Tb[ob][F](a,b,c)}:function(a,b,c){for(var d=a[A],g=Eb(a)?a[Va](""):a,k=0;k<d;k++)if(k in g&&b[F](c,g[k],k,a))return!0;return!1},Zb=Tb[qb]?function(a,b,c){N(null!=a[A]);return Tb[qb][F](a,b,c)}:function(a,b,c){for(var d=a[A],g=Eb(a)?a[Va](""):a,k=0;k<d;k++)if(k in
g&&!b[F](c,g[k],k,a))return!1;return!0};function $b(a,b){N(null!=a[A]);return 1==Tb[G][F](a,b,1)[A]}function ac(a,b,c){a:{for(var d=a[A],g=Eb(a)?a[Va](""):a,k=0;k<d;k++)if(k in g&&b[F](c,g[k],k,a)){b=k;break a}b=-1}return 0<=b?($b(a,b),!0):!1}function bc(a){var b=a[A];if(0<b){for(var c=e(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function cc(a,b){for(var c=1;c<arguments[A];c++){var d=arguments[c];if(Db(d)){var g=a[A]||0,k=d[A]||0;xa(a,g+k);for(var l=0;l<k;l++)a[g+l]=d[l]}else a[w](d)}}
function dc(a,b,c,d){N(null!=a[A]);return Tb[G][v](a,ec(arguments,1))}function ec(a,b,c){N(null!=a[A]);return 2>=arguments[A]?Tb[x][F](a,b):Tb[x][F](a,b,c)}function fc(a,b,c,d,g){for(var k=0,l=a[A],q;k<l;){var C=k+l>>1,Ea;Ea=c?b[F](g,a[C],C,a):b(d,a[C]);0<Ea?k=C+1:(l=C,q=!Ea)}return q?k:~k}function gc(a,b){return a>b?1:a<b?-1:0}function hc(a,b,c){c=fc(a,c||gc,!1,b);return 0>c?(dc(a,-(c+1),0,b),!0):!1}function ic(a,b){for(var c=[],d=0;d<b;d++)c[d]=a;return c}
function jc(a){for(var b=[],c=0;c<arguments[A];c++){var d=arguments[c];if("array"==Ab(d))for(var g=0;g<d[A];g+=8192)for(var k=ec(d,g,g+8192),k=jc[v](null,k),l=0;l<k[A];l++)b[w](k[l]);else b[w](d)}return b};function kc(a,b,c){for(var d in a)b[F](c,a[d],d,a)}function lc(a,b,c){for(var d in a)if(b[F](c,a[d],d,a))return!0;return!1}function mc(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function nc(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b};var oc;a:{var pc=wb.navigator;if(pc){var qc=pc.userAgent;if(qc){oc=qc;break a}}oc=""};function rc(a){wb.setTimeout(function(){throw a;},0)}var sc;
function tc(){var a=wb.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof aa&&aa.postMessage&&aa.addEventListener&&-1==oc[z]("Presto")&&(a=function(){var a=da.createElement("IFRAME");a.style.display="none";a.src="";da.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a[Xa]();var c="callImmediate"+ea.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=L(function(a){if(("*"==d||a.origin==d)&&a.data==c)this.port1.onmessage()},
this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&-1==oc[z]("Edge")&&-1==oc[z]("Trident")&&-1==oc[z]("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(xb(c[Ua])){c=c[Ua];var a=c.Ve;c.Ve=null;a()}};return function(a){oa(d,{Ve:a});d=d[Ua];b.port2.postMessage(0)}}return"undefined"!==typeof da&&"onreadystatechange"in da.createElement("SCRIPT")?function(a){var b=da.createElement("SCRIPT");b.onreadystatechange=
function(){b.onreadystatechange=null;b.parentNode[lb](b);b=null;a();a=null};da.documentElement.appendChild(b)}:function(a){wb.setTimeout(a,0)}};function uc(){this.Gd=this.Sb=null}var wc=new Sb(function(){return new vc},function(a){a.reset()},100);uc[B].add=function(a,b){var c=this.Ii();c.set(a,b);this.Gd?oa(this.Gd,c):(N(!this.Sb),this.Sb=c);this.Gd=c};ja(uc[B],function(){var a=null;this.Sb&&(a=this.Sb,this.Sb=this.Sb[Ua],this.Sb||(this.Gd=null),oa(a,null));return a});uc[B].Rj=function(a){wc.put(a)};uc[B].Ii=function(){return wc.get()};function vc(){this.scope=this.Vd=null;oa(this,null)}
vc[B].set=function(a,b){this.Vd=a;this.scope=b;oa(this,null)};vc[B].reset=function(){this.scope=this.Vd=null;oa(this,null)};function xc(a,b){yc||zc();Ac||(yc(),Ac=!0);Bc.add(a,b)}var yc;function zc(){if(wb.Promise&&wb.Promise[nb]){var a=wb.Promise[nb]();yc=function(){a[D](Cc)}}else yc=function(){var a=Cc;if(!Fb(wb[Za])||wb.Window&&wb.Window[B]&&wb.Window[B][Za]==wb[Za])sc||(sc=tc()),sc(a);else wb[Za](a)}}var Ac=!1,Bc=new uc;[][w](function(){Ac=!1;Bc=new uc});function Cc(){for(var a=null;a=Bc[m]();){try{a.Vd[F](a.scope)}catch(b){rc(b)}Bc.Rj(a)}Ac=!1};function O(a,b){this.va=0;this.Wf=void 0;this.Qc=this.Wb=this.F=null;this.jd=this.Ud=!1;if(a==Dc)this.gc(2,b);else try{var c=this;a[F](b,function(a){c.gc(2,a)},function(a){if(!(a instanceof Ec))try{if(a instanceof fa)throw a;throw fa("Promise rejected.");}catch(b){}c.gc(3,a)})}catch(d){this.gc(3,d)}}function Fc(){ra(this,null);this.context=this.ec=this.Ib=null;oa(this,null);this.Jd=!1}Fc[B].reset=function(){ra(this,null);this.context=this.ec=this.Ib=null;this.Jd=!1};
var Gc=new Sb(function(){return new Fc},function(a){a.reset()},100);function Hc(a,b,c){var d=Gc.get();d.Ib=a;d.ec=b;d.context=c;return d}function Dc(){}function Ic(a){return new O(Dc,a)}function Jc(a){return new O(function(b,c){c(a)})}function Kc(a){return new O(function(b,c){var d=a[A],g=[];if(d)for(var k=function(a,c){d--;g[a]=c;0==d&&b(g)},l=function(a){c(a)},q=0,C;C=a[q];q++)Lc(C,Lb(k,q),l);else b(g)})}function Mc(){var a,b,c=new O(function(c,g){a=c;b=g});return new Nc(c,a,b)}
O[B].then=function(a,b,c){null!=a&&Rb(a,"opt_onFulfilled should be a function.");null!=b&&Rb(b,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?");return this.Je(Fb(a)?a:null,Fb(b)?b:null,c)};O[B].then=O[B][D];O[B].$goog_Thenable=!0;J=O[B];
J.dk=function(a,b,c){null!=a&&Rb(a,"opt_onFulfilled should be a function.");null!=b&&Rb(b,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?");this.Ie(Hc(a||yb,b||null,c))};function Lc(a,b,c,d){a instanceof O?a.dk(b,c,d):a[D](b,c,d)}J.jg=function(a,b){return this.Je(null,a,b)};J.Ie=function(a){this.Ti()||2!=this.va&&3!=this.va||this.Zf();this.Fj(a)};
J.Je=function(a,b,c){var d=Hc(null,null,null);ra(d,new O(function(g,k){d.Ib=a?function(b){try{var d=a[F](c,b);g(d)}catch(C){k(C)}}:g;d.ec=b?function(a){try{var d=b[F](c,a);!xb(d)&&a instanceof Ec?k(a):g(d)}catch(C){k(C)}}:k}));d[ab].F=this;this.Ie(d);return d[ab]};J.og=function(a){N(1==this.va);this.va=0;this.gc(2,a)};J.pg=function(a){N(1==this.va);this.va=0;this.gc(3,a)};
J.gc=function(a,b){if(0==this.va){if(this==b)a=3,b=new TypeError("Promise cannot resolve to itself");else{var c;if(b)try{c=!!b.$goog_Thenable}catch(d){c=!1}else c=!1;if(c){this.va=1;Lc(b,this.og,this.pg,this);return}c=typeof b;if("object"==c&&null!=b||"function"==c)try{var g=b[D];if(Fb(g)){this.gk(b,g);return}}catch(k){a=3,b=k}}this.Wf=b;this.va=a;this.F=null;this.Zf();3!=a||b instanceof Ec||Oc(this,b)}};
J.gk=function(a,b){function c(a){k||(k=!0,g.pg(a))}function d(a){k||(k=!0,g.og(a))}this.va=1;var g=this,k=!1;try{b[F](a,d,c)}catch(l){c(l)}};J.Zf=function(){this.Ud||(this.Ud=!0,xc(this.Qh,this))};J.Ti=function(){return!!this.Wb};J.Fj=function(a){N(null!=a.Ib);this.Qc?oa(this.Qc,a):this.Wb=a;this.Qc=a};J.xj=function(){var a=null;this.Wb&&(a=this.Wb,this.Wb=a[Ua],oa(a,null));this.Wb||(this.Qc=null);null!=a&&N(null!=a.Ib);return a};
J.Qh=function(){for(var a=null;a=this.xj();)this.Ph(a,this.va,this.Wf);this.Ud=!1};J.Ph=function(a,b,c){3==b&&a.ec&&!a.Jd&&this.Oj();if(a[ab])a[ab].F=null,Pc(a,b,c);else try{a.Jd?a.Ib[F](a[Aa]):Pc(a,b,c)}catch(d){Qc[F](null,d)}Gc.put(a)};function Pc(a,b,c){2==b?a.Ib[F](a[Aa],c):a.ec&&a.ec[F](a[Aa],c)}J.Dg=tb();J.Oj=function(){var a;for(a=this;a&&a.jd;a=a.F)a.jd=!1};function Oc(a,b){a.jd=!0;xc(function(){a.jd&&(a.Dg(b),Qc[F](null,b))})}var Qc=rc;function Ec(a){Mb[F](this,a)}M(Ec,Mb);wa(Ec[B],"cancel");
function Nc(a,b,c){this.ua=a;this.resolve=b;this.reject=c};
function Rc(a,b){this.ra=a;this.Kb=b||this.$e()}var Sc=0;J=Rc[B];J.id=I("ra");J.Lg=ub("ra");J.B=I("Kb");J.$e=function(){return{}};J.kg=I("Kb");J.Wa=function(){return{id:this.ra,value:this.kg()}};J.Cc=function(a){return"#"==a.substr(-1)?this.ra:null};function Tc(a){return new Rc(a.id,a[y])}function Uc(a){return new Rc(Sc++,a||{})}function Vc(a){if(null==a)return"";a=new Uint8Array(a);for(var b="",c=0;c<a[A];++c)var d=a[c][r](16),b=b+(2>d[A]?"0"+d:d);return b};
function Wc(a){this.type=a}function Xc(a){Rc[F](this,-1,a)}M(Xc,Rc);


function Yc(a,b){this.Qa=a;this.lg=b;this.ia=Mc()}J=Yc[B];J.ti=I("Qa");J.ba=function(){return(0==this.lg?Ic():this.jj())[D](L(function(){this.Qa.ba()},this))};J.jj=function(){this.kj();this.ij();return this.ia.ua};
J.kj=function(){var a=this.Qa.gf();a.G()[n](function(b){var c=this.Qa.Z().get(b),c=this.V(c[h](),L(c.Yb,c));b=a.get(b);var d=b.$d().c().map(function(a){return a.id()});0<d[A]&&c[m](d).jg(this.ie,this);b=b.ce().c().map(function(a){return a[1]})[Ia](b.Xd().c());c.put(b).jg(this.ie,this)},this)};J.ij=function(){this.Qa.pi()[n](function(a){var b=this.V(a[h](),Tc),c;b.get([-1])[D](function(a){c=a;return b[m]([])})[D](function(){b.put(c);b.put(a.Wa())},L(this.ie,this))},this)};J.ie=function(a){this.ia[cb](a)};function Zc(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var g=a[A],k=b[A],l=[],q=0;q<g+1;q++)l[q]=[],l[q][0]=0;for(var C=0;C<k+1;C++)l[0][C]=0;for(q=1;q<=g;q++)for(C=1;C<=k;C++)c(a[q-1],b[C-1])?l[q][C]=l[q-1][C-1]+1:l[q][C]=ea.max(l[q-1][C],l[q][C-1]);for(var Ea=[],q=g,C=k;0<q&&0<C;)c(a[q-1],b[C-1])?(Ea[sb](d(q-1,C-1)),q--,C--):l[q-1][C]>l[q][C-1]?q--:C--;return Ea}function $c(a){return Xb(arguments,function(a,c){return a+c},0)}
function ad(a){return $c[v](null,arguments)/arguments[A]}function bd(a){var b=arguments[A];if(2>b)return 0;var c=ad[v](null,arguments);return $c[v](null,Wb(arguments,function(a){return ea.pow(a-c,2)}))/(b-1)}function cd(a){return ea.sqrt(bd[v](null,arguments))};var dd="StopIteration"in wb?wb.StopIteration:{message:"StopIteration",stack:""};function ed(){}oa(ed[B],function(){throw dd;});ed[B].qb=function(){return this};function fd(a){if(a instanceof ed)return a;if("function"==typeof a.qb)return a.qb(!1);if(Db(a)){var b=0,c=new ed;oa(c,function(){for(;;){if(b>=a[A])throw dd;if(b in a)return a[b++];b++}});return c}throw fa("Not implemented");}
function gd(a,b,c){if(Db(a))try{Vb(a,b,c)}catch(d){if(d!==dd)throw d;}else{a=fd(a);try{for(;;)b[F](c,a[Ua](),void 0,a)}catch(g){if(g!==dd)throw g;}}}function hd(a){if(Yb(arguments,function(a){return!a[A]})||!arguments[A])return new ed;var b=new ed,c=arguments,d=ic(0,c[A]);oa(b,function(){if(d){for(var a=Wb(d,function(a,b){return c[b][a]}),b=d[A]-1;0<=b;b--){N(d);if(d[b]<c[b][A]-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw dd;});return b};function P(a,b){this.f={};this.b=[];this.pb=this.R=0;var c=arguments[A];if(1<c){if(c%2)throw fa("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this[fb](a)}J=P[B];J.Y=I("R");J.c=function(){this.pc();for(var a=[],b=0;b<this.b[A];b++)a[w](this.f[this.b[b]]);return a};J.G=function(){this.pc();return this.b[Ia]()};J.s=function(a){return id(this.f,a)};J.Uc=function(a){for(var b=0;b<this.b[A];b++){var c=this.b[b];if(id(this.f,c)&&this.f[c]==a)return!0}return!1};
J.tc=function(a,b){if(this===a)return!0;if(this.R!=a.Y())return!1;var c=b||jd;this.pc();for(var d,g=0;d=this.b[g];g++)if(!c(this.get(d),a.get(d)))return!1;return!0};function jd(a,b){return a===b}J.ya=function(){return 0==this.R};la(J,function(){this.f={};xa(this.b,0);this.pb=this.R=0});ja(J,function(a){return id(this.f,a)?(delete this.f[a],this.R--,this.pb++,this.b[A]>2*this.R&&this.pc(),!0):!1});
J.pc=function(){if(this.R!=this.b[A]){for(var a=0,b=0;a<this.b[A];){var c=this.b[a];id(this.f,c)&&(this.b[b++]=c);a++}xa(this.b,b)}if(this.R!=this.b[A]){for(var d={},b=a=0;a<this.b[A];)c=this.b[a],id(d,c)||(this.b[b++]=c,d[c]=1),a++;xa(this.b,b)}};J.get=function(a,b){return id(this.f,a)?this.f[a]:b};J.set=function(a,b){id(this.f,a)||(this.R++,this.b[w](a),this.pb++);this.f[a]=b};J.addAll=function(a){var b;a instanceof P?(b=a.G(),a=a.c()):(b=nc(a),a=mc(a));for(var c=0;c<b[A];c++)this.set(b[c],a[c])};
J.forEach=function(a,b){for(var c=this.G(),d=0;d<c[A];d++){var g=c[d],k=this.get(g);a[F](b,k,g,this)}};qa(J,function(){return new P(this)});J.ui=function(){return this.qb(!0)};J.Ki=function(){return this.qb(!1)};J.qb=function(a){this.pc();var b=0,c=this.pb,d=this,g=new ed;oa(g,function(){if(c!=d.pb)throw fa("The map has changed since the iterator was created");if(b>=d.b[A])throw dd;var g=d.b[b++];return a?g:d.f[g]});return g};function id(a,b){return ba[B][Wa][F](a,b)};
function kd(a){this.Sj=a}f(kd[B],I("Sj"));var ld=new kd("backstore"),md=new kd("cache"),nd=new kd("indexstore"),od=new kd("engine"),pd=new kd("runner"),qd=new kd("observerregistry"),rd=new kd("schema");
function sd(a){if("function"==typeof a.Y)a=a.Y();else if(Db(a)||Eb(a))a=a[A];else{var b=0,c;for(c in a)b++;a=b}return a}function td(a){if("function"==typeof a.c)return a.c();if(Eb(a))return a[Va]("");if(Db(a)){for(var b=[],c=a[A],d=0;d<c;d++)b[w](a[d]);return b}return mc(a)}
function ud(a,b,c){if("function"==typeof a[qb])return a[qb](b,c);if(Db(a)||Eb(a))return Zb(a,b,c);var d;if("function"==typeof a.G)d=a.G();else if("function"!=typeof a.c)if(Db(a)||Eb(a)){d=[];for(var g=a[A],k=0;k<g;k++)d[w](k)}else d=nc(a);else d=void 0;for(var g=td(a),k=g[A],l=0;l<k;l++)if(!b[F](c,g[l],d&&d[l],a))return!1;return!0};function Q(a){this.f=new P;a&&this[fb](a)}function vd(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+Gb(a):b.substr(0,1)+a}J=Q[B];J.Y=function(){return this.f.Y()};J.add=function(a){this.f.set(vd(a),a)};J.addAll=function(a){a=td(a);for(var b=a[A],c=0;c<b;c++)this.add(a[c])};J.Tf=function(a){a=td(a);for(var b=a[A],c=0;c<b;c++)this[m](a[c])};ja(J,function(a){return this.f[m](vd(a))});la(J,function(){this.f[Ma]()});J.ya=function(){return this.f.ya()};J.contains=function(a){return this.f.s(vd(a))};
J.nh=function(a){return ud(a,this[u],this)};J.zh=function(a){var b=this[Ya]();b.Tf(a);return b};J.c=function(){return this.f.c()};qa(J,function(){return new Q(this)});J.tc=function(a){return this.Y()==sd(a)&&this.cj(a)};
J.cj=function(a){var b=sd(a);if(this.Y()>b)return!1;!(a instanceof Q)&&5<b&&(a=new Q(a));return ud(this,function(b){var d=a;if("function"==typeof d[u])b=d[u](b);else if("function"==typeof d.Uc)b=d.Uc(b);else if(Db(d)||Eb(d))b=0<=Ub(d,b);else a:{for(var g in d)if(d[g]==b){b=!0;break a}b=!1}return b})};J.qb=function(){return this.f.qb(!1)};
function wd(a,b){this.ra=a;this.Kb=b||{}}function xd(a){var b=new Q;a[n](function(a){b.add(a>>9)});return b.c()}J=wd[B];J.ga=I("ra");J.fd=I("Kb");J.cg=function(a){a[n](function(a){this.Kb[a.id()]=a.Wa()},this)};J.Mj=function(a){a[n](function(a){var c=this.Kb;a in c&&delete c[a]},this)};J.Wa=function(){return{id:this.ra,value:JSON[db](this.Kb)}};function yd(a){return new wd(a.id,JSON.parse(a[y]))};

function zd(a,b,c){this.O=a;this.Bb=b;this.Xf=c}J=zd[B];J.get=function(a){return 0==a[A]?this.Zd():this.yi(a)[D](L(function(b){return a.map(function(a){var d=b.get(a>>9);N(d,"Containing page is empty");return this.Bb(d.fd()[a])},this)},this))};J.yi=function(a){var b=new P,c=Mc();a=xd(a).map(function(a){return new O(function(c,k){var l;try{l=this.O.get(a)}catch(q){k(q);return}sa(l,k);ya(l,L(function(a){a=yd(a[mb][Sa]);b.set(a.ga(),a);c()},this))},this)},this);Kc(a)[D](function(){c[nb](b)});return c.ua};
J.Zd=function(){return new O(function(a,b){var c=[],d;try{d=this.O.openCursor()}catch(g){b(g);return}sa(d,b);ya(d,L(function(){var b=d[Sa];if(b){var g=yd(b[y]).fd(),q;for(q in g)c[w](this.Bb(g[q]));b.continue()}else a(c)},this))},this)};J.Lb=function(a){return new O(function(b,c){var d;try{d=a()}catch(g){c(g);return}ya(d,b);sa(d,c)},this)};
J.put=function(a){if(0==a[A])return Ic();var b=new P;a[n](function(a){var d;d=a.id()>>9;var g=b.get(d,null);null===g&&(g=this.Xf(this.O[kb],d));g.cg([a]);b.set(d,g)},this);a=b.c().map(function(a){return this.Lb(L(function(){return this.O.put(a.Wa())},this))},this);return Kc(a)};
ja(J,function(a){if(0==a[A])return this.Lb(L(function(){return this.O[Ma]()},this));var b=new P;a[n](function(a){var d=a>>9,g=b.get(d,null);null===g&&(g=this.Xf(this.O[kb],d));g.Mj([a]);b.set(d,g)},this);a=b.c().map(function(a){return this.Lb(L(function(){var b;a:{b=a.fd();for(var g in b){b=!1;break a}b=!0}return b?this.O[jb](a.ga()):this.O.put(a.Wa())},this))},this);return Kc(a)});function Ad(a,b,c){a=a.m(md);var d=[c<<9,(c+1<<9)-1];b=a.Ma(b,d[0],d[1]);c=new wd(c);c.cg(b);return c}
function Bd(a,b){return new wd(b)};
function Cd(){};
function Dd(a){this.la=a.m(md);this.N=a.m(nd);this.w=a.m(rd)}za(Dd[B],function(a){a[n](function(a){this.ik(a);this.hk(a)},this)});Dd[B].hk=function(a){var b=a[h]();a.$d().c()[n](function(a){this.la[m](b,[a.id()])},this);a.Xd()[n](function(a){this.la.set(b,[a])},this);a.ce()[n](function(a){this.la.set(b,[a[1]])},this)};Dd[B].ik=function(a){var b=this.w[t](a[h]());a.ni()[n](function(a){this.sg(b,a)},this)};
Dd[B].sg=function(a,b){a.Ca().map(function(a){return this.N.get(a.j())},this)[Ia]([this.N.get(a.Db())])[n](function(a){var d=null===b[1]?null:b[1].Cc(a[h]()),g=null===b[0]?null:b[0].Cc(a[h]());null===g&&null!==d?a.add(d,b[1].id()):null===g||null===d?null!==g&&null===d&&a[m](g,b[0].id()):0!=a.rc()[Ra](g,d)&&(a.add(d,b[1].id()),a[m](g,b[0].id()))})};
function R(a,b){wa(this,a);this.message=b};
function Ed(a){this.N=a.m(nd)}Ed[B].Xh=function(a,b){var c=a.bc().fe();return null===c?null:this.Wh(c,b)};Ed[B].Wh=function(a,b){var c=a.j(),d=b.Cc(c),c=this.N.get(c).get(d);return 0==c[A]?null:c[0]};Ed[B].Od=function(a,b){var c=a.bc().wi();b[n](function(a){c[n](function(b){if(null===a.B()[b[h]()])throw new R("ConstraintError","Attempted to insert NULL value to non-nullable field "+b.j());},this)},this)};
function Fd(a){this.Ya=new P;this.Da=new P;this.ab=new P;this.u=a}J=Fd[B];ia(J,I("u"));J.Xd=I("Ya");J.ce=I("Da");J.$d=I("ab");J.add=function(a){if(this.ab.s(a.id())){var b=[this.ab.get(a.id()),a];this.Da.set(a.id(),b);this.ab[m](a.id())}else this.Ya.set(a.id(),a)};J.modify=function(a){var b=a[0],c=a[1];N(b.id()==c.id(),"Row ID mismatch between old/new values.");b=b.id();this.Ya.s(b)?this.Ya.set(b,c):(this.Da.s(b)&&(a=[this.Da.get(a[0].id())[0],c]),this.Da.set(b,a))};
J.delete=function(a){if(this.Ya.s(a.id()))this.Ya[m](a.id());else if(this.Da.s(a.id())){var b=this.Da.get(a.id())[0];this.Da[m](a.id());this.ab.set(a.id(),b)}else this.ab.set(a.id(),a)};J.ni=function(){var a=[];this.Ya.c()[n](function(b){a[w]([null,b])},this);this.Da.c()[n](function(b){a[w](b)},this);this.ab.c()[n](function(b){a[w]([b,null])},this);return a};f(J,function(){return"["+this.Ya.G()[r]()+"], ["+this.Da.G()[r]()+"], ["+this.ab.G()[r]()+"]"});
J.Ci=function(){var a=new Fd(this.u);this.Ya.c()[n](function(b){a[jb](b)},this);this.ab.c()[n](function(b){a.add(b)},this);this.Da.c()[n](function(b){a.modify([b[1],b[0]])},this);return a};J.ya=function(){return this.Ya.ya()&&this.ab.ya()&&this.Da.ya()};
function Gd(a,b){this.Ja=new P;b[n](function(a){this.Ja.set(a[h](),a)},this);this.la=a.m(md);this.N=a.m(nd);this.Vc=new Ed(a);this.ld=new Dd(a);this.ve=this.Dd=!1;this.xb=new P}J=Gd[B];J.gf=I("xb");J.pi=function(){var a=[];this.xb.G().map(function(a){return this.Ja.get(a)},this)[n](function(b){b.Mb()&&(b.Ca()[n](function(b){a[w](this.N.get(b.j()))},this),a[w](this.N.get(b[h]()+".#")))},this);return a};J.Z=I("Ja");
J.ri=function(){var a=[];this.Ja.c()[n](function(b){b.Mb()&&(b.Ca()[n](function(b){a[w](b.j())}),a[w](b[h]()+".#"))});return a};J.lb=function(a,b){this.nc();this.Rc(a);this.Vc.Od(a,b);for(var c=0;c<b[A];c++)this.nd(a,null,b[c])};
J.nd=function(a,b,c){var d=a[h](),g=this.xb.get(d,null)||new Fd(d);this.xb.set(d,g);var k=[b,c];try{this.ld.sg(a,k)}catch(l){throw this.ve=!0,l;}null===b&&null!==c?(this.la.set(d,[c]),g.add(c)):null!==b&&null!==c?(this.la.set(d,[c]),g.modify(k)):null!==b&&null===c&&(this.la[m](d,[b.id()]),g[jb](b))};za(J,function(a,b){this.nc();this.Rc(a);this.Vc.Od(a,b);for(var c=0;c<b[A];c++){var d=b[c],g=this.la.get([d.id()])[0];this.nd(a,g,d)}});
J.le=function(a,b){this.nc();this.Rc(a);this.Vc.Od(a,b);for(var c=0;c<b[A];c++){var d=b[c],g=null,k=this.Vc.Xh(a,d);null!=k&&(g=this.la.get([k])[0],d.Lg(k));this.nd(a,g,d)}};ja(J,function(a,b){this.nc();this.Rc(a);for(var c=0;c<b[A];c++)this.nd(a,b[c],null)});J.ba=function(){this.nc();this.Dd=!0};J.nc=function(){N(!this.ve,"Attemptted to use journal that needs to be rolled back.");N(!this.Dd,"Attemptted to commit a terminated journal.")};
J.vb=function(){N(!this.Dd,"Attempted to rollback a terminated journal.");var a=this.xb.c().map(function(a){return a.Ci()},this);this.ld[rb](a);this.Dd=!0;this.ve=!1};J.Rc=function(a){if(!this.Ja.s(a[h]()))throw new R("ScopeError",a[h]()+" is not in the journal's scope.");};
var Hd={};K("lf.Order",Hd,void 0);Hd.DESC=0;Hd.ASC=1;
function Id(a,b,c,d){this.g=a;this.o=b;this.W=null===this.g?!1:c;this.ca=null===this.o?!1:d}J=Id[B];f(J,function(){return(this.W?"(":"[")+(null===this.g?"unbound":this.g)+", "+(null===this.o?"unbound":this.o)+(this.ca?")":"]")});J.jh=function(){if(null===this.g&&null===this.o)return[];var a=null,b=null;null===this.g||(a=new Id(null,this.g,!1,!this.W));null===this.o||(b=new Id(this.o,null,!this.ca,!1));return[a,b][Ba](function(a){return null!==a})};
J.reverse=function(){return new Id(this.o,this.g,this.ca,this.W)};J.Mf=function(a){var b=Jd(this.g,a.g,!0,this.W,a.W);if(0==b)return!0;var c=-1==b?this:a;a=1==b?this:a;return null===c.o||c.o>a.g||c.o==a.g&&!c.ca&&!a.W};function Kd(){return new Id(null,null,!1,!1)}J.contains=function(a){var b=null===this.o||a<this.o||a==this.o&&!this.ca;return(null===this.g||a>this.g||a==this.g&&!this.W)&&b};J.tc=function(a){return this.g==a.g&&this.W==a.W&&this.o==a.o&&this.ca==a.ca};
function Jd(a,b,c,d,g){function k(a){return c?a:1==a?-1:1}d=d||!1;g=g||!1;return null===a?null===b?(d?!g:g)?d?k(1):k(-1):0:k(-1):null===b?k(1):a<b?-1:a==b?(d?!g:g)?d?k(1):k(-1):0:1}function Ld(a,b){var c=Jd(a.g,b.g,!0,a.W,b.W);0==c&&(c=Jd(a.o,b.o,!1,a.ca,b.ca));return c};
function Md(a,b){this.entries=a;this.I=new Q(b);this.yb=null}J=Md[B];J.$i=function(a){return this.I.tc(a.I)};function Nd(a,b){N(a.$i(b),"Intersection/union operations only apply to compatible relations.")}J.T=function(){return this.I.c()};J.ne=function(){return 1<this.I.Y()};J.de=function(){return this[E].map(function(a){return a.pa.B()})};J.Ei=function(){return this[E].map(function(a){return a.pa.id()})};J.Tj=function(a,b){null===this.yb&&(this.yb=new P);this.yb.set(a.j(),b)};
J.ac=function(a){N(null!==this.yb,"getAggregationResult called before any results have been calculated.");var b=this.yb.get(a.j(),void 0);N(xb(b),"Could not find result for "+a.j());return b};J.Ri=function(a){return null!==this.yb&&this.yb.s(a.j())};var Od=null;function Pd(){null===Od&&(Od=new Md([],[]));return Od}
function Qd(a){if(0==a[A])return Pd();for(var b=a[eb](function(b,c){Nd(a[0],c);return b+c[E][A]},0),c=e(b),d=0,b=a.map(function(a){var b=new P;a[E][n](function(a){c[d++]=a;b.set(a.id,a)});return b}),g=new P,k=0;k<c[A];k++)b[qb](function(a){return a.s(c[k].id)})&&g.set(c[k].id,c[k]);return new Md(g.c(),a[0].I.c())}function Rd(a){if(0==a[A])return Pd();var b=new P;a[n](function(c){Nd(a[0],c);c[E][n](function(a){b.set(a.id,a)})});return new Md(b.c(),a[0].I.c())}
function Sd(a,b){var c=1<b[A],d=a.map(function(a){return new Td(a,c)});return new Md(d,b)}function Td(a,b){this.pa=a;this.id=Ud++;this.oe=b}var Ud=0;Td[B].M=function(a){var b=a.La();return null!==b&&this.pa.B()[Wa](b)?this.pa.B()[b]:this.oe?this.pa.B()[a.V().xa()][a[h]()]:this.pa.B()[a[h]()]};Td[B].Ce=function(a,b){var c=a.La();if(null!=c)this.pa.B()[c]=b;else if(this.oe){var c=a.V().xa(),d=this.pa.B()[c];null==d&&(d={},this.pa.B()[c]=d);d[a[h]()]=b}else this.pa.B()[a[h]()]=b};
function Vd(a,b,c,d){function g(a,b){if(a.oe){var c=a.pa.B(),d;for(d in c)k[d]=c[d]}else N(!k[Wa](b[0]),"Attempted to join table with itself, without using table alias, or same alias "+b[0]+"is reused for multiple tables."),k[b[0]]=a.pa.B()}var k={};g(a,b);g(c,d);a=new Rc(-1,k);return new Td(a,!0)};
K("lf.bind",function(a){return new Wd(a)},void 0);function Wd(a){this.sa=a}K("lf.Binder",Wd,void 0);Wd[B].jb=I("sa");
var Xd={};K("lf.Type",Xd,void 0);Xd.ARRAY_BUFFER=0;Xd.BOOLEAN=1;Xd.DATE_TIME=2;Xd.INTEGER=3;Xd.NUMBER=4;Xd.STRING=5;Xd.OBJECT=6;var Yd={0:new ArrayBuffer(0),1:!1,2:ba.freeze(new Date(0)),3:0,4:0,5:"",6:ba.freeze({})};K("lf.type.DEFAULT_VALUES",Yd,void 0);
function Zd(){var a=$d();this.Hh=new P(1,ae(),2,be(),4,a,3,a,5,ce())}zb(Zd);Zd[B].ae=function(a,b){var c=this.Hh.get(a,null);N(null!==c,"Could not find evaluation map for "+a);c=c.get(b,null);N(null!==c,"Could not find evaluator for "+a+", "+b);return c};
function $d(){return new P("between",function(a,b){return a>=b[0]&&a<=b[1]},"eq",function(a,b){return a==b},"gte",function(a,b){return a>=b},"gt",function(a,b){return a>b},"in",function(a,b){return-1!=b[z](a)},"lte",function(a,b){return a<=b},"lt",function(a,b){return a<b},"neq",function(a,b){return a!=b})}
function ce(){return new P("between",function(a,b){return a>=b[0]&&a<=b[1]},"eq",function(a,b){return a==b},"gte",function(a,b){return a>=b},"gt",function(a,b){return a>b},"in",function(a,b){return-1!=b[z](a)},"lte",function(a,b){return a<=b},"lt",function(a,b){return a<b},"match",function(a,b){return(new RegExp(b)).test(a)},"neq",function(a,b){return a!=b})}
function be(){return new P("between",function(a,b){return a[Na]()>=b[0][Na]()&&a[Na]()<=b[1][Na]()},"eq",function(a,b){return(null===a?-1:a[Na]())==(null===b?-1:b[Na]())},"gte",function(a,b){return a[Na]()>=b[Na]()},"gt",function(a,b){return a[Na]()>b[Na]()},"in",function(a,b){return b[ob](function(b){return b[Na]()==a[Na]()})},"lte",function(a,b){return a[Na]()<=b[Na]()},"lt",function(a,b){return a[Na]()<b[Na]()},"neq",function(a,b){return(null===a?-1:a[Na]())!=(null===b?-1:b[Na]())})}
function ae(){return new P("eq",function(a,b){return a==b},"neq",function(a,b){return a!=b})};function de(a,b){this.Af=a;this.tg=b}de[B].getKey=I("Af");de[B].Ji=I("tg");qa(de[B],function(){return new de(this.Af,this.tg)});function ee(a,b){de[F](this,a,b);this.i=this.F=null}M(ee,de);var fe=[];J=ee[B];qa(J,function(){return new ee(this.getKey(),this.Ji())});J.getParent=I("F");J.uf=function(){return!this.qa()};J.X=function(){return this.i||fe};J.ib=function(a){return this.X()[a]||null};J.qa=function(){return this.X()[A]};J.oi=function(){for(var a=0,b=this;b[Da]();)a++,b=b[Da]();return a};J.Cb=function(){for(var a=this;a[Da]();)a=a[Da]();return a};J.contains=function(a){do a=a[Da]();while(a&&a!=this);return Boolean(a)};
J.jc=function(a,b){if(!1!==a[F](b,this))for(var c=this.X(),d=0;d<c[A];d++)c[d].jc(a,b)};J.ag=ub("F");J.ea=function(a){this.lc(a,this.i?this.i[A]:0)};J.lc=function(a,b){N(!a[Da]());a.ag(this);this.i=this.i||[];N(0<=b&&b<=this.i[A]);dc(this.i,b,0,a)};J.zd=function(a){var b=this.i&&this.i[a];return b?(b.ag(null),$b(this.i,a),0==this.i[A]&&(this.i=null),b):null};J.removeChild=function(a){return this.zd(Ub(this.X(),a))};

function ge(){ee[F](this,"","");this.ra=he++}M(ge,ee);var he=0;ge[B].ga=I("ra");ge[B].De=ub("ra");
function ie(a,b,c){ge[F](this);this.K=a;ta(this,b);this.S=c;this.Yc=Zd.be().ae(this.K.$(),this.S);this.Pa=!1;this.Vb=b}M(ie,ge);J=ie[B];J.zb=function(){var a=new ie(this.K,this[y],this.S);a.Uj(this.Vb);a.Cd(this.Pa);a.De(this.ga());return a};J.sb=function(a){return null!=a?(a[w](this.K),a):[this.K]};J.Cd=ub("Pa");J.Uj=ub("Vb");
J.We=function(){var a=!1;this[y]instanceof Wd||(a="array"==Ab(this[y])?!this[y][ob](function(a){return a instanceof Wd}):!0);if(!a)throw new R("SyntaxError","Value is not bounded");};J.eval=function(a){this.We();if("in"==this.S)return this.Ch(a);var b=a[E][Ba](function(a){return this.Yc(a.M(this.K),this[y])!=this.Pa},this);return new Md(b,a.T())};
ma(J,function(a){function b(b){if(a[A]<=b)throw new R("SyntaxError","Cannot bind to given array: out of range.");}if(this.Vb instanceof Wd){var c=this.Vb.jb();b(c);ta(this,a[c])}else"array"==Ab(this.Vb)&&ta(this,this.Vb.map(function(c){return c instanceof Wd?(b(c.jb()),a[c.jb()]):c}))});
J.Ch=function(a){N("in"==this.S,"ValuePredicate#evalAsIn_() called for wrong predicate type.");var b=new Q(this[y]),c=L(function(a){return b[u](a)!=this.Pa},this),d=a[E][Ba](function(a){return c(a.M(this.K))},this);return new Md(d,a.T())};f(J,function(){return"value_pred("+this.K.j()+" "+this.S+(this.Pa?"(complement)":"")+" "+this[y]+")"});J.tf=function(){this.We();return null!==this[y]&&("between"==this.S||"eq"==this.S||"gt"==this.S||"gte"==this.S||"lt"==this.S||"lte"==this.S)};
J.ek=function(){N(this.tf(),"Could not convert predicate to key range.");var a=null;"between"==this.S?a=new Id(this[y][0],this[y][1],!1,!1):"eq"==this.S?(a=this[y],a=new Id(a,a,!1,!1)):a="gte"==this.S?new Id(this[y],null,!1,!1):"gt"==this.S?new Id(this[y],null,!0,!1):"lte"==this.S?new Id(null,this[y],!1,!1):new Id(null,this[y],!1,!0);return this.Pa?a.jh():[a]};
function je(){this.qc=this.na=null}je[B].gd=function(a){null===this.na&&null!=this.A&&(this.na=le(this.A));a=this.na.get(a,null);N(null!==a);return a};function le(a){var b=new P;a.jc(function(a){b.set(a.ga(),a)});return b}je[B].Sc=function(a){a.A&&(this.A=a.A.zb());this.qc=a};ma(je[B],function(){N(null==this.qc);return this});je[B].Md=function(a){var b=this.A;null!=b&&b.jc(function(b){b instanceof ie&&b[p](a)})};
function me(){je[F](this)}M(me,je);function ne(a){var b="";a[n](function(c,d){b+=c.K.j()+" ";b+=1==c.mb?"ASC":"DESC";d<a[A]-1&&(b+=", ")});return b}qa(me[B],function(){var a=new me;a.Sc(this);this.h&&(a.h=this.h[x]());this.g&&(a.g=this.g[x]());a.ka=this.ka;a.ja=this.ja;this.J&&(a.J=this.J[x]());this.ha&&(a.ha=this.ha[x]());this.Hb&&(a.Hb=this.Hb);this.Rb&&(a.Rb=this.Rb);return a});
ma(me[B],function(a){me.Xa[p][F](this,a);null!=this.Hb&&(this.ka=a[this.Hb.jb()]);null!=this.Rb&&(this.ja=a[this.Rb.jb()]);this.Md(a);return this});
function oe(a){this.Ba=a}oe[B].Cb=I("Ba");oe[B].cf=vb("plan description");oe[B].Z=function(){function a(c){var d=c.Z();d&&b.add(d);c.X()[n](function(b){a(b)})}var b=new Q;a(this.Ba);return b.c()};function pe(a){var b=new Q;a[n](function(a){b[fb](a.Z())});return b};

function qe(a,b){this.global=a;this.rb=a.m(ld);this.wd=b.map(function(a){return a[Aa]});this.Of=b.map(function(a){return a.we});this.Xe=pe(this.Of);this.mg=this.xh();this.Ob=Mc()}J=qe[B];J.xh=function(){return this.wd[ob](function(a){return!(a instanceof me)})?1:0};
ha(J,function(){var a=new Gd(this[Oa],this.Xe.c()),b=[],c=this.Of[x](),d=L(function(){var g=c[Fa]();if(g){var k=this.wd[b[A]];return g.Cb()[Ga](a,k)[D](function(a){b[w](a[0]);return d()})}return Ic()},this);return d()[D](L(function(){return this.rb.Ab(this.mg,a).ba()},this))[D](L(function(){this.ue(b);return b},this),L(function(b){a.vb();throw b;},this))});J.$=I("mg");J.Z=I("Xe");J.xc=I("Ob");J.ga=function(){return Gb(this)};J.ue=tb();
function re(a,b){qe[F](this,a,b);this.tb=a.m(qd)}M(re,qe);ua(re[B],vb(0));re[B].ue=function(a){this.wd[n](function(b,c){this.tb.rg(b,a[c])},this)};
function se(a,b){this.l=a;this.tb=a.m(qd);this.Ia=a.m(pd);this.ld=new Dd(a);this.xb=b;var c=a.m(rd),d=this.xb.map(function(a){return c[t](a[h]())});this.Ja=new Q(d);this.Ob=Mc()}J=se[B];ha(J,function(){this.ld[rb](this.xb);this.Ic();return Ic()});J.$=vb(1);J.Z=I("Ja");J.xc=I("Ob");J.ga=function(){return Gb(this)};ua(J,vb(1));J.Ic=function(){var a=this.tb.he(this.Ja.c());0!=a[A]&&(a=new re(this.l,a),this.Ia.Pb(a))};
function te(a){this.l=a;this.rb=a.m(ld);this.Ia=a.m(pd)}te[B].ak=function(){this.rb.subscribe(this.te[p](this))};te[B].te=function(a){a=new se(this.l,a);this.Ia.Pb(a)};

function ue(a,b,c){Yc[F](this,c,b);this.D=a}M(ue,Yc);ue[B].V=function(a){return this.D.yc(a)};
ue[B].ba=function(){ue.Xa.ba[F](this);var a=this.ti().gf();if(0==a.Y())this.ia[nb]();else{var b=this.D.Di()+1;this.D.Bi()[$a](L(function(c){this.D.bg(b);a[n](function(a){var b=c[a[h]()];a.Xd()[n](function(a,c){b[c[r]()]=a.B()});a.ce().c()[n](function(a){b[a[1].id()[r]()]=a[1].B()});a.$d().c()[n](function(a){b[a.id()[r]()]=null})});c.__revision__=b;return c},this),L(function(c,d,g){if(c||!d)this.D.bg(b-1),a[n](L(function(a){a=a[h]();this.D.Kj(a,g[a])},this)),this.ia[cb](c);else this.ia[nb]()},this))}return this.ia.ua};
function ve(){this.hb=new P}J=ve[B];J.Gi=function(a){if(0==a[A])return this.hb.c();var b=[];a[n](function(a){a=this.hb.get(a,null);null===a||b[w](a)},this);return b};J.getData=I("hb");J.get=function(a){return Ic(this.Gi(a))};J.Sf=function(a){a[n](function(a){this.hb.set(a.id(),a)},this)};J.put=function(a){this.Sf(a);return Ic()};J.Nj=function(a){0==a[A]||a[A]==this.hb.Y()?this.hb[Ma]():a[n](function(a){this.hb[m](a)},this)};ja(J,function(a){this.Nj(a);return Ic()});
J.vi=function(){return this.hb.ya()?0:this.hb.G()[eb](function(a,b){return a>b?a:b},0)};
function we(a,b){this.w=a;this.Cg=b;this.hc=-1;this.I=new P;this.Nd=null}J=we[B];J.Di=I("hc");J.bg=ub("hc");J.xe=function(a,b){var c=[],d;for(d in b)"__meta__"!=d&&c[w](new Rc(ga(d,10),b[d]));a.Sf(c)};J.Na=function(){var a=Mc();this.D=this.Cg[ab](this.w[kb]());this.D.on("value",L(function(b){a[nb](this.uj(b))},this));return a.ua};J.Wi=function(){Sc=this.I.c().map(function(a){return a.vi()})[eb](function(a,b){return a>b?a:b},0)+1};J.uj=function(a){return 0>this.hc?this.Yi(a.exportVal()):this.te(a.exportVal())};
J.Yi=function(a){var b=Mc();null===a?this.D.set(this.oh(),function(){b[nb]()}):a.__version__==this.w[Ca]()&&(this.hc=a.__revision__,this.w.fb()[n](function(b){var d=new ve;this.xe(d,a[b[h]()]);this.I.set(b[h](),d)},this),this.Wi(),b[nb]());return b.ua};
J.te=function(a){if(a.__revision__==this.hc)return Ic();var b=this.w.fb().map(function(b){b=b[h]();return this.bi(b,a[b])},this)[Ba](function(a){return!a.ya()});this.hc=a.__revision__;b[n](function(b){var d=new ve;this.xe(d,a[b[h]()]);this.I.set(b[h](),d)},this);b[A]&&this.Fc(b);return Ic()};
J.bi=function(a,b){var c=new Fd(a),d=this.I.get(a).getData(),g=new Q(nc(b)[Ba](function(a){return"__meta__"!=a}).map(function(a){return ga(a,10)}));g.zh(d.G()).c()[n](function(a){c.add(new Rc(a,b[a[r]()]))});d.G()[n](function(a){if(g[u](a)){var l=d.get(a);JSON[db](l.B())!=JSON[db](b[a])&&c.modify([l,new Rc(a,b[a[r]()])])}else c[jb](d.get(a))});return c};J.Kj=function(a,b){var c=new ve;this.xe(c,b.exportVal());this.I.set(a,c)};
J.oh=function(){var a={};a.__version__=this.w[Ca]();a.__revision__=1;this.w.fb()[n](function(b){b=b[h]();a[b]={__meta__:""};this.I.set(b,new ve)},this);return a};J.Ab=function(a,b){return new ue(this,a,b)};J.yc=function(a){var b=this.I.get(a,null);if(null!==b)return b;throw new R("DataError","Table "+a+" not found");};J.Bi=I("D");pa(J,tb());va(J,ub("Nd"));J.Fc=function(a){null!=this.Nd&&this.Nd(a)};

function xe(a,b,c,d){this.D=b;this.gb=c;this.pb=a;this.Ue=d}function ye(a){var b=null;return b=a instanceof ArrayBuffer?Vc(a):a instanceof Date?a[Na]():a}xe[B].Xc=function(a){var b={};kc(a,L(function(a,d){b[d]=ye(a)},this));return Uc(b)};
function ze(a,b){this.O=a;this.Bb=b}J=ze[B];J.get=function(a){if(0==a[A])return this.Zd();a=a.map(function(a){return new O(function(c,d){var g;try{g=this.O.get(a)}catch(k){d(k);return}sa(g,d);ya(g,L(function(a){c(this.Bb(a[mb][Sa]))},this))},this)},this);return Kc(a)};J.Zd=function(){return new O(function(a,b){var c=[],d;try{d=this.O.openCursor()}catch(g){b(g);return}sa(d,b);ya(d,L(function(){var b=d[Sa];b?(c[w](this.Bb(b[y])),b.continue()):a(c)},this))},this)};
J.Lb=function(a){return new O(function(b,c){var d;try{d=a()}catch(g){c(g);return}ya(d,b);sa(d,c)},this)};J.put=function(a){if(0==a[A])return Ic();a=a.map(function(a){return this.Lb(L(function(){return this.O.put(a.Wa())},this))},this);return Kc(a)};
ja(J,function(a){return new O(function(b,c){var d=this.O.count();ya(d,L(function(d){if(0==a[A]||d[mb][Sa]==a[A])return this.Lb(L(function(){return this.O[Ma]()},this))[D](b,c);d=a.map(function(a){return this.Lb(L(function(){return this.O[jb](a)},this))},this);Kc(d)[D](b,c)},this));sa(d,c)},this)});
function Ae(a,b,c,d,g){Yc[F](this,c,d);this.l=a;this.gb=b;this.Ue=g;this.gb.oncomplete=L(this.ia[nb],this.ia);this.gb.onabort=L(this.ia[cb],this.ia)}M(Ae,Yc);Ae[B].V=function(a,b,c){return this.Ue?(c=null!=c?c:0,a=this.gb[hb](a),new zd(a,b,0==c?Lb(Ad,this.l):Bd)):new ze(this.gb[hb](a),b)};
function Be(a,b){this.l=a;this.w=b;this.Pc=b.yj().Ah||!1}J=Be[B];
J.Na=function(a){var b=aa.indexedDB||aa.mozIndexedDB||aa.webkitIndexedDB||aa.msIndexedDB;if(null==b)throw new R("NotSupportedError","IndexedDB not supported by platform.");var c=a||function(){return Ic()};return new O(function(a,g){var k;try{k=b.open(this.w[kb](),this.w[Ca]())}catch(l){g(l);return}sa(k,g);k.onupgradeneeded=L(function(a){this.sj(c,a)[D](tb(),g)},this);ya(k,L(function(b){this.D=b[mb][Sa];this.Be()[D](L(function(b){Sc=b+1;a(this.D)},this))},this))},this)};
J.sj=function(a,b){var c=b[mb][Sa],d=b[mb][$a],g=new xe(b.oldVersion,c,d,this.Pc);this.Lj(c,d);this.sh(c,d);return a(g)};J.Lj=function(a){for(var b=[],c=0;c<a[Ja][A];++c){var d=a[Ja][gb](c);-1!=d[z](".")&&b[w](d)}b[n](function(b){try{a.deleteObjectStore(b)}catch(c){}})};J.sh=function(a,b){this.w.fb()[n](Lb(this.ph,a,b),this)};J.ph=function(a,b,c){a[Ja][u](c[h]())||a.createObjectStore(c[h](),{keyPath:"id"});c.Mb()&&(c.Ca()[n](function(c){this.sc(a,b,c.j(),"btree")},this),this.sc(a,b,c.Db(),"rowid"))};
J.sc=function(a,b,c,d){a[Ja][u](c)||(a.createObjectStore(c,{keyPath:"id"}),a=b[hb](c),(this.Pc?new zd(a,Tc,Bd):new ze(a,Tc)).put([new Xc(new Wc(d))]))};J.Ab=function(a,b){var c=b.Z().c().map(function(a){return a[h]()});b.ri()[n](function(a){c[w](a)});var d=this.D[$a](c,0==a?"readonly":"readwrite");return new Ae(this.l,d,b,a,this.Pc)};
J.Be=function(a){function b(){if(0==c[A])return Ic();var a=c[Fa]();return l(a)[D](b)}var c=this.w.fb().map(function(a){return a[h]()}),d=this.D,g=0,k=L(function(a){return this.Pc?(a=yd(a[y]),nc(a.fd())[eb](function(a,b){return ea.max(a,b)},0)):a.key},this),l=L(function(b){return new O(function(c,l){var ke;try{ke=(a||d[$a]([b]))[hb](b).openCursor(null,"prev")}catch(Kg){l(Kg);return}ya(ke,function(a){(a=a[mb][Sa])&&(g=ea.max(g,k(a)));c(g)});sa(ke,function(){c(g)})},this)},this);return new O(function(a){b()[D](function(){a(g)})})};
pa(J,function(){this.D[Xa]()});J.yc=function(){throw new R("SyntaxError","IndexedDB tables needs to be acquired from transactions");};va(J,tb());J.Fc=tb();



function Ce(a,b,c){Yc[F](this,c,b);this.O=a;0==b&&this.ia[nb]()}M(Ce,Yc);Ce[B].V=function(a){return this.O.yc(a)};Ce[B].ba=function(){Ce.Xa.ba[F](this);this.ia[nb]();return this.ia.ua};
function De(a){this.w=a;this.I=new P}J=De[B];J.Na=function(){this.w.fb()[n](this.Xi,this);return Ic()};J.yc=function(a){var b=this.I.get(a,null);if(null===b)throw new R("DataError","Table "+a+" does not exist.");return b};J.Ab=function(a,b){return new Ce(this,a,b)};J.Ye=function(a){if(!this.I.s(a)){var b=new ve;this.I.set(a,b);return b}return null};J.Xi=function(a){this.Ye(a[h]());a.Mb()&&(a.Ca()[n](function(a){this.sc(a.j(),"btree")},this),this.sc(a.Db(),"rowid"))};
J.sc=function(a,b){var c=this.Ye(a);null===c||c.put([new Xc(new Wc(b))])};pa(J,tb());va(J,tb());J.Fc=tb();
function Ee(a){De[F](this,a);this.rd=null}M(Ee,De);va(Ee[B],function(a){null===this.rd&&(this.rd=a)});Ee[B].Fc=function(a){null===this.rd||this.rd(a)};
function Fe(a,b,c){this.gb=a;this.u=b;this.Bb=c}Fe[B].get=function(a){var b=this.Bb;this.gb.cb("SELECT id, value FROM "+this.u+" "+(0==a[A]?"":"WHERE id IN ("+a[H](",")+")"),[],function(a){for(var d=a[bb][A],g=e(d),k=0;k<d;++k)g[k]=b({id:a[bb][gb](k).id,value:JSON.parse(a[bb][gb](k)[y])});return g});return this.gb.ba()};Fe[B].put=function(a){if(0==a[A])return Ic();var b="INSERT OR REPLACE INTO "+this.u+"(id, value) VALUES (?, ?)";a[n](function(a){this.gb.cb(b,[a.id(),JSON[db](a.B())])},this);return Ic()};
ja(Fe[B],function(a){this.gb.cb("DELETE FROM "+this.u+" "+(0==a[A]?"":"WHERE id IN ("+a[H](",")+")"),[]);return Ic()});
function Ge(a,b,c){Yc[F](this,b,c);this.D=a;this.I=new P;this.Qd=[]}M(Ge,Yc);Ge[B].V=function(a,b){var c=this.I.get(a,null);null===c&&(c=new Fe(this,a,b),this.I.set(a,c));return c};Ge[B].cb=function(a,b,c){this.Qd[w]({bk:a,vj:b,transform:c})};
Ge[B].ba=function(){Ge.Xa.ba[F](this);var a,b,c=this.ia[cb][p](this.ia),d=function(a,b){this.ia[cb](b)}[p](this),g=L(function(c,l){a=l;if(this.Qd[A]){var q=this.Qd[Fa]();b=q.transform;c.executeSql(q.bk,q.vj,g,d)}else q=a,null!=b&&null!=a&&(q=b(a)),this.ia[nb](q)},this);0==this.lg?this.D.readTransaction(g,c):this.D[$a](g,c);return this.ia.ua};
function He(a,b,c){this.D=c;this.l=a;this.pb=b}He[B].Xc=function(a){var b={},c;for(c in a)b[c]=ye(a[c]);return Uc(b)};function Ie(a){a.cb('SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=e(a[bb][A]),d=0;d<c[A];++d)c[d]=a[bb][gb](d).tbl_name;return c})};
function Je(a,b,c){this.l=a;this.w=b;this.Yj=c||4194304}J=Je[B];J.ad=function(){return new Gd(this.l,[])};J.Na=function(a){if(null==aa.openDatabase)throw new R("NotSupportedError","WebSql not supported by platform.");var b=a||function(){return Ic()};return new O(L(function(a,d){try{aa.openDatabase(this.w[kb](),"",this.w[kb](),this.Yj,L(function(g){this.D=g;this.fh(b)[D](a,d)},this))}catch(g){d(g)}},this))};
J.fh=function(a){var b=Mc(),c=new Ge(this.D,this.ad(),1);c.cb("CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);c.cb("SELECT v FROM __lf_ver WHERE id = 0",[]);c.ba()[D](L(function(c){var g=0;c[bb][A]&&(g=c[bb][gb](0).v);g<this.w[Ca]()?this.tj(a,g)[D](b[nb][p](b)):g>this.w[Ca]()?b[cb](new R("DataError","Attempt to open a newer database with old code")):b[nb]()},this));return b.ua};
J.Ab=function(a,b){if(null!=this.D)return new Ge(this.D,b,a);throw new R("DataError","Attempt to create transaction from uninitialized DB");};pa(J,tb());J.yc=function(){throw new R("SyntaxError","WebSQL tables needs to be acquired from transactions");};J.Hf=function(){throw new R("NotSupportedError","WebSQL does not support change notification");};va(J,function(){this.Hf()});J.Fc=function(){this.Hf()};
J.tj=function(a,b){var c=Mc();this.zj()[D](L(function(){a(new He(this.l,b,this.D))[D](L(function(){return this.Be()},this))[D](c[nb][p](c))},this),c[cb][p](c));return c.ua};
J.zj=function(){var a=this.w.fb(),b=new Ge(this.D,this.ad(),1),c=new Ge(this.D,this.ad(),1);b.cb("INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[this.w[Ca]()]);Ie(b);return b.ba()[D](function(b){b[Ba](function(a){return-1!=a[z](".")})[n](function(a){c.cb("DROP TABLE "+a,[])});var g=b[Ba](function(a){return-1==a[z](".")});a.map(function(a){return a[h]()})[Ba](function(a){return-1==g[z](a)})[n](function(a){c.cb("CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return c.ba()})};
J.Be=function(){var a=0,b=Mc(),c=L(function(b){var c=new Ge(this.D,this.ad(),0);c.cb("SELECT MAX(id) FROM "+b,[]);return c.ba()[D](function(b){b=b[bb][gb](0)[0];a=ea.max(b,a)})},this),d=this.w.fb().map(function(a){return c(a[h]())});Kc(d)[D](function(){b[nb](a)},function(a){b[cb](a)});return b.ua};

function Ke(a){this.f=new P;this.hg=new P;this.Ef=a||Number.MAX_VALUE}J=Ke[B];J.hd=function(a){var b=this.hg.get(a,null);null===b&&(b=new Q,this.hg.set(a,b));return b};J.set=function(a,b){var c=this.hd(a);b[n](L(function(a){this.f.set(a.id(),a);c.add(a.id())},this));this.f.Y()};J.get=function(a){return a.map(L(function(a){return this.f.get(a,null)},this))};
J.Ma=function(a,b,c){var d=[],g=ea.min(b,c),k=ea.max(b,c);a=this.hd(a);if(a.Y()<k-g)a.c()[n](function(a){a>=g&&a<=k&&(a=this.f.get(a),N(null!=a,"Inconsistent cache"),d[w](a))},this);else for(b=g;b<=k;++b)a[u](b)&&(c=this.f.get(b),N(null!=c,"Inconsistent cache"),d[w](c));return d};ja(J,function(a,b){var c=this.hd(a);b[n](function(a){this.f[m](a);c[m](a)},this)});J.Y=function(a){return null!=a?this.hd(a).Y():this.f.Y()};
function Le(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=ea.min(xb(c)?c:a[A],a[A]);if(0==c)return[];d=ea.min(d||0,a[A]);return a[x](d,d+c)};
function Me(a,b,c,d){this.u=a;this.L=b;this.Fe=c;if(d){a=511;a*=a*a;if(d[A]>=a)throw new R("TooManyRowsError","B-Tree implementation supports at most "+a+" rows.");d=Ne(this,d);this.oa=d=Oe(d)}else this[Ma]()}var Pe=[];J=Me[B];ia(J,I("u"));f(J,function(){return this.oa[r]()});J.add=function(a,b){this.oa=this.oa.lb(a,b)};J.set=function(a,b){this.oa=this.oa.lb(a,b,!0)};ja(J,function(a,b){this.oa=this.oa[m](a,b)});J.get=function(a){return this.oa.get(a)};
J.Wc=function(a){return null!=a?this.Ma([a])[A]:this.Ma()[A]};J.Ma=function(a,b,c,d){var g=this.oa.dd().b[0];if(!xb(g)||0==c)return Pe;var k=(c||0)+(d||0),k=0<k&&!b?k:Number.POSITIVE_INFINITY,l=[];(xb(a)?this.L.eg(a):[this.L.Yd()])[n](function(a){for(var b=this.L.xd(a),b=this.L.me(a)?g:b[0],b=this.oa.ff(b),c=0;null!=b&&l[A]<k;)0!=b.Ma(a,l)?c=0:c++,b=2==c?null:b[Ua]()},this);return Le(l,b,c,d)};la(J,function(){this.oa=Qe(this)});J.s=function(a){return this.oa.s(a)};
J.min=function(){return this.Ec(L(this.L.min,this.L))};J.max=function(){return this.Ec(L(this.L.max,this.L))};J.Ec=function(a){var b=this.oa.dd(),c=this.oa.lf();if(0==b.b[A]&&0==c.b[A])return[null,null];var d=b.b[0],b=b.P[0],g=c.b[c.b[A]-1],c=c.P[c.b[A]-1];return 1==a(d,g)?[d,this.Fe?[b]:b]:[g,this.Fe?[c]:c]};J.Bc=I("Fe");J.rc=I("L");J.re=function(a,b){return null!=a?-1==this.L[Ra](a,b):!1};J.Fa=function(a,b){return null!=a?0==this.L[Ra](a,b):!1};
J.Wa=function(){for(var a=[],b=this.oa.dd();b;)a[w](new Rc(b.ra,[b.b,b.P])),b=b.ta;return a};function Re(a,b,c,d){a=new Me(b,a,c);d=Se(d,a);a.oa=d;return a}function Te(a,b){this.ra=a;this.U=b;this.bb=0;this.ta=this.nb=this.F=null;this.b=[];this.P=[];this.i=[]}function Qe(a){return new Te(Sc++,a)}J=Te[B];J.aa=function(){return 0==this.bb};J.xf=function(){return null==this.F};oa(J,I("ta"));
function Ue(a){function b(a){return null!=a?a.ra[r]():"_"}var c=a.ra+"["+a.b[H]("|")+"]",d=a.i.map(function(a){return a.ra})[H]("|"),g=a.P[H]("/"),k=b(a.nb)+"{",k=a.aa()?k+g:k+d,k=k+"}"+b(a.F);a.ta&&(a=Ue(a.ta),c=c+"  "+a[0],k=k+"  "+a[1]);return[c,k]}f(J,function(){var a="",b=Ue(this),a=a+(b[0]+"\n"+b[1]+"\n");this.i[A]&&(a+=this.i[0][r]());return a});J.dd=function(){return this.aa()?this:this.i[0].dd()};J.lf=function(){return this.aa()?this:this.i[this.i[A]-1].lf()};
function Ve(a,b){b&&(b.nb=a);a&&(a.ta=b)}function Ne(a,b){for(var c=b[A],d=0,g=Qe(a),k=g;0<c;){var l=768<=c?511:257<=c&&511>=c?c:257,q=b[x](d,d+l);g.b=q.map(function(a){return a.key});g.P=q.map(function(a){return a[y]});d+=l;c-=l;0<c&&(l=Qe(g.U),Ve(g,l),g=l)}return k}function We(a){var b=a[0],c=Qe(b.U);c.bb=b.bb+1;c.i=a;for(b=0;b<a[A];++b)a[b].F=c,0<b&&c.b[w](a[b].b[0]);return c}
function Oe(a){var b=a,c=[];do c[w](b),b=b.ta;while(b);if(512>=c[A])b=We(c);else{var d=c[A],g=0,b=Qe(a.U);for(b.bb=a.bb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var k=c[x](g,g+a),l=We(k);l.F=b;b.i[A]&&(b.b[w](k[0].b[0]),Ve(b.i[b.i[A]-1],l));b.i[w](l);g+=a;d-=a}}return b}J.get=function(a){var b=this.Jc(a);if(this.aa()){var c=Pe;this.U.Fa(this.b[b],a)&&(c=c[Ia](this.P[b]));return c}b=this.U.Fa(this.b[b],a)?b+1:b;return this.i[b].get(a)};
J.s=function(a){var b=this.Jc(a);return this.U.Fa(this.b[b],a)?!0:this.aa()?!1:this.i[b].s(a)};ja(J,function(a,b){this.af(a,-1,b);if(this.xf()){var c=this;1==this.i[A]&&(c=this.i[0],c.F=null);return c}return this});function Xe(a){return a.aa()?a.b[0]:Xe(a.i[0])}J.Zc=function(){this.b=[];for(var a=1;a<this.i[A];++a)this.b[w](Xe(this.i[a]))};
J.af=function(a,b,c){var d=this.Jc(a);if(!this.aa()){var g=this.U.Fa(this.b[d],a)?d+1:d;if(this.i[g].af(a,g,c))this.Zc();else return!1}else if(!this.U.Fa(this.b[d],a))return!1;if(this.b[A]>d&&this.U.Fa(this.b[d],a)){if(xb(c)&&!this.U.Bc()&&this.aa()&&(a=this.P[d],c=fc(a,gc,!1,c),0<=c&&$b(a,c),this.P[d][A]))return!1;this.b[G](d,1);this.aa()&&this.P[G](d,1)}256>this.b[A]&&!this.xf()&&(this.ck()||this.mj(b));return!0};
J.ck=function(){var a=null,b,c,d;if(this.ta&&256<this.ta.b[A])a=this.ta,c=b=0,d=this.b[A]+1;else if(this.nb&&256<this.nb.b[A])a=this.nb,b=this.nb.b[A]-1,c=this.aa()?b:b+1,d=0;else return!1;this.b[G](d,0,a.b[b]);a.b[G](b,1);b=this.aa()?this.P:this.i;var g=null;this.aa()?g=a.P:(g=a.i,g[c].F=this);b[G](d,0,g[c]);g[G](c,1);a.aa()||(a.Zc(),this.Zc());return!0};
J.mj=function(a){var b,c,d;this.ta&&511>this.ta.b[A]?(b=this.ta,d=c=0):this.nb&&(b=this.nb,c=b.b[A],d=b.aa()?b.P[A]:b.i[A]);c=[c,0][Ia](this.b);e[B][G][v](b.b,c);c=null;this.aa()?c=this.P:(c=this.i,c[n](function(a){a.F=b}));c=[d,0][Ia](c);e[B][G][v](b.aa()?b.P:b.i,c);Ve(this.nb,this.ta);b.aa()||b.Zc();-1!=a&&(this.F.b[G](a,1),this.F.i[G](a,1))};
J.lb=function(a,b,c){var d=this.Jc(a);if(this.aa()){if(this.U.Fa(this.b[d],a)){if(c)return this.P[d]=this.U.Bc()?b:[b],this;if(this.U.Bc())throw new R("ConstraintError","Duplicate key not allowed");if(this.P[d])return hc(this.P[d],b),this;this.P[d]=[b]}this.b[G](d,0,a);this.P[G](d,0,this.U.Bc()?b:[b]);return 512==this.b[A]?this.$j():this}d=this.U.Fa(this.b[d],a)?d+1:d;a=this.i[d].lb(a,b,c);a.aa()||1!=a.b[A]||(this.b[G](d,0,a.b[0]),a.i[1].F=this,a.i[0].F=this,this.i[G](d,1,a.i[1]),this.i[G](d,0,a.i[0]));
return 512==this.b[A]?this.Zj():this};J.$j=function(){var a=Qe(this.U),b=Qe(this.U);b.bb=1;b.b=[this.b[256]];b.i=[this,a];b.F=this.F;this.F=b;a.b=this.b[G](256);a.P=this.P[G](256);a.F=b;Ve(a,this.ta);Ve(this,a);return b};J.Zj=function(){var a=Qe(this.U),b=Qe(this.U);a.F=this.F;a.bb=this.bb+1;a.b=[this.b[256]];a.i=[this,b];this.b[G](256,1);b.F=a;b.bb=this.bb;b.b=this.b[G](256);b.i=this.i[G](257);b.i[n](function(a){a.F=b});this.F=a;Ve(b,this.ta);Ve(this,b);return a};
J.Jc=function(a){for(var b=0,c=this.b[A];b<c;){var d=b+c>>1;this.U.re(this.b[d],a)?b=d+1:c=d}return b};J.ff=function(a){if(!this.aa()){var b=this.Jc(a);this.U.Fa(this.b[b],a)&&b++;return this.i[b].ff(a)}return this};
J.Ma=function(a,b){var c=-1,d=this.b[A]-1,g=this.U.rc(),k=L(function(b){for(;b<this.b[A];++b){var k=g.cc(this.b[b],a);if(-1!=c){if(!k){d=b-1;break}}else k&&(c=b)}},this);g.cc(this.b[0],a)?c=0:k(1);if(-1==c)return 0;g.cc(this.b[d],a)||k(c);return d==this.b[A]-1?this.Ne(b,this.P[x](c)):d>=c?this.Ne(b,this.P[x](c,d+1)):0};J.Ne=function(a,b){var c=this.U.Bc()?b:jc(b);a[w][v](a,c);return c[A]};
function Se(a,b){for(var c=a.map(function(a){var c=new Te(a.id(),b);c.b=a.B()[0];c.P=a.B()[1];return c}),d=0;d<c[A]-1;++d)Ve(c[d],c[d+1]);return 1<c[A]?Oe(c[0]):c[0]};
function Ye(a){if(1==a.h[A])return new Ze(a.h[0].mb);a=a.h.map(function(a){return a.mb});return new $e(a)}function Ze(a){this.Tc=0==a?af:bf;this.se=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.Lf=0==a?cf:df}M(Ze,Cd);function bf(a,b){return a>b?1:a<b?-1:0}function af(a,b){return bf(b,a)}function df(a,b){return Ld(a,b)}function cf(a,b){return Ld(b,a)}J=Ze[B];
J.Rd=function(a,b){var c=this.se(b),d=[null===c.g,null===c.o];if(!d[0]){var g=this.Tc(a,c.g);d[0]=c.W?1==g:-1!=g}d[1]||(g=this.Tc(a,c.o),d[1]=c.ca?-1==g:1!=g);return d};J.compare=function(a,b){return this.Tc(a,b)};J.min=function(a,b){return a<b?1:a==b?0:-1};J.max=function(a,b){return a>b?1:a==b?0:-1};J.cc=function(a,b){var c=this.Rd(a,b);return c[0]&&c[1]};J.Yd=function(){return Kd()};J.Kf=function(a,b){return this.Lf(a,b)};
J.eg=function(a){return a[Ba](function(a){return null!==a})[pb](L(function(a,c){return this.Lf(a,c)},this))};J.me=function(a){return Bb(this.se(a).g)};J.xd=function(a){a=this.se(a);return[a.g,a.o]};f(J,function(){return this.Tc==af?"SimpleComparator_DESC":"SimpleComparator_ASC"});function $e(a){this.wa=a.map(function(a){return new Ze(a)})}M($e,Cd);J=$e[B];J.Wd=function(a,b,c){for(var d=0,g=0;g<this.wa[A]&&0==d;++g)d=c(this.wa[g],a[g],b[g]);return d};
J.compare=function(a,b){return this.Wd(a,b,function(a,b,g){return a[Ra](b,g)})};J.min=function(a,b){return this.Wd(a,b,function(a,b,g){return a.min(b,g)})};J.max=function(a,b){return this.Wd(a,b,function(a,b,g){return a.max(b,g)})};J.Rd=function(a,b){for(var c=[!0,!0],d=0;d<this.wa[A]&&(c[0]||c[1]);++d){var g=this.wa[d].Rd(a[d],b[d]);c[0]=c[0]&&g[0];c[1]=c[1]&&g[1]}return c};J.cc=function(a,b){for(var c=!0,d=0;d<this.wa[A]&&c;++d)c=this.wa[d].cc(a[d],b[d]);return c};J.Yd=function(){return this.wa.map(function(a){return a.Yd()})};
J.eg=function(a){var b=a[Ba](function(a){return a[qb](Cb)});a=e(this.wa[A]);for(var c=0;c<a[A];c++)a[c]=b.map(function(a){return a[c]});a[n](function(a,b){a[pb](L(function(a,c){return this.wa[b].Kf(a,c)},this))},this);b=e(b[A]);for(c=0;c<b[A];c++)b[c]=a.map(function(a){return a[c]});return b[pb](L(function(a,b){for(var c=0,l=0;l<this.wa[A]&&0==c;++l)c=this.wa[l].Kf(a[l],b[l]);return c},this))};J.me=function(a){return this.wa[0].me(a[0])};
J.xd=function(a){var b=a.map(function(a,b){return this.wa[b].xd(a)[0]},this);a=a.map(function(a,b){return this.wa[b].xd(a)[1]},this);return[b,a]};
function ef(a){this.sa=a;this.Ra=new Q}J=ef[B];ia(J,function(){return this.sa[h]()});J.add=function(a,b){null===a?this.Ra.add(b):this.sa.add(a,b)};J.set=function(a,b){null===a?(this.Ra[Ma](),this.Ra.add(b)):this.sa.set(a,b)};ja(J,function(a,b){null===a?b?this.Ra[m](b):this.Ra[Ma]():this.sa[m](a,b)});J.get=function(a){return null===a?this.Ra.c():this.sa.get(a)};J.Wc=function(a){return this.sa.Wc(a)};J.Ma=function(a,b,c,d){b=this.sa.Ma(a,b,c,d);return null!=a?b:b[Ia](this.Ra.c())};
la(J,function(){this.Ra[Ma]();this.sa[Ma]()});J.s=function(a){return null===a?!this.Ra.ya():this.sa.s(a)};J.min=function(){return this.sa.min()};J.max=function(){return this.sa.max()};J.Wa=function(){return[new Rc(-2,this.Ra.c())][Ia](this.sa.Wa())};J.rc=function(){return this.sa.rc()};
function ff(a){this.u=a;this.ob=new Q;this.L=new Ze(1)}J=ff[B];ia(J,I("u"));J.add=function(a){if("number"!=typeof a)throw new R("DataError","Row id must be numbers");this.ob.add(a)};J.set=function(a,b){this.add(a,b)};ja(J,function(a){this.ob[m](a)});J.get=function(a){return this.s(a)?[a]:[]};J.min=function(){return this.Ec(L(this.L.min,this.L))};J.max=function(){return this.Ec(L(this.L.max,this.L))};
J.Ec=function(a){if(this.ob.ya())return[null,null];var b=this.ob.c()[eb](L(function(b,d){return null===b||1==a(d,b)?d:b},this),null);return[b,[b]]};J.Wc=function(){return this.ob.Y()};J.Ma=function(a,b,c,d){var g=a||[Kd()];a=this.ob.c()[Ba](function(a){return g[ob](function(b){return this.L.cc(a,b)},this)},this);return Le(a,b,c,d)};la(J,function(){this.ob[Ma]()});J.s=function(a){return this.ob[u](a)};J.Wa=function(){return[new Rc(0,this.ob.c())]};J.rc=I("L");
function gf(a,b){var c=new ff(a);b[0].B()[n](function(a){c.add(a,a)});return c};
function hf(a){this.l=a;this.rb=a.m(ld);this.N=a.m(nd);this.la=a.m(md)}J=hf[B];J.Na=function(a){var b=a.fb(),c=L(function(){if(0==b[A])return Ic();var a=b[Fa]();return(a.Mb()?this.Rh(a):this.Sh(a))[D](c)},this);return c()};J.Sh=function(a){var b=new Gd(this.l,[a]);return this.rb.Ab(0,b).V(a[h](),L(a.Yb,a)).get([])[D](L(function(b){this.la.set(a[h](),b);this.Gj(a,b)},this))};J.Gj=function(a,b){var c=this.N.Hi(a[h]());b[n](function(a){c[n](function(b){var c=a.Cc(b[h]());b.add(c,a.id())})})};
J.Rh=function(a){var b=new Gd(this.l,[a]),c=this.rb.Ab(0,b),b=c.V(a[h](),a.Yb).get([])[D](L(function(b){this.la.set(a[h](),b)},this)),d=a.Ca().map(function(a){return this.Hj(a,c)},this)[Ia](this.Ij(a,c));return Kc(d[Ia](b))};
J.Hj=function(a,b){var c=b.V(a.j(),Tc,1),d=Ye(a);return c.get([])[D](L(function(b){N("btree"==b[0].B().type);if(1<b[A]){if(a.pf()){var c=Re[p](void 0,d,a.j(),a.md),l=b[x](1),q=-1;for(b=0;b<l[A];++b)if(-2==l[b].id()){q=b;break}if(-1==q)throw new R("DataError","Data corruption detected");b=l[q].B();l=l[x](0);l[G](q,1);c=c(l);c=new ef(c);c.Ra[fb](b)}else c=Re(d,a.j(),a.md,b[x](1));this.N.set(c)}},this))};
J.Ij=function(a,b){return b.V(a.Db(),Tc,1).get([])[D](L(function(b){N("rowid"==b[0].B().type);1<b[A]&&(b=gf(a.Db(),b[x](1)),this.N.set(b))},this))};


function jf(){this.O=new P}jf[B].Na=function(a){a.fb()[n](function(a){var c=a.Db();if(null===this.get(c)){var d=new ff(c);this.O.set(c,d)}a.Ca()[n](function(a){this.O.set(a.j(),kf(a))},this)},this);return Ic()};function kf(a){var b=Ye(a),b=new Me(a.j(),b,a.md);return a.pf()?new ef(b):b}jf[B].get=function(a){return this.O.get(a,null)};jf[B].set=function(a){return this.O.set(a[h](),a)};jf[B].Hi=function(a){var b=[],c=a+".";this.O.G()[n](function(a){0==a[z](c)&&b[w](this.O.get(a))},this);return b};
function mf(a){this.Sa=[];xb(a)&&this.add(a)}J=mf[B];f(J,function(){return this.Sa.map(function(a){return a[r]()})[H](",")});J.s=function(a){return this.Sa[ob](function(b){return b[u](a)})};J.c=I("Sa");
J.add=function(a){if(0!=a[A])if(a=this.Sa[Ia](a),1==a[A])this.Sa=a;else{a[pb](Ld);for(var b=[],c=a[0],d=1;d<a[A];++d)if(c.Mf(a[d])){var g=a[d],k=Kd();if(null!==c.g&&null!==g.g){var l=Jd(c.g,g.g,!0);1!=l?(k.g=c.g,k.W=0!=l?c.W:c.W&&g.W):(k.g=g.g,k.W=g.W)}null!==c.o&&null!==g.o&&(l=Jd(c.o,g.o,!1),-1!=l?(k.o=c.o,k.ca=0!=l?c.ca:c.ca&&g.ca):(k.o=g.o,k.ca=g.ca));c=k}else b[w](c),c=a[d];b[w](c);this.Sa=b}};
J.tc=function(a){return this.Sa[A]==a.Sa[A]?0==this.Sa[A]||this.Sa[qb](function(b,c){return b.tc(a.Sa[c])}):!1};function nf(a,b){var c=[];a.c().map(function(a){return b.c().map(function(b){var c;if(a.Mf(b)){c=Kd();var l=Jd(a.g,b.g,!0),l=0==l?a.W?a:b:-1!=l?a:b;c.g=l.g;c.W=l.W;null===a.o||null===b.o?b=null===a.o?b:a:(l=Jd(a.o,b.o,!1),b=0==l?a.ca?a:b:-1==l?a:b);c.o=b.o;c.ca=b.ca}else c=null;return c})})[n](function(a){c=c[Ia](a)});return new mf(c[Ba](function(a){return null!==a}))};
function of(a,b){var c=[],d=null,g=null;a.jc(function(a){var l=b(a);null==a[Da]()?g=l:d.ea(l);var q=a[Da]();null!==q&&q.qa()==d.qa()&&(q=c[z](d),-1!=q&&c[G](q,1));1<a.qa()&&c[w](l);d=a.uf()?c[c[A]-1]:l});return g}function pf(a){return qf(a,function(a){return a.uf()})}function rf(a){var b=a[Da](),c=0;null!==b&&(c=b.X()[z](a),b[lb](a));var d=a.X()[x]();d[n](function(d,k){a[lb](d);null===b||b.lc(d,c+k)});return{parent:b,children:d}}
function sf(a,b){a.X()[x]()[n](function(c){a[lb](c);b.ea(c)});a.ea(b)}function tf(a){N(1==a.qa());var b=a.ib(0);N(1==b.qa());rf(a);sf(b,a);return b}function uf(a,b,c){N(1==a.qa());var d=a.ib(0);N(1<d.qa());var g=d.X()[x]();if(!g[ob](function(a){return b(a)}))return a;rf(a);g[n](function(g,l){if(b(g)){var q=c(a);d.zd(l);q.ea(g);d.lc(q,l)}});return d}function vf(a,b,c,d){var g=a[Da]();null!==g&&(a=g.X()[z](a),g.zd(a),g.lc(c,a));b.X()[x]()[n](function(a){b[lb](a);d.ea(a)});return c}
function qf(a,b,c){function d(a){b(a)&&g[w](a);null!=c&&c(a)||a.X()[n](d)}var g=[];d(a);return g}function wf(a,b){var c=b||function(a){return a[r]()+"\n"},d="";a.jc(function(a){for(var b=0;b<a.oi();b++)d+="-";d+=c(a)});return d};

function xf(a){ge[F](this);this.Jb=a;this.Pa=!1}M(xf,ge);J=xf[B];J.zb=function(){return of(this,function(a){if(a instanceof xf){var b=new xf(a.Jb);b.Pa=a.Pa;b.De(a.ga());return b}return a.zb()}[p](this))};J.sb=function(a){var b=a||[];this.jc(function(a){a!=this&&a.sb(b)}[p](this));return(new Q(b)).c()};J.Cd=function(a){this.Pa!=a&&(this.Pa=a,this.Jb="and"==this.Jb?"or":"and",this.X()[n](function(b){return b.Cd(a)}))};J.eval=function(a){var b=this.X().map(function(b){return b.eval(a)});return this.ih(b)};
J.ih=function(a){return"and"==this.Jb?Qd(a):Rd(a)};f(J,function(){return"combined_pred_"+this.Jb[r]()});function yf(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b};function zf(){this[Ma]()}var Af=ba[B][Pa],Bf=ba[B][Wa];J=zf[B];J.set=function(a,b){this.Nc(a);var c=!this.Ac(a);this.f[a]=b;if("__proto__"==a||!Cf&&!Af[F](this.f,a)){delete this.f[a];var d=Ub(this.wb,a);if(c=0>d)d=this.wb[A];this.wb[d]=a;this.Ad[d]=b}c&&this.R++};J.get=function(a,b){this.Nc(a);if(this.Ac(a))return this.f[a];var c=Ub(this.wb,a);return 0<=c?this.Ad[c]:b};
ja(J,function(a){this.Nc(a);if(this.Ac(a))return this.R--,delete this.f[a],!0;a=Ub(this.wb,a);return 0<=a?(this.R--,$b(this.wb,a),$b(this.Ad,a),!0):!1});J.addAll=function(a){Vb(a.G(),function(b){this.set(b,a.get(b))},this)};J.ya=function(){return!this.R};J.Y=I("R");J.s=function(a){this.Nc(a);return this.Ac(a)||0<=Ub(this.wb,a)};J.Uc=function(a){return lc(this.f,function(b,c){return this.Ac(c)&&yf(b,a)},this)||0<=Ub(this.Ad,a)};
J.G=function(){var a;if(Df)a=bc(ba.keys(this.f));else{a=[];for(var b in this.f)Bf[F](this.f,b)&&a[w](b)}cc(a,this.wb);return a};J.c=function(){for(var a=[],b=this.G(),c=0;c<b[A];c++)a[w](this.get(b[c]));return a};J.getEntries=function(){for(var a=[],b=this.G(),c=0;c<b[A];c++){var d=b[c];a[w]([d,this.get(d)])}return a};la(J,function(){this.f=Cf?ba[Qa](null):{};this.wb=[];this.Ad=[];this.R=0});qa(J,function(){var a=new zf;a[fb](this);return a});
J.Ac=function(a){return"__proto__"==a?!1:Cf?a in this.f:Bf[F](this.f,a)};J.Nc=function(a){N(Eb(a),"key must be a string.")};var Cf=!!ba[Qa],Df=!!ba.keys;function Ef(){this[Ma]()}J=Ef[B];J.R=0;la(J,function(){this.R=0;this.f=new zf});qa(J,function(){var a=new Ef;a.wg(this);return a});J.add=function(a,b){var c=this.f.get(a);c||this.f.set(a,c=[]);c[w](b);this.R++};J.wg=function(a){Vb(a.getEntries(),function(a){this.add(a[0],a[1])},this)};J.get=function(a){return(a=this.f.get(a))?bc(a):[]};ja(J,function(a,b){var c=this.f.get(a);if(!c)return!1;var d=ac(c,function(a){return yf(b,a)});d&&(this.R--,0==c[A]&&this.f[m](a));return d});
J.Tf=function(a){var b=this.f.get(a);return this.f[m](a)?(this.R-=b[A],!0):!1};J.ya=function(){return!this.R};J.Y=I("R");J.s=function(a){return this.f.s(a)};J.Uc=function(a){return Yb(this.f.c(),function(b){return Yb(b,function(b){return yf(b,a)})})};J.G=function(){return this.f.G()};J.c=function(){return jc(this.f.c())};J.getEntries=function(){for(var a=this.G(),b=[],c=0;c<a[A];c++)for(var d=a[c],g=this.get(d),k=0;k<g[A];k++)b[w]([d,g[k]]);return b};
function Ff(a,b,c){ge[F](this);this.Ga=a;this.Ua=b;this.S=c;this.Yc=Zd.be().ae(this.Ga.$(),this.S)}M(Ff,ge);J=Ff[B];J.zb=function(){var a=new Ff(this.Ga,this.Ua,this.S);a.De(this.ga());return a};J.sb=function(a){return null!=a?(a[w](this.Ga),a[w](this.Ua),a):[this.Ga,this.Ua]};J.eval=function(a){var b=a[E][Ba](function(a){var b=a.M(this.Ga);a=a.M(this.Ua);return this.Yc(b,a)},this);return new Md(b,a.T())};f(J,function(){return"join_pred("+this.Ga.j()+", "+this.Ua.j()+")"});
J.Oe=function(a){return-1!=a.T()[z](this.Ga.V().xa())};J.Eg=function(a){return-1!=a.T()[z](this.Ua.V().xa())};J.wh=function(a,b){var c=null,d=null;this.Oe(a)?(this.Re(a,b),c=a,d=b):(this.Re(b,a),c=b,d=a);return[c,d]};J.Re=function(a,b){N(this.Oe(a),"Mismatch between join predicate left operand and right relation.");N(this.Eg(b),"Mismatch between join predicate right operand and right relation.")};J.Eh=function(a,b){var c=this.wh(a,b),d=c[0],c=c[1];return"eq"==this.S?this.Fh(d,c):this.Gh(d,c)};
J.Gh=function(a,b){for(var c=[],d=a.T(),g=b.T(),k=0;k<a[E][A];k++)for(var l=0;l<b[E][A];l++)if(this.Yc(a[E][k].M(this.Ga),b[E][l].M(this.Ua))){var q=Vd(a[E][k],d,b[E][l],g);c[w](q)}d=a.T()[Ia](b.T());return new Md(c,d)};
J.Fh=function(a,b){var c=a,d=b,g=this.Ga,k=this.Ua;a[E][A]>b[E][A]&&(c=b,d=a,g=this.Ua,k=this.Ga);var l=new Ef,q=[];c[E][n](function(a){var b=String(a.M(g));l.add(b,a)});var C=c.T(),Ea=d.T();d[E][n](function(a){var b=String(a.M(k));l.s(b)&&l.get(b)[n](function(b){b=Vd(a,Ea,b,C);q[w](b)})});c=a.T()[Ia](b.T());return new Md(q,c)};
function Gf(a,b,c){return null===b?new ie(a,b,c):xb(b.j)?new Ff(a,b,c):new ie(a,b,c)};
var Hf={};K("lf.schema.DataStoreType",Hf,void 0);Hf.INDEXED_DB=0;Hf.MEMORY=1;Hf.LOCAL_STORAGE=2;Hf.FIREBASE=3;Hf.WEB_SQL=4;Hf.OBSERVABLE_STORE=5;function If(a,b,c,d){this.gg=a;wa(this,b);this.md=c;this.h=d}If[B].j=function(){return this.gg+"."+this[kb]};If[B].pf=function(){return this.h[ob](function(a){return a.Va.dc()})};function Jf(a,b,c,d){this.u=a;this.ma=c;this.H=b;this.td=d;this.Za=null}ia(Jf[B],I("u"));Jf[B].La=I("Za");Jf[B].xa=function(){return this.Za||this.u};
Jf[B].Mc=function(a){var b=new this.constructor(this.u);b.Za=a;return b};K("lf.schema.Table.prototype.createRow",Jf[B].Xc,void 0);K("lf.schema.Table.prototype.deserializeRow",Jf[B].Yb,void 0);Jf[B].Ca=I("ma");Jf[B].sb=I("H");K("lf.schema.Table.prototype.getConstraint",Jf[B].bc,void 0);Jf[B].Mb=I("td");Jf[B].Db=function(){return this.u+".#"};
function S(a,b){ra(this,a);this.Tb=b;this.Za=null}J=S[B];ia(J,function(){return this.Tb+"("+this[ab][h]()+")"});J.j=function(){return this.Tb+"("+this[ab].j()+")"};J.V=function(){return this[ab].V()};f(J,function(){return this.j()});J.$=function(){return this[ab].$()};J.La=I("Za");J.Ca=function(){return[]};J.dc=vb(!1);J.Mc=function(a){this.Za=a;return this};K("lf.fn.AggregatedColumn.prototype.as",S[B].Mc,void 0);S[B].ef=function(){for(var a=[this],b=this;b instanceof S;)a[w](b[ab]),b=b[ab];return a};
function Kf(a){this.Za=a||null;this.C=new Jf("#UnknownTable",[],[],!1)}J=Kf[B];ia(J,vb("*"));J.j=function(){return this[h]()};f(J,function(){return this.j()});J.V=I("C");J.$=vb(4);J.La=I("Za");J.Ca=function(){return[]};J.dc=vb(!1);
K("lf.fn.avg",function(a){return new S(a,"AVG")},void 0);K("lf.fn.count",function(a){return new S(a||new Kf,"COUNT")},void 0);function Lf(a){return new S(a,"DISTINCT")}K("lf.fn.distinct",Lf,void 0);K("lf.fn.max",function(a){return new S(a,"MAX")},void 0);K("lf.fn.min",function(a){return new S(a,"MIN")},void 0);K("lf.fn.stddev",function(a){return new S(a,"STDDEV")},void 0);K("lf.fn.sum",function(a){return new S(a,"SUM")},void 0);K("lf.fn.geomean",function(a){return new S(a,"GEOMEAN")},void 0);
function T(a,b){ee[F](this,"","");this.Oh=b;this.If=a}M(T,ee);J=T[B];J.Z=vb(null);ha(J,function(a,b){switch(this.Oh){case 1:return this.Jh(a,b);case 0:return this.Ih(a,b);default:return this.Lh(a,b)}});f(J,vb("dummy_node"));J.Kc=function(){return this[r]()};J.Pe=function(a){N(-1==this.If||a[A]==this.If)};J.Lh=function(a,b){return new O(L(function(c){c(this.fa(a,[],b))},this))};J.Jh=function(a,b){return this.ib(0)[Ga](a,b)[D](L(function(c){this.Pe(c);return this.fa(a,c,b)},this))};
J.Ih=function(a,b){var c=this.X().map(function(c){return c[Ga](a,b)});return Kc(c)[D](L(function(c){var g=[];c[n](function(a){for(var b=0;b<a[A];++b)g[w](a[b])});this.Pe(g);return this.fa(a,g,b)},this))};
function Mf(a){T[F](this,-1,1);this.Le=a}M(Mf,T);f(Mf[B],function(){return"aggregation("+this.Le.map(function(a){return a.j()})[r]()+")"});Mf[B].fa=function(a,b){b[n](function(a){(new Nf(a,this.Le)).Rg()},this);return b};function Nf(a,b){this.Aa=a;this.H=b}
Nf[B].Rg=function(){this.H[n](function(a){a=a.ef().reverse();for(var b=1;b<a[A];b++){var c=a[b],d=c.ef()[x](-1)[0],g=this.si(c),k=null;switch(c.Tb){case "MIN":k=Of(g,d);break;case "MAX":k=Pf(g,d);break;case "DISTINCT":k=Qf(g,d);break;case "COUNT":k=g[E][A];break;case "SUM":k=Rf(g,d);break;case "AVG":0<g[E][A]&&(k=Rf(g,d)/g[E][A]);break;case "GEOMEAN":k=Sf(g,d);break;default:k=Tf(g,d)}this.Aa.Tj(c,k)}},this)};Nf[B].si=function(a){return a[ab]instanceof S?this.Aa.ac(a[ab]):this.Aa};
function Of(a,b){var c=null;a[E][n](function(a){a=a.M(b);if(null===c||a<c)c=a});return c}function Pf(a,b){var c=null;a[E][n](function(a){a=a.M(b);if(null===c||a>c)c=a});return c}function Rf(a,b){return a[E][eb](function(a,d){return a+d.M(b)},0)}function Tf(a,b){var c=a[E].map(function(a){return a.M(b)});return cd[v](null,c)}function Sf(a,b){var c=0,d=a[E][eb](function(a,d){var l=d.M(b);return 0!=l?(c++,a+ea.log(l)):a},0);return 0==c?null:ea.pow(ea.E,d/c)}
function Qf(a,b){var c=new P;a[E][n](function(a){var g=a.M(b);c.set(g,a)});return new Md(c.c(),a.T())};
function U(){ee[F](this,"","")}M(U,ee);function Uf(a,b){U[F](this);na(this,a);ka(this,b)}M(Uf,U);function Vf(a,b){Uf[F](this,a,b)}M(Vf,Uf);function Wf(a){U[F](this);na(this,a)}M(Wf,U);f(Wf[B],function(){return"delete("+this[t][h]()+")"});function Xf(a,b){U[F](this);na(this,a);this.Ge=b}M(Xf,U);f(Xf[B],function(){var a=[];this.Ge&&(a=this.Ge.map(function(a){return a.K[h]()},this));return"update("+this[t][h]()+", ["+a[H](",")+"])"});function Yf(a){U[F](this);this.za=a}M(Yf,U);
f(Yf[B],function(){return"select("+this.za[r]()+")"});function Zf(a){U[F](this);na(this,a)}M(Zf,U);f(Zf[B],function(){var a="table_access("+this[t][h]();null===this[t].La()||(a+=" as "+this[t].La());return a+")"});function $f(){U[F](this)}M($f,U);f($f[B],vb("cross_product"));function ag(a,b){U[F](this);this.h=a;this.Fb=b}M(ag,U);f(ag[B],function(){var a="project("+this.h[r]();if(null!==this.Fb)var b=this.Fb.map(function(a){return a.j()})[H](", "),a=a+(", groupBy("+b+")");return a+")"});
function bg(a){U[F](this);this.J=a}M(bg,U);f(bg[B],function(){return"order_by("+ne(this.J)+")"});function cg(a){U[F](this);this.h=a}M(cg,U);f(cg[B],function(){return"aggregation("+this.h[r]()+")"});function dg(a){U[F](this);this.h=a}M(dg,U);f(dg[B],function(){return"group_by("+this.h[r]()+")"});function eg(a){U[F](this);this.ka=a}M(eg,U);f(eg[B],function(){return"limit("+this.ka+")"});function fg(a){U[F](this);this.ja=a}M(fg,U);f(fg[B],function(){return"skip("+this.ja+")"});
function gg(a){U[F](this);this.za=a}M(gg,U);f(gg[B],function(){return"join("+this.za[r]()+")"});
function hg(){};
function ig(){}M(ig,hg);ig[B].ub=function(a){this.da=a;this.Ka(this.da);return this.da};ig[B].Ka=function(a){if(a instanceof Yf){N(1==a.qa(),"SelectNode must have exactly one child.");var b=this.Te(a.za),b=this.qh(b);vf(a,a,b[0],b[1]);a==this.da&&(this.da=b[0]);a=b[0]}a.X()[n](function(a){this.Ka(a)},this)};ig[B].Te=function(a){if(0==a.qa()||"and"!=a.Jb)return[a];var b=a.X()[x]().map(function(b){a[lb](b);return this.Te(b)},this);return jc(b)};
ig[B].qh=function(a){var b=null,c=null;a.map(function(a,g){var k=new Yf(a);0==g?b=k:c.ea(k);c=k},this);return[b,c]};
function jg(){}M(jg,hg);jg[B].ub=function(a){this.da=a;this.Ka(this.da);return this.da};jg[B].Ka=function(a){if(a instanceof $f)for(;2<a.qa();){for(var b=new $f,c=0;2>c;c++){var d=a.zd(0);b.ea(d)}a.lc(b,0)}a.X()[n](function(a){this.Ka(a)},this)};
function kg(){T[F](this,2,0)}M(kg,T);f(kg[B],vb("cross_product"));kg[B].fa=function(a,b){for(var c=b[0],d=b[1],g=[],k=c.T(),l=d.T(),q=0;q<c[E][A];q++)for(var C=0;C<d[E][A];C++){var Ea=Vd(c[E][q],k,d[E][C],l);g[w](Ea)}c=c.T()[Ia](d.T());return[new Md(g,c)]};

function lg(a,b){qe[F](this,a,b);this.Ia=a.m(pd);this.tb=a.m(qd)}M(lg,qe);ua(lg[B],vb(2));lg[B].ue=function(a){0==this.$()?this.oj(a):this.Ic()};lg[B].oj=function(a){this.wd[n](function(b,c){b instanceof me&&this.tb.rg(b,a[c])},this)};lg[B].Ic=function(){var a=this.tb.he(this.Z().c());0!=a[A]&&(a=new re(this[Oa],a),this.Ia.Pb(a))};
function mg(){je[F](this)}M(mg,je);qa(mg[B],function(){var a=new mg;a.Sc(this);a.g=this.g;return a});ma(mg[B],function(a){mg.Xa[p][F](this,a);this.Md(a);return this});
function ng(){je[F](this)}M(ng,je);qa(ng[B],function(){var a=new ng;a.Sc(this);a.Oa=this.Oa;this[La]&&ka(a,this[La]instanceof Wd?this[La]:this[La][x]());a.mc=this.mc;a.Ub=this.Ub;return a});ma(ng[B],function(a){ng.Xa[p][F](this,a);this.Ub&&ka(this,this.Ub instanceof Wd?a[this.Ub.jb()]:this.Ub.map(function(b){return b instanceof Wd?a[b.jb()]:b}));return this});
function og(){je[F](this)}M(og,je);qa(og[B],function(){var a=new og;a.Sc(this);na(a,this[t]);a.set=this.set?this.set[x]():this.set;return a});ma(og[B],function(a){og.Xa[p][F](this,a);this.set[n](function(b){-1!=b.Oc&&ta(b,a[b.Oc])});this.Md(a);return this});
function pg(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+Vc(b)+"'";default:return"'"+b[r]()+"'"}}function qg(a,b){var c=a.mc?"INSERT OR REPLACE":"INSERT",d=a.Oa.sb(),c=c+(" INTO "+a.Oa[h]()+"("),c=c+d.map(function(a){return a[h]()})[H](", "),c=c+") VALUES (";return a[La].map(function(a){var k=d.map(function(c){var d=a.B()[c[h]()];return b?null!=d?"#":"NULL":pg(c.$(),d)});return c+k[H](", ")+");"})[H]("\n")}
function rg(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function sg(a,b,c,d){return a instanceof Wd?"?"+a.jb()[r]():d?null!=a?"#":"NULL":"match"==b?"'"+a[r]()+"'":"in"==b?"("+a.map(function(a){return pg(c,a)})[H](", ")+")":"between"==b?pg(c,a[0])+" AND "+pg(c,a[1]):pg(c,a)[r]()}
function tg(a,b){return a.X().map(function(a){return"("+ug(a,b)+")"})[H]("and"==a.Jb?" AND ":" OR ")}function ug(a,b){if(a instanceof ie)return[a.K.j(),rg(a.S),sg(a[y],a.S,a.K.$(),b)][H](" ");if(a instanceof xf)return tg(a,b);if(a instanceof Ff)return[a.Ga.j(),rg(a.S),a.Ua.j()][H](" ");throw new R("NotSupportedError","toSql does not support predicate type: "+typeof a);}function vg(a,b){var c=ug(a,b);return c?" WHERE "+c:""}
function wg(a,b){var c="UPDATE "+a[t][h]()+" SET ",c=c+a.set.map(function(a){var b=a.K.j()+" = ";return-1!=a.Oc?b+"?"+a.Oc[r]():b+pg(a.K.$(),a[y])[r]()})[H](", ");a.A&&(c+=vg(a.A,b));return c+";"}
function xg(a,b){var c="*";a.h[A]&&(c=a.h.map(function(a){return a.La()?a.j()+" AS "+a.La():a.j()})[H](", "));var d=a.g.map(function(a){return a.xa()!=a[h]()?a[h]()+" AS "+a.xa():a[h]()})[H](", "),c="SELECT "+c+" FROM "+d;a.A&&(c+=vg(a.A,b));a.J&&(d=a.J.map(function(a){return a.K.j()+(0==a.mb?" DESC":" ASC")})[H](", "),c+=" ORDER BY "+d);a.ha&&(d=a.ha.map(function(a){return a.j()})[H](", "),c+=" GROUP BY "+d);a.ka&&(c+=" LIMIT "+a.ka[r]());a.ja&&(c+=" SKIP "+a.ja[r]());return c+";"}
function yg(a,b){var c=b||!1,d=a.kf();if(d instanceof ng)return qg(d,c);if(d instanceof mg){var g="DELETE FROM "+d.g[h]();d.A&&(g+=vg(d.A,c));return g+";"}if(d instanceof og)return wg(d,c);if(d instanceof me)return xg(d,c);throw new R("NotSupportedError","toSql not implemented for "+typeof d);};
function V(a,b){this.global=a;this.Ej=a.m(od);this.Ia=a.m(pd);this.a=b}K("lf.query.BaseBuilder",V,void 0);ha(V[B],function(){try{this.$a()}catch(a){return Jc(a)}return new O(function(a,c){var d=new lg(this[Oa],[this.zc()]);this.Ia.Pb(d)[D](function(c){a(c[0].de())},c)},this)});ha(V[B],V[B][Ga]);V[B].cf=function(){var a=L(function(a){return a.Kc(this.a)+"\n"},this);return wf(this.ee().Cb(),a)};V[B].explain=V[B].cf;ma(V[B],function(a){this.a[p](a);return this});ma(V[B],V[B][p]);
V[B].fk=function(a){return yg(this,a)};V[B].toSql=V[B].fk;J=V[B];J.$a=tb();J.kf=function(){return this.a[Ya]()};J.ed=I("a");J.ee=function(){null==this.Nf&&(this.Nf=this.Ej.zi(this.a));return this.Nf};J.zc=function(){return{context:this.kf(),we:this.ee()}};J.xi=function(){return{context:this.ed(),we:this.ee()}};
function zg(a){V[F](this,a,new mg)}M(zg,V);K("lf.query.DeleteBuilder",zg,void 0);zg[B].g=function(a){this.Ig();this.a.g=a;return this};zg[B].from=zg[B].g;zg[B].A=function(a){this.Ld();this.a.A=a;return this};zg[B].where=zg[B].A;zg[B].Ig=function(){if(null!=this.a.g)throw new R("SyntaxError","from() has already been called.");};zg[B].Ld=function(){if(null!=this.a.A)throw new R("SyntaxError","where() has already been called.");};
zg[B].$a=function(){zg.Xa.$a[F](this);if(null==this.a.g)throw new R("SyntaxError","Invalid usage of delete()");};
function Ag(a,b){V[F](this,a,new ng);this.a.mc=b||!1}M(Ag,V);K("lf.query.InsertBuilder",Ag,void 0);Ag[B].$a=function(){Ag.Xa.$a[F](this);var a=this.a;if(null==a.Oa||null==a[La])throw new R("SyntaxError","Invalid usage of insert()");if(a.mc&&null===a.Oa.bc().fe())throw new R("SyntaxError","Attemted to insert or replace in a table with no primary key.");};Ag[B].Oa=function(a){this.Jg();this.a.Oa=a;return this};Ag[B].into=Ag[B].Oa;
ka(Ag[B],function(a){this.Kg();a instanceof Wd||a[ob](function(a){return a instanceof Wd})?this.a.Ub=a:ka(this.a,a);return this});ka(Ag[B],Ag[B][La]);Ag[B].Jg=function(){if(null!=this.a.Oa)throw new R("SyntaxError","into() has already been called.");};Ag[B].Kg=function(){if(null!=this.a[La])throw new R("SyntaxError","values() has already been called.");};
function Bg(a){return Cg("and",e[B][x][F](arguments))}K("lf.op.and",Bg,void 0);K("lf.op.or",function(a){return Cg("or",e[B][x][F](arguments))},void 0);function Cg(a,b){var c=new xf(a);b[n](function(a){c.ea(a)});return c}K("lf.op.not",function(a){a.Cd(!0);return a},void 0);
function W(a,b){V[F](this,a,new me);this.df=this.ug=!1;this.a.h=b;this.Yg();this.Xg()}M(W,V);K("lf.query.SelectBuilder",W,void 0);J=W[B];J.$a=function(){W.Xa.$a[F](this);var a=this.a;if(null==a.g)throw new R("SyntaxError","Invalid usage of select()");if(xb(a.Hb)&&!xb(a.ka)||xb(a.Rb)&&!xb(a.ja))throw new R("SyntaxError","Binding parameters of limit/skip without providing values");this.eh()};
J.Yg=function(){var a=this.a.h[Ba](function(a){return a instanceof S&&"DISTINCT"==a.Tb},this);if(0!=a[A]&&(1!=a[A]||1!=this.a.h[A]))throw new R("SyntaxError","Invalid usage of lf.fn.distinct()");};J.eh=function(){null!=this.a.ha?this.Zg():this.dh()};
J.Zg=function(){var a=this.a.h[Ba](function(a){return!(a instanceof S)}).map(function(a){return a.j()}),b=!1;if(0==this.a.ha[A]||0==this.a.h[A])b=!0;else{var c=this.a.ha.map(function(a){return a.j()});(b=a[ob](function(a){return-1==c[z](a)}))||(b=this.a.ha[ob](function(a){a=a.$();return 6==a||0==a}))}if(b)throw new R("SyntaxError","Invalid projection list or groupBy columns");};
J.dh=function(){var a=this.a.h[ob](function(a){return a instanceof S},this),b=this.a.h[ob](function(a){return!(a instanceof S)},this)||0==this.a.h[A];if(a&&b)throw new R("SyntaxError","Invalid projection list, aggregated and non-aggregated can't be mixed.");};J.Xg=function(){this.a.h[n](function(a){if(a instanceof S&&!Dg(a.Tb,a.$()))throw new R("SyntaxError","Invalid aggregation detected for"+a.j());},this)};
J.Kd=function(a,b){if(null!=a)throw new R("SyntaxError",b+"() has already been called.");};J.Qe=function(a,b){if(0>a)throw new R("SyntaxError",b+"() does not accept negative values");};J.g=function(a){if(this.df)throw new R("SyntaxError","from() has already been called.");this.df=!0;null==this.a.g&&(this.a.g=[]);this.a.g[w][v](this.a.g,e[B][x][F](arguments));return this};W[B].from=W[B].g;
W[B].A=function(a){if(this.ug)throw new R("SyntaxError","where() has already been called.");this.ug=!0;this.Se(a);return this};W[B].where=W[B].A;W[B].Se=function(a){null!=this.a.A&&(a=Bg(a,this.a.A));this.a.A=a};W[B].ke=function(a,b){null==this.a.g&&(this.a.g=[]);this.a.g[w](a);this.Se(b);return this};W[B].innerJoin=W[B].ke;W[B].ej=function(){throw new R("NotSupportedError","Not implemented yet");};W[B].leftOuterJoin=W[B].ej;
W[B].ka=function(a){this.Kd(this.a.ka||this.a.Hb,"limit");a instanceof Wd?this.a.Hb=a:(this.Qe(a,"limit"),this.a.ka=a);return this};W[B].limit=W[B].ka;W[B].ja=function(a){this.Kd(this.a.ja||this.a.Rb,"skip");a instanceof Wd?this.a.Rb=a:(this.Qe(a,"skip"),this.a.ja=a);return this};W[B].skip=W[B].ja;W[B].J=function(a,b){null==this.a.J&&(this.a.J=[]);this.a.J[w]({K:a,mb:null!=b?b:1});return this};W[B].orderBy=W[B].J;
W[B].ha=function(a){this.Kd(this.a.ha,"groupBy");null==this.a.ha&&(this.a.ha=[]);this.a.ha[w][v](this.a.ha,e[B][x][F](arguments));return this};W[B].groupBy=W[B].ha;function Dg(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}qa(W[B],function(){var a=new W(this[Oa],this.a.h);a.a=this.a[Ya]();a.a.qc=null;return a});qa(W[B],W[B][Ya]);
function Eg(a,b){V[F](this,a,new og);na(this.a,b)}M(Eg,V);K("lf.query.UpdateBuilder",Eg,void 0);Eg[B].set=function(a,b){var c={Oc:b instanceof Wd?b.jb():-1,K:a,value:b};null!=this.a.set?this.a.set[w](c):this.a.set=[c];return this};Eg[B].set=Eg[B].set;Eg[B].A=function(a){this.Ld();this.a.A=a;return this};Eg[B].where=Eg[B].A;Eg[B].Ld=function(){if(null!=this.a.A)throw new R("SyntaxError","where() has already been called.");};
Eg[B].$a=function(){Eg.Xa.$a[F](this);if(null==this.a.set)throw new R("SyntaxError","Invalid usage of update()");if(this.a.set[ob](function(a){return a[y]instanceof Wd}))throw new R("SyntaxError","Update set value not bound");};
function Fg(a){this.a=a;this.Ba=null}Fg[B].$b=function(){null===this.Ba&&(this.Ba=this.$c());return this.Ba};function Gg(a){Fg[F](this,a)}M(Gg,Fg);Gg[B].$c=function(){return this.a.mc?new Vf(this.a.Oa,this.a[La]):new Uf(this.a.Oa,this.a[La])};function Hg(a){Fg[F](this,a)}M(Hg,Fg);Hg[B].$c=function(){var a=new Xf(this.a[t],this.a.set),b=null!=this.a.A?new Yf(this.a.A.zb()):null,c=new Zf(this.a[t]);null===b?a.ea(c):(b.ea(c),a.ea(b));return a};
function Ig(a,b){this.Ba=a;this.Ae=b}Ig[B].$b=function(){this.Ae[n](function(a){this.Ba=a.ub(this.Ba)},this);return this.Ba};
function Jg(a){Fg[F](this,a)}M(Jg,Fg);Jg[B].$c=function(){var a=new Wf(this.a.g),b=null!=this.a.A?new Yf(this.a.A.zb()):null,c=new Zf(this.a.g);null===b?a.ea(c):(b.ea(c),a.ea(b));return(new Ig(a,[new ig])).$b()};
function Lg(){}M(Lg,hg);Lg[B].ub=function(a){this.da=a;this.Ka(this.da);return this.da};Lg[B].Ka=function(a){if(a instanceof Yf&&a.za instanceof Ff){N(1==a.qa(),"SelectNode must have exactly one child.");var b=a.ib(0);if(b instanceof $f){var c=new gg(a.za);vf(a,b,c,c);a==this.da&&(this.da=c);a=c}}a.X()[n](function(a){this.Ka(a)},this)};
function Mg(){this.Id=new Q}M(Mg,hg);J=Mg[B];J.ub=function(a){this.da=a;this.Ka(this.da);this.Id[Ma]();return this.da};J.Ka=function(a){if(this.sf(a)){var b=a.za instanceof ie?this.Cj(a):this.Bj(a);this.Id.add(a);b==a&&(b=a.ib(0));null!==b&&(Bb(b[Da]())&&(this.da=b),this.sf(b)&&!this.Id[u](b)&&this.Ka(b))}else a.X()[n](function(a){this.Ka(a)},this)};
J.vd=function(a,b){var c=a;if(this.Xj(a))c=tf(a),this.vd(a,b);else if(this.Wj(a)){var d=[],c=uf(a,b,function(a){a=new Yf(a.za);d[w](a);return a});d[n](function(a){this.vd(a,b)},this)}return c};J.Cj=function(a){var b=new Q([a.za.K.V().xa()]),c=function(a){return this.bf(a,b)}[p](this);return this.vd(a,c)};J.Bj=function(a){var b=new Q([a.za.Ga.V().xa(),a.za.Ua.V().xa()]),c=function(a){return this.bf(a,b)}[p](this);return this.vd(a,c)};
J.bf=function(a,b){var c=new Q;pf(a)[n](function(a){c.add(a[t].xa())},this);a instanceof Zf&&c.add(a[t].xa());return c.nh(b)};J.sf=function(a){return a instanceof Yf&&!(a.za instanceof xf)};J.Wj=function(a){a=a.ib(0);return a instanceof $f||a instanceof gg};J.Xj=function(a){return a.ib(0)instanceof Yf};
function Ng(a){Fg[F](this,a);this.Rf=this.Df=this.dg=this.Jf=this.Me=this.of=this.$f=this.Ze=this.fg=null}M(Ng,Fg);J=Ng[B];J.$c=function(){this.fi();var a=this.kh(),b=[new ig,new jg,new Mg,new Lg];return(new Ig(a,b)).$b()};J.fi=function(){this.li();this.ai();this.ji();this.gi();this.ki();this.ei();this.ci();this.$h();this.hi()};
J.kh=function(){for(var a=[this.Df,this.dg,this.Rf,this.Jf,this.Me,this.of,this.$f,this.Ze],b=null,c=null,d=0;d<a[A];d++){var g=a[d];null!==g&&(null===c?c=g:a[b].ea(g),b=d)}this.fg[n](function(c){a[b].ea(c)});return c};J.li=function(){this.fg=this.a.g.map(function(a){return new Zf(a)},this)};J.ai=function(){2<=this.a.g[A]&&(this.Ze=new $f)};J.ji=function(){this.$f=null!=this.a.A?new Yf(this.a.A.zb()):null};J.gi=function(){this.a.J&&(this.Jf=new bg(this.a.J))};
J.ei=function(){null!=this.a.ka&&(this.Df=new eg(this.a.ka))};J.ki=function(){null!=this.a.ja&&0<this.a.ja&&(this.dg=new fg(this.a.ja))};J.ci=function(){null!=this.a.ha&&(this.of=new dg(this.a.ha))};J.$h=function(){var a=this.a.h[Ba](function(a){return a instanceof S});null!=this.a.J&&this.a.J[n](function(b){b.K instanceof S&&a[w](b.K)});0<a[A]&&(this.Me=new cg(a))};J.hi=function(){this.Rf=new ag(this.a.h||[],this.a.ha||null)};
function Og(){}Og[B].create=function(a){var b=null;if(a instanceof ng)b=new Gg(a);else if(a instanceof mg)b=new Jg(a);else if(a instanceof me)b=new Ng(a);else if(a instanceof og)b=new Hg(a);else throw new R("SyntaxError","Unknown query context");return b.$b()};
function Pg(a){T[F](this,1,1);this.C=a}M(Pg,T);f(Pg[B],function(){return"delete("+this.C[h]()+")"});Pg[B].Z=I("C");Pg[B].fa=function(a,b){var c=b[0][E].map(function(a){return a.pa});a[m](this.C,c);return[Pd()]};
function Qg(a){T[F](this,1,1);this.nf=a}M(Qg,T);f(Qg[B],function(){return"groupBy("+this.nf.map(function(a){return a.j()})[r]()+")"});Qg[B].fa=function(a,b){return this.Tg(b[0])};Qg[B].Tg=function(a){var b=new Ef,c=function(a){return this.nf.map(function(b){return a.M(b)},this)[H](",")}[p](this);a[E][n](function(a){b.add(c(a),a)},this);return b.G().map(function(c){return new Md(b.get(c),a.T())},this)};
function Rg(a){N(1<a[A],"Should only be called for cross-column indices.");a=a.map(function(a){return a.c()});a=hd[v](null,a);var b=[];gd(a,function(a){b[w](a)});return b}function Sg(a){this.Gb=a}Sg[B].cd=function(){return 1==this.Gb.h[A]?[Kd()]:[this.Gb.h.map(function(){return Kd()})]};function Tg(a,b){this.Gb=a;this.na=b;this.Pd=this.Bf=null}
Tg[B].Ug=function(a){var b=new P;this.na.G()[n](function(c){var d=this.na.get(c).map(function(b){return a.gd(b)},this),g=new mf([Kd()]);d[n](function(a){a=new mf(a.ek());g=nf(g,a)});b.set(c,g)},this);return b};Tg[B].Th=function(a){for(var b=this.Gb.h[A]-1;0<=b;b--){var c=this.Gb.h[b];if(null!==a.get(c.Va[h](),null))break;a.set(c.Va[h](),new mf([Kd()]))}};Tg[B].cd=function(a){if(this.Bf==a)return this.Pd;var b=this.Ug(a);this.Th(b);this.Pd=1==this.Gb.h[A]?b.c()[0].c():Rg(this.Fi(b));this.Bf=a;return this.Pd};
Tg[B].Fi=function(a){var b=new P,c=0;this.Gb.h[n](function(a){b.set(a.Va[h](),c);c++});return a.G()[pb](function(a,c){return b.get(a)-b.get(c)}).map(function(b){return a.get(b)})};
function Ug(a,b){this.ig=b;this.N=a.m(nd)}Ug[B].gh=function(a,b){var c=b[Ba](this.Zi,this);if(0==c[A])return null;c=this.di(c);if(0==c[A])return null;if(1==c[A])return c[0];var d=Number.MAX_VALUE;return c[eb](function(b,c){var l=c.Sg(a);return l<d?(d=l,c):b},null)};Ug[B].di=function(a){return this.ig.Ca().map(function(b){b=new Vg(this.N,b);b.mh(a);return b},this)[Ba](function(a){return a.dj()})};Ug[B].Zi=function(a){return a instanceof ie&&a.tf()?a.K.V()==this.ig:!1};
function Vg(a,b){this.N=a;this.kb=b;this.qf=new Q;this.qf[fb](this.kb.h.map(function(a){return a.Va[h]()}));this.qe=this.na=null}J=Vg[B];J.Ai=function(){return null===this.na?[]:this.na.c()};J.jf=function(){N(this.na);null===this.qe&&(this.qe=new Tg(this.kb,this.na));return this.qe};J.mh=function(a){a[n](function(a){var c=a.sb()[0][h]();this.qf[u](c)&&(null===this.na&&(this.na=new Ef),this.na.add(c,a.ga()))},this)};
J.dj=function(){if(null===this.na)return!1;for(var a=!1,b=!0,c=0;c<this.kb.h[A];c++){var d=this.na.s(this.kb.h[c].Va[h]());if(a&&d){b=!1;break}d||(a=!0)}return b};J.Sg=function(a){a=this.jf().cd(a);var b=this.N.get(this.kb.j());return a[eb](function(a,d){return a+b.Wc(d)},0)};
function Wg(a,b,c,d){T[F](this,0,-1);this.N=a.m(nd);this.index=b;this.zf=c;this.ze=d;this.Fd=this.Ed=!1}M(Wg,T);f(Wg[B],function(){return"index_range_scan("+this[Ta].j()+", ?, "+(this.ze?"reverse":"natural")+(this.Ed?", limit:?":"")+(this.Fd?", skip:?":"")+")"});Wg[B].Kc=function(a){var b=this[r](),c=this.zf.cd(a),b=b[Ha]("?",c[r]());this.Ed&&(b=b[Ha]("?",a.ka[r]()));this.Fd&&(b=b[Ha]("?",a.ja[r]()));return b};
Wg[B].fa=function(a,b,c){a=this.zf.cd(c);c=this.N.get(this[Ta].j()).Ma(a,this.ze,this.Ed?c.ka:void 0,this.Fd?c.ja:void 0).map(function(a){return new Rc(a,{})},this);return[Sd(c,[this[Ta].gg])]};
function Xg(a){T[F](this,1,1);this.ud=a}M(Xg,T);f(Xg[B],vb("select(?)"));Xg[B].Kc=function(a){a=a.gd(this.ud);return this[r]()[Ha]("?",a[r]())};Xg[B].fa=function(a,b,c){return[c.gd(this.ud).eval(b[0])]};
function Yg(a,b){T[F](this,1,1);this.la=a.m(md);this.C=b}M(Yg,T);f(Yg[B],function(){return"table_access_by_row_id("+this.C[h]()+")"});Yg[B].Z=I("C");Yg[B].fa=function(a,b){return[Sd(this.la.get(b[0].Ei()),[this.C.xa()])]};
function Zg(a,b){T[F](this,0,-1);this.la=a.m(md);this.N=a.m(nd);na(this,b)}M(Zg,T);f(Zg[B],function(){var a="table_access("+this[t][h]();null===this[t].La()||(a+=" as "+this[t].La());return a+")"});Zg[B].Z=I("table");Zg[B].fa=function(){var a=this.N.get(this[t].Db()).Ma();return[Sd(this.la.get(a),[this[t].xa()])]};
function $g(a){this.l=a}M($g,hg);$g[B].ub=function(a,b){this.da=a;qf(a,function(a){return a instanceof Zg})[n](function(a){var d=this.Zh(a);if(0!=d[A]){var g=(new Ug(this.l,a[t])).gh(b,d.map(function(a){return b.gd(a.ud)}));if(null!==g){var k=new P;d[n](function(a){k.set(a.ud,a)},this);this.da=this.Pj(g,k,a,b)}}},this);return this.da};$g[B].Zh=function(a){var b=[];for(a=a[Da]();a;)a instanceof Xg&&b[w](a),a=a[Da]();return b};
$g[B].Pj=function(a,b,c){a.Ai().map(function(a){return b.get(a)})[n](rf);a=new Wg(this.l,a.kb,a.jf(),!1);var d=new Yg(this.l,c[t]);d.ea(a);vf(c,c,d,a);return a.Cb()};
function ah(a,b){T[F](this,0,-1);this.N=a.m(nd);this.C=b}M(ah,T);f(ah[B],function(){return"insert("+this.C[h]()+")"});ah[B].Z=I("C");ah[B].fa=function(a,b,c){bh(this.C,c[La],this.N);a.lb(this.C,c[La]);return[Sd(c[La],[this.C[h]()])]};function bh(a,b,c){a=a.bc().fe();if(null===a?0:a.h[0][Ka]){var d=a.h[0].Va[h](),g=c.get(a.j()).max()[0]||0;b[n](function(a){if(0==a.B()[d]||null==a.B()[d])g++,a.B()[d]=g})}}function ch(a,b){T[F](this,0,-1);this.N=a.m(nd);this.C=b}M(ch,T);
f(ch[B],function(){return"insert_replace("+this.C[h]()+")"});ch[B].Z=I("C");ch[B].fa=function(a,b,c){bh(this.C,c[La],this.N);a.le(this.C,c[La]);return[Sd(c[La],[this.C[h]()])]};
function dh(a){T[F](this,2,0);this.Qf=a}M(dh,T);f(dh[B],function(){return"join("+this.Qf[r]()+")"});dh[B].fa=function(a,b){return[this.Qf.Eh(b[0],b[1])]};
function eh(){T[F](this,1,1)}M(eh,T);f(eh[B],vb("limit(?)"));eh[B].Kc=function(a){return this[r]()[Ha]("?",a.ka[r]())};eh[B].fa=function(a,b,c){b[0][E][G](c.ka);return b};
function fh(a){T[F](this,-1,1);this.J=a}M(fh,T);J=fh[B];f(J,function(){return"order_by("+ne(this.J)+")"});J.fa=function(a,b){if(1==b[A]){var c=this.Vh(b[0]);(null===c?b[0]:b[0].ac(c))[E][pb](this.Bh[p](this))}else b[pb](this.Jj[p](this));return b};J.Vh=function(a){for(var b=null,c=0;c<this.J[A];c++){var d=Lf(this.J[c].K);if(a.Ri(d)){b=d;break}}return b};
J.L=function(a,b){var c=null,d=null,g=null,k=-1;do k++,g=this.J[k].K,c=this.J[k].mb,d=a(g),g=b(g);while(d==g&&k+1<this.J[A]);d=d<g?-1:d>g?1:0;return 1==c?d:-d};J.Jj=function(a,b){return this.L(function(b){return b instanceof S?a.ac(b):a[E][a[E][A]-1].M(b)},function(a){return a instanceof S?b.ac(a):b[E][b[E][A]-1].M(a)})};J.Bh=function(a,b){return this.L(function(b){return a.M(b)},function(a){return b.M(a)})};
function gh(a,b){this.Aa=a;this.H=b}gh[B].mf=function(){return this.H[ob](function(a){return a instanceof S},this)?this.Pi():this.Qi()};
gh[B].Pi=function(){if(1==this.H[A]&&"DISTINCT"==this.H[0].Tb){var a=this.Aa.ac(this.H[0])[E].map(function(a){var b=new Td(new Rc(-1,{}),this.Aa.ne());b.Ce(this.H[0],a.M(this.H[0][ab]));return b},this);return new Md(a,[])}var b=new Td(new Rc(-1,{}),this.Aa.ne());this.H[n](function(a){var d=a instanceof S?this.Aa.ac(a):this.Aa[E][0].M(a);b.Ce(a,d)},this);return new Md([b],this.Aa.T())};
gh[B].Qi=function(){var a=e(this.Aa[E][A]),b=this.Aa.ne();this.Aa[E][n](function(c,d){a[d]=new Td(new Rc(c.pa.id(),{}),b);this.H[n](function(b){a[d].Ce(b,c.M(b))},this)},this);return new Md(a,this.Aa.T())};function hh(a,b){var c=a.map(function(a){return(new gh(a,b)).mf()[E][0]});return new Md(c,a[0].T())};
function ih(a,b){T[F](this,-1,1);this.h=a;this.Fb=b}M(ih,T);J=ih[B];f(J,function(){var a="project("+this.h[r]();if(null!==this.Fb)var b=this.Fb.map(function(a){return a.j()})[H](", "),a=a+(", groupBy("+b+")");return a+")"});J.fa=function(a,b){return 0==b[A]?[Pd()]:1==b[A]?[this.Mh(b[0])]:[this.Kh(b)]};J.Si=function(){return this.h[ob](function(a){return a instanceof S})||null!==this.Fb};J.Kh=function(a){return hh(a,this.h)};J.Mh=function(a){return 0==this.h[A]?a:(new gh(a,this.h)).mf()};
function jh(){T[F](this,1,1)}M(jh,T);f(jh[B],vb("skip(?)"));jh[B].Kc=function(a){return this[r]()[Ha]("?",a.ja[r]())};jh[B].fa=function(a,b,c){return[new Md(b[0][E][x](c.ja),b[0].T())]};
function kh(){}M(kh,hg);kh[B].ub=function(a){var b=qf(a,function(a){return a instanceof eh||a instanceof jh});if(0==b[A])return a;var c=this.Yh(a);if(null===c)return a;b[n](function(a){this.lj(a,c)},this);return c.Cb()};kh[B].lj=function(a,b){a instanceof eh?b.Ed=!0:b.Fd=!0;return rf(a).parent};kh[B].Yh=function(a){a=qf(a,function(a){return a instanceof Wg},function(a){return a instanceof ih&&a.Si()||a instanceof fh||1!=a.qa()||a instanceof Xg});return 0<a[A]?a[0]:null};
function lh(a){this.l=a}M(lh,hg);lh[B].ub=function(a){var b=mh(a);if(null===b)return a;a=this.Hg(b);a==b&&(a=this.Gg(b));return a.Cb()};lh[B].Hg=function(a){var b=a,c=nh(a.ib(0));if(null!==c){var d;d=a.J;for(var g=null,k=c[t].Ca(),l=0;l<k[A]&&null===g;l++)g=oh(k[l],d);d=g;if(null===d)return b;b=new Wg(this.l,d.kb,new Sg(d.kb),d.wf);d=new Yg(this.l,c[t]);d.ea(b);rf(a);b=vf(c,c,d,b)}return b};
lh[B].Gg=function(a){var b=a,c=ph(a.ib(0));if(null!==c){var d=oh(c[Ta],a.J);if(null===d)return b;c.ze=d.wf;b=rf(a).parent}return b};function ph(a){a=qf(a,function(a){return a instanceof Wg},function(a){return 1!=a.qa()});return 0<a[A]?a[0]:null}function nh(a){a=qf(a,function(a){return a instanceof Zg},function(a){return 1!=a.qa()});return 0<a[A]?a[0]:null}function mh(a){a=qf(a,function(a){return a instanceof fh});return 0<a[A]?a[0]:null}
function oh(a,b){if(a.h[A]!=b[A]||!b[qb](function(b,c){return b.K[h]()==a.h[c].Va[h]()}))return null;var c=qh(b,a);return c[0]||c[1]?{kb:a,wf:c[1]}:null}function qh(a,b){var c=a[eb](function(a,b){return a<<1|(0==b.mb?0:1)},0),d=b.h[eb](function(a,b){return a<<1|(0==b.mb?0:1)},0),d=c^d,c=0==d,d=d==ea.pow(2,ea.max(a[A],b.h[A]))-1;return[c,d]};
function rh(a,b,c){this.Ba=a;this.Dj=b;this.Ae=c}rh[B].$b=function(){this.Ae[n](function(a){this.Ba=a.ub(this.Ba,this.Dj)},this);return this.Ba};
function sh(a,b){T[F](this,1,1);this.C=a;this.kk=b}M(sh,T);f(sh[B],function(){return"update("+this.C[h]()+")"});sh[B].Z=I("C");sh[B].fa=function(a,b){var c=b[0][E].map(function(a){var b=this.C.Yb(a.pa.Wa());this.kk[n](function(a){b.B()[a.K[h]()]=a[y]},this);return b},this);a[rb](this.C,c);return[Pd()]};
function th(a){this.l=a}th[B].create=function(a,b){if(a instanceof Vf||a instanceof Uf)return this.Td(a,b);if(a instanceof ag||a instanceof eg||a instanceof fg)return this.Td(a,b,[new $g(this.l),new lh(this.l),new kh]);if(a instanceof Wf||a instanceof Xf)return this.Td(a,b,[new $g(this.l)]);throw new R("NotSupportedError","Unknown query plan node");};th[B].Td=function(a,b,c){a=of(a,L(this.hj,this));return null!=c?new oe((new rh(a,b,c)).$b()):new oe(a)};
th[B].hj=function(a){if(a instanceof ag)return new ih(a.h,a.Fb);if(a instanceof dg)return new Qg(a.h);if(a instanceof cg)return new Mf(a.h);if(a instanceof bg)return new fh(a.J);if(a instanceof fg)return new jh;if(a instanceof eg)return new eh;if(a instanceof Yf)return new Xg(a.za.ga());if(a instanceof $f)return new kg;if(a instanceof gg)return new dh(a.za);if(a instanceof Zf)return new Zg(this.l,a[t]);if(a instanceof Wf)return new Pg(a[t]);if(a instanceof Xf)return new sh(a[t],a.Ge);if(a instanceof
Vf)return new ch(this.l,a[t]);if(a instanceof Uf)return new ah(this.l,a[t]);throw new R("NotSupportedError","Unknown node type");};

function uh(a){this.fj=new Og;this.wj=new th(a)}uh[B].zi=function(a){var b=this.fj[Qa](a);return this.wj[Qa](b,a)};
function vh(){this.Ff=new P}J=vh[B];J.bd=function(a){var b=this.Ff.get(a[h](),null);null===b&&(b=new wh,this.Ff.set(a[h](),b));return b};J.Mi=function(a,b,c){b[n](function(b){this.bd(b).Li(a,c)},this)};J.Wg=function(a,b,c){return b[qb](function(b){return this.bd(b).Vg(a,c)},this)};J.Uf=function(a,b,c){var d=this.Wg(a,b,c);d&&this.Mi(a,b,c);return d};J.yd=function(a,b){b[n](function(b){this.bd(b).yd(a)},this)};J.hh=function(a){a[n](function(a){this.bd(a).Ta=null},this)};
function wh(){this.Qb=this.Ha=this.Ta=this.uc=null}wh[B].yd=function(a){this.uc==a&&(this.uc=null);this.Ta==a&&(this.Ta=null);null===this.Ha||this.Ha[m](a);null===this.Qb||this.Qb[m](a)};wh[B].Vg=function(a,b){var c=null===this.Ha||this.Ha.ya();return 0==b?(null===this.Qb||this.Qb.ya())&&c&&null===this.uc&&null!==this.Ta&&this.Ta==a:3==b?null===this.uc&&null===this.Ta&&null!==this.Ha&&this.Ha[u](a):1==b?null===this.Ta:c&&(null===this.Ta||this.Ta==a)};
wh[B].Li=function(a,b){0==b?(this.Ta=null,this.uc=a):3==b?(null===this.Qb&&(this.Qb=new Q),this.Qb.add(a),null===this.Ha&&(this.Ha=new Q),this.Ha[m](a)):1==b?(null===this.Ha&&(this.Ha=new Q),this.Ha.add(a)):2==b&&(this.Ta=a)};
function xh(){this.Nb=new yh;this.Dc=new vh}J=xh[B];J.Pb=function(a){(2>a[ib]()||2>a[ib]())&&this.Dc.hh(a.Z().c());this.Nb.lb(a);this.Sd();return a.xc().ua};J.Sd=function(){for(var a=this.Nb.c(),b=0;b<a[A];b++){var c=a[b],d=!1;if(d=0==c.$()?this.Vf(c,1,3):this.Vf(c,2,0))this.Nb[m](c),this.Nh(c)}};J.Vf=function(a,b,c){var d=!1,g=a.Z().c();this.Dc.Uf(a.ga(),g,b)&&(d=this.Dc.Uf(a.ga(),g,c));return d};J.Nh=function(a){a[Ga]()[D](L(this.rj,this,a),L(this.qj,this,a))};
J.rj=function(a,b){this.Dc.yd(a.ga(),a.Z().c());a.xc()[nb](b);this.Sd()};J.qj=function(a,b){this.Dc.yd(a.ga(),a.Z().c());a.xc()[cb](b);this.Sd()};function yh(){this.Nb=[]}yh[B].lb=function(a){hc(this.Nb,a,function(a,c){var d=a[ib]()-c[ib]();return 0==d?a.ga()-c.ga():d})};yh[B].c=function(){return this.Nb[x]()};ja(yh[B],function(a){var b=this.Nb;a=Ub(b,a);var c;(c=0<=a)&&$b(b,a);return c});
function zh(a,b){this.Dh=Zd.be();this.Hc=a;this.qd=b;this.H=this.vh()}zh[B].vh=function(){if(0<this.Hc.h[A])return this.Hc.h;var a=[],b=this.Hc.g[x]();null!=this.Hc.ke&&b[w](this.Hc.ke);b[n](function(b){b.sb()[n](function(b){a[w](b)})});return a};zh[B].L=function(a,b){return this.H[qb](function(c){return this.Dh.ae(c.$(),"eq")(a.M(c),b.M(c))},this)};
zh[B].Fg=function(a,b){for(var c=null===a?[]:a[E],d=Zc(c,b[E],L(this.L,this),function(a){return c[a]}),g=[],k=0,l=0;l<c[A];l++){var q=c[l];d[k]==q?k++:(q=this.qd[G](k,1),q=Ah(l,q,0,this.qd),g[w](q))}d=Zc(c,b[E],L(this.L,this),function(a,c){return b[E][c]});for(l=k=0;l<b[E][A];l++)q=b[E][l],d[k]==q?k++:(this.qd[G](l,0,q.pa.B()),q=Ah(l,[],1,this.qd),g[w](q));return g};function Ah(a,b,c,d){return{lk:c,index:a,object:d,qk:b,type:"splice"}};
function Bh(){this.Zb=new P}J=Bh[B];J.ge=function(a){return Gb(a)[r]()};J.Hd=function(a,b){var c=this.ge(a.ed()),d=this.Zb.get(c,null);null===d&&(d=new Ch(a),this.Zb.set(c,d));d.Hd(b)};J.ye=function(a,b){var c=this.ge(a.ed()),d=this.Zb.get(c,null);N(null!=d,"Attempted to unobserve a query that was not observed.");var g=d.ye(b);N(g,"removeObserver: Inconsistent state detected.");d.Ui()||this.Zb[m](c)};
J.he=function(a){var b=new Q;a[n](function(a){b.add(a[h]())});var c=[];this.Zb.c()[n](function(a){a=a.zc();a[Aa].g[ob](function(a){return b[u](a[h]())})&&c[w](a)});return c};J.rg=function(a,b){var c=this.ge(null!=a.qc?a.qc:a),c=this.Zb.get(c,null);return null!==c?(c.jk(b),!0):!1};function Ch(a){this.Qg=a;this.Gc=new Q;this.pj=[];this.Cf=null;this.yh=new zh(a.ed(),this.pj)}J=Ch[B];J.Hd=function(a){this.Gc[u](a)?Qb("Attempted to register observer twice."):this.Gc.add(a)};J.ye=function(a){return this.Gc[m](a)};
J.zc=function(){return this.Qg.xi()};J.Ui=function(){return 0<this.Gc.Y()};J.jk=function(a){var b=this.yh.Fg(this.Cf,a);this.Cf=a;0<b[A]&&this.Gc.c()[n](function(a){a(b)})};
function Dh(a,b){var c=a.m(rd),d=b||{},g=d.rk||0,k=new Ke;a.eb(md,k);var k=null,l=!1;switch(g){case 1:k=new De(c);break;case 5:k=new Ee(c);break;case 4:k=new Je(a,c,d.sk);break;case 3:k=new we(c,d.nk);l=!0;break;default:k=new Be(a,c)}a.eb(ld,k);return k.Na(d.pk)[D](function(){a.eb(od,new uh(a));var b=new xh;a.eb(pd,b);b=new jf;a.eb(nd,b);var d=new Bh;a.eb(qd,d);return b.Na(c)})[D](function(){l&&(new te(a)).ak();return(new hf(a)).Na(c)})};

function Eh(a,b){this.l=a;this.rb=a.m(ld);this.Ia=a.m(pd);this.tb=a.m(qd);this.Ja=new Q(b);this.Qa=new Gd(this.l,this.Ja.c());this.Ob=Mc();this.vc=Mc();this.He=Mc()}J=Eh[B];ha(J,function(){this.He[nb]();return this.vc.ua});J.$=vb(1);J.Z=I("Ja");J.xc=I("Ob");J.ga=function(){return Gb(this)};ua(J,vb(2));J.vg=function(){this.Ia.Pb(this);return this.He.ua};
J.Ng=function(a){a=a.zc();return a.we.Cb()[Ga](this.Qa,a[Aa])[D](function(a){return a[0].de()},L(function(a){this.Qa.vb();var c=new Ec(a[kb]);this.vc[cb](c);throw a;},this))};J.ba=function(){this.rb.Ab(this.$(),this.Qa).ba()[D](L(function(){this.Ic();this.vc[nb]()},this),L(function(a){this.Qa.vb();this.vc[cb](a)},this));return this.Ob.ua};J.vb=function(){this.Qa.vb();this.vc[nb]();return this.Ob.ua};J.Ic=function(){var a=this.tb.he(this.Ja.c());0!=a[A]&&(a=new re(this.l,a),this.Ia.Pb(a))};
function Fh(a){this.l=a;this.Ia=a.m(pd);this.Lc=null;this.va=0}var Gh=new P(0,new Q([1,4]),1,new Q([2]),2,new Q([3,5,6]),3,new Q([2,7]),4,new Q([7]),5,new Q([7]),6,new Q([7]));Fh[B].Ea=function(a){var b=Gh.get(this.va,null);if(null===b||!b[u](a))throw new R("TransactionError","Invalid transaction state transition, from "+this.va+" to "+a+".");this.va=a};
ha(Fh[B],function(a){this.Ea(4);var b=[];try{a[n](function(a){a.$a();b[w](a.zc())},this)}catch(c){return this.Ea(7),Jc(c)}a=new lg(this.l,b);return this.Ia.Pb(a)[D](L(function(a){this.Ea(7);return a.map(function(a){return a.de()})},this),L(function(a){this.Ea(7);throw a;},this))});K("lf.proc.Transaction.prototype.exec",Fh[B][Ga],void 0);Fh[B].Og=function(a){this.Ea(1);this.Lc=new Eh(this.l,a);return this.Lc.vg()[D](L(function(){this.Ea(2)},this))};
K("lf.proc.Transaction.prototype.begin",Fh[B].Og,void 0);Fh[B].Mg=function(a){this.Ea(3);return this.Lc.Ng(a)[D](L(function(a){this.Ea(2);return a},this),L(function(a){this.Ea(7);throw a;},this))};K("lf.proc.Transaction.prototype.attach",Fh[B].Mg,void 0);Fh[B].ba=function(){this.Ea(5);return this.Lc.ba()[D](L(function(){this.Ea(7)},this))};K("lf.proc.Transaction.prototype.commit",Fh[B].ba,void 0);Fh[B].vb=function(){this.Ea(6);return this.Lc.vb()[D](L(function(){this.Ea(7)},this))};
K("lf.proc.Transaction.prototype.rollback",Fh[B].vb,void 0);
function X(a){this.l=a;this.w=a.m(rd);this.je=!1}K("lf.proc.Database",X,void 0);X[B].Na=function(a){this.l.eb(rd,this.w);return Dh(this.l,a)[D](L(function(){this.je=!0;return this},this))};X[B].init=X[B].Na;X[B].Eb=I("w");X[B].getSchema=X[B].Eb;X[B].Xb=function(){if(!this.je)throw new R("UninitializedError","Database is not initialized");};X[B].select=function(a){this.Xb();return new W(this.l,1!=arguments[A]||null!=arguments[0]?e[B][x][F](arguments):[])};X[B].select=X[B].select;
X[B].lb=function(){this.Xb();return new Ag(this.l)};X[B].insert=X[B].lb;X[B].le=function(){this.Xb();return new Ag(this.l,!0)};X[B].insertOrReplace=X[B].le;za(X[B],function(a){this.Xb();return new Eg(this.l,a)});za(X[B],X[B][rb]);X[B].delete=function(){this.Xb();return new zg(this.l)};X[B]["delete"]=X[B][jb];X[B].observe=function(a,b){this.l.m(qd).Hd(a,b)};X[B].observe=X[B].observe;X[B].unobserve=function(a,b){this.l.m(qd).ye(a,b)};X[B].unobserve=X[B].unobserve;X[B].th=function(){this.Xb();return new Fh(this.l)};
X[B].createTransaction=X[B].th;pa(X[B],function(){try{this.l.m(ld)[Xa]()}catch(a){}this.l[Ma]();this.je=!1});pa(X[B],X[B][Xa]);
function Y(a,b,c,d,g,k){this.C=a;this.u=b;this.yf=c;this.vf=d;this.ng=g;this.Za=k||null}K("lf.schema.BaseColumn",Y,void 0);J=Y[B];ia(J,I("u"));J.j=function(){return this.C.xa()+"."+this.u};f(J,function(){return this.j()});J.V=I("C");J.$=I("ng");J.La=I("Za");J.Ca=function(){null==this.ma&&(this.ma=[],this.V().Ca()[n](function(a){-1!=a.h.map(function(a){return a.Va[h]()})[z](this.u)&&this.ma[w](a)},this));return this.ma};J.dc=I("vf");J.md=I("yf");J.Fa=function(a){return Gf(this,a,"eq")};Y[B].eq=Y[B].Fa;
Y[B].Gf=function(a){return Gf(this,a,"neq")};Y[B].neq=Y[B].Gf;Y[B].re=function(a){return Gf(this,a,"lt")};Y[B].lt=Y[B].re;Y[B].gj=function(a){return Gf(this,a,"lte")};Y[B].lte=Y[B].gj;Y[B].Ni=function(a){return Gf(this,a,"gt")};Y[B].gt=Y[B].Ni;Y[B].Oi=function(a){return Gf(this,a,"gte")};Y[B].gte=Y[B].Oi;Y[B].match=function(a){return Gf(this,a,"match")};Y[B].match=Y[B].match;Y[B].Pg=function(a,b){return Gf(this,[a,b],"between")};Y[B].between=Y[B].Pg;Y[B].Vi=function(a){return Gf(this,a,"in")};
Y[B]["in"]=Y[B].Vi;Y[B].bj=function(){return this.Fa(null)};Y[B].isNull=Y[B].bj;Y[B].aj=function(){return this.Gf(null)};Y[B].isNotNull=Y[B].aj;Y[B].Mc=function(a){return new Y(this.C,this.u,this.yf,this.vf,this.ng,a)};Y[B].as=Y[B].Mc;
function Hh(){this.Bd=new P}var Ih;la(Hh[B],function(){this.Bd[Ma]()});K("lf.Global.prototype.clear",Hh[B][Ma],void 0);Hh[B].eb=function(a,b){this.Bd.set(a[r](),b);return b};K("lf.Global.prototype.registerService",Hh[B].eb,void 0);Hh[B].m=function(a){var b=this.Bd.get(a[r](),null);if(null==b)throw new R("NotFoundError",a[r]());return b};K("lf.Global.prototype.getService",Hh[B].m,void 0);Hh[B].pe=function(a){return this.Bd.s(a[r]())};K("lf.Global.prototype.isRegistered",Hh[B].pe,void 0);
function Jh(a,b){this.Aj=a;this.nj=b}Jh[B].fe=I("Aj");Jh[B].wi=I("nj");
function Z(a){this.u=a;this.H=new P;this.qg=new Q;this.kc=new Q;this.pd=new Q;var b=this.u;this.fc="pk"+(b[0].toUpperCase()+b.substring(1));this.ma=new P;this.td=!1;this.oc(a)}K("lf.schema.TableBuilder",Z,void 0);var Kh=new Q([0,6]);Z[B].oc=function(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new R("SyntaxError",a+" violates naming rule");if(this.H.s(a)||this.ma.s(a)||this.kc[u](a))throw new R("SyntaxError",this.u+"."+a+" is already defined");};
Z[B].bh=function(a){var b=!1;a[n](function(a){var d=this.H.get(a[kb]);b=b||a[Ka];if(a[Ka]&&3!=d)throw new R("SyntaxError","Can not use autoIncrement with a non-integer primary key.");},this);if(b&&1<a[A])throw new R("SyntaxError","Can not use autoIncrement with a cross-column primary key.");};Z[B].xg=function(a,b){this.oc(a);this.H.set(a,b);Kh[u](b)&&this.Ke([a]);return this};Z[B].addColumn=Z[B].xg;
Z[B].Ag=function(a,b){this.oc(this.fc);var c=this.od(a,!0,void 0,b);this.bh(c);c[n](function(a){this.qg.add(a[kb])},this);this.kc.add(this.fc);this.ma.set(this.fc,c);return this};Z[B].addPrimaryKey=Z[B].Ag;Z[B].yg=function(){return this};Z[B].addForeignKey=Z[B].yg;Z[B].Bg=function(a,b){this.oc(a);var c=this.od(b,!0);this.ma.set(a,c);this.kc.add(a);return this};Z[B].addUnique=Z[B].Bg;Z[B].Ke=function(a){a=this.od(a,!1);this.ah(a);a[n](function(a){this.pd.add(a[kb])},this);return this};
Z[B].addNullable=Z[B].Ke;Z[B].ah=function(a){this.ma.G()[n](function(b){var c=new Q;this.ma.get(b)[n](function(a){c.add(a[kb])});var d=a[Ba](function(a){return c[u](a[kb])});if(1<c.Y()&&0<d[A])throw new R("SyntaxError","Cross-column index "+b+" refers to nullable columns: "+d[H](","));},this)};Z[B].zg=function(a,b,c,d){this.oc(a);b=this.od(b,!0,d);this.$g(a,b);c&&this.kc.add(a);this.ma.set(a,b);return this};Z[B].addIndex=Z[B].zg;
Z[B].$g=function(a,b){if(1<b[A]){var c=b[Ba](function(a){return this.pd[u](a[kb])},this);if(0<c[A])throw new R("SyntaxError","Cross-column index "+a+" refers to nullable columns: "+c[H](","));}};Z[B].Mb=ub("td");Z[B].persistentIndex=Z[B].Mb;Z[B].Eb=function(){return new (this.mi())};Z[B].getSchema=Z[B].Eb;
Z[B].od=function(a,b,c,d){var g=a;"string"==typeof a[0]&&(g=a.map(function(a){return{name:a,order:c||1,autoIncrement:d||!1}}));g[n](function(a){if(!this.H.s(a[kb]))throw new R("SyntaxError",this.u+" does not have column: "+a[kb]);if(b){var c=this.H.get(a[kb]);if(0==c||6==c)throw new R("SyntaxError",this.u+" index on non-indexable column: "+a[kb]);}},this);return g};
Z[B].mi=function(){function a(){function a(c){return b.ma.get(c).map(function(a){return{Va:this[a[kb]],mb:a.mb,autoIncrement:a[Ka]}},this)}var d=b.H.G().map(function(a){this[a]=new Y(this,a,b.qg[u](a),b.pd[u](a),b.H.get(a));return this[a]},this),g=b.ma.G().map(function(d){return new If(b.u,d,b.kc[u](d),a[F](this,d))},this);Jf[F](this,b.u,d,g,b.td);var k=b.ma.s(b.fc)?new If(b.u,b.fc,!0,a[F](this,b.fc)):null,l=d[Ba](function(a){return!b.pd[u](a[h]())}),q=b.kc.c().map(function(d){return new If(b.u,d,
!0,a[F](this,d))},this);this.lh=new Jh(k,l,[],q);this.Yf=b.ii(d,g)}var b=this;M(a,Jf);a[B].Xc=function(a){return new this.Yf(Sc++,a)};a[B].createRow=a[B].Xc;a[B].Yb=function(a){var b={};this.sb()[n](function(g){var k=g[h]();g=g.$();var l=a[y][k];if(0==g)if(null===l)g=l;else if(g=l,""==g)g=null;else{0!=g[A]%2&&(g="0"+g);for(var l=new ArrayBuffer(g[A]/2),q=new Uint8Array(l),C=0,Ea=0;C<g[A];C+=2)q[Ea++]=ga(g.substr(C,2),16);g=l}else g=2==g?null===l?l:new Date(l):l;b[k]=g},this);return new this.Yf(a.id,
b)};a[B].deserializeRow=a[B].Yb;a[B].bc=I("lh");a[B].getConstraint=a[B].bc;return a};
Z[B].ii=function(a,b){function c(c,d){this.H=a;this.ma=b;Rc[F](this,c,d)}M(c,Rc);c[B].$e=function(){var a={};this.H[n](function(b){a[b[h]()]=b.dc()?null:Yd[b.$()]});return a};c[B].kg=function(){var a={};this.H[n](function(b){var c=b[h]();b=b.$();var d=this.B()[c];a[c]=0==b?null===d?d:Vc(d):2==b?null===d?d:d[Na]():d},this);return a};var d=L(function(a){var b=this.H.get(a[h]());return 2==b?function(b){b=b[a[h]()];return a.dc()&&null===b?null:b[Na]()}:1==b?function(b){return a.dc()?(b=b[a[h]()],null===
b?null:b?1:0):b[a[h]()]?1:0}:function(b){return b[a[h]()]}},this),g=L(function(a){var b=a.map(function(a){return d(a.Va)});return function(a){return b.map(function(b){return b(a)})}},this),k={};b[n](function(a){var b=a.j();a=1==a.h[A]?d(a.h[0].Va):g(a.h);k[b]=a});c[B].Cc=function(a){return-1!=a[z]("#")?this.id():k[Wa](a)?k[a](this.B()):null};return c};
function Lh(a,b){this.w=new Mh(a,b);this.ic=new P;this.wc=!1}K("lf.schema.Builder",Lh,void 0);Lh[B].Uh=function(){this.wc||(this.ic.G()[n](function(a){a=this.ic.get(a);this.w.Vj(a.Eb())},this),this.ic[Ma](),this.wc=!0)};Lh[B].Eb=function(){this.wc||this.Uh();return this.w};Lh[B].getSchema=Lh[B].Eb;Lh[B].hf=function(){var a=new kd("ns_"+this.w[kb]()),b;Ih||(Ih=new Hh);b=Ih;var c=null;b.pe(a)?c=b.m(a):(c=new Hh,b.eb(a,c));return c};Lh[B].getGlobal=Lh[B].hf;
Lh[B].connect=function(a){var b=this.hf();b.pe(rd)||b.eb(rd,this.Eb());return(new X(b)).Na(a)};Lh[B].connect=Lh[B].connect;Lh[B].rh=function(a){if(this.ic.s(a)||this.wc)throw new R("SyntaxError","Table is already created or schema is already finalized.");this.ic.set(a,new Z(a));return this.ic.get(a)};Lh[B].createTable=Lh[B].rh;Lh[B].Ee=function(a){if(this.wc)throw new R("SyntaxError","Schema is already finalized.");this.w.Ee(a);return this};Lh[B].setPragma=Lh[B].Ee;
function Mh(a,b){this.u=a;this.pb=b;this.I=new P;this.Pf={Ah:!1}}J=Mh[B];wa(J,I("u"));J.version=I("pb");J.fb=function(){return this.I.c()};na(J,function(a){if(!this.I.s(a))throw new R("NotFoundError",a+" is not found in database");return this.I.get(a)});J.Vj=function(a){this.I.set(a[h](),a)};J.yj=I("Pf");J.Ee=ub("Pf");K("lf.schema.create",function(a,b){return new Lh(a,b)},void 0);
function Nh(){this.f=new P;ba.defineProperty(this,"size",{get:function(){return this.f.Y()}})}la(Nh[B],function(){this.f[Ma]()});K("lf.structs.MapPolyFill_.prototype.clear",Nh[B][Ma],void 0);Nh[B].delete=function(a){return this.f[m](a)};K("lf.structs.MapPolyFill_.prototype.delete",Nh[B][jb],void 0);Nh[B].entries=function(){return this.f.qb()};K("lf.structs.MapPolyFill_.prototype.entries",Nh[B][E],void 0);Nh[B].forEach=function(a,b){return this.f[n](a,b)};
K("lf.structs.MapPolyFill_.prototype.forEach",Nh[B][n],void 0);Nh[B].get=function(a){return this.f.get(a)};K("lf.structs.MapPolyFill_.prototype.get",Nh[B].get,void 0);Nh[B].has=function(a){return this.f.s(a)};K("lf.structs.MapPolyFill_.prototype.has",Nh[B].has,void 0);Nh[B].keys=function(){return this.f.ui()};K("lf.structs.MapPolyFill_.prototype.keys",Nh[B].keys,void 0);Nh[B].set=function(a,b){return this.f.set(a,b)};K("lf.structs.MapPolyFill_.prototype.set",Nh[B].set,void 0);ka(Nh[B],function(){return this.f.Ki()});
K("lf.structs.MapPolyFill_.prototype.values",Nh[B][La],void 0);
